!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.wdrd=t():n.wdrd=t()}(self,function(){return function(n){var t={};function r(e){if(t[e])return t[e].exports;var i=t[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)r.d(e,i,function(t){return n[t]}.bind(null,i));return e},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.s=11)}([function(n,t,r){"use strict";r.d(t,"a",function(){return u}),r.d(t,"c",function(){return i}),r.d(t,"b",function(){return o});var e=r(2);function i(n,t,r){for(var e=new Array(r),i=0,o=t;i<r;)e[i]=n[o],i=i+1|0,o=o+1|0;return e}function o(n,t){if(t<0||t>=n.length)throw[e.e,"index out of bounds"];return n[t]}function u(n){return n.slice(0)}},function(n,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"f",function(){return u}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return a}),r.d(t,"d",function(){return s}),r.d(t,"e",function(){return f});var e=r(0);function i(n,t){for(;;){var r=t,o=n,u=o.length,c=u-r.length|0;if(0===c)return o.apply(null,r);if(!(c<0))return function(n,t){return function(r){return i(n,t.concat([r]))}}(o,r);t=e.c(r,u,0|-c),n=o.apply(null,e.c(r,0,u))}}function o(n,t){var r=n.length;return 1===r?n(t):function(n,t,r){switch(r){case 1:return n(t);case 2:return function(r){return n(t,r)};case 3:return function(r,e){return n(t,r,e)};case 4:return function(r,e,i){return n(t,r,e,i)};case 5:return function(r,e,i,o){return n(t,r,e,i,o)};case 6:return function(r,e,i,o,u){return n(t,r,e,i,o,u)};case 7:return function(r,e,i,o,u,c){return n(t,r,e,i,o,u,c)};default:return i(n,[t])}}(n,t,r)}function u(n){return 1===n.length?n:function(t){return o(n,t)}}function c(n,t,r){var e=n.length;return 2===e?n(t,r):function(n,t,r,e){switch(e){case 1:return i(n(t),[r]);case 2:return n(t,r);case 3:return function(e){return n(t,r,e)};case 4:return function(e,i){return n(t,r,e,i)};case 5:return function(e,i,o){return n(t,r,e,i,o)};case 6:return function(e,i,o,u){return n(t,r,e,i,o,u)};case 7:return function(e,i,o,u,c){return n(t,r,e,i,o,u,c)};default:return i(n,[t,r])}}(n,t,r,e)}function a(n,t,r,e){var o=n.length;return 3===o?n(t,r,e):function(n,t,r,e,o){switch(o){case 1:return i(n(t),[r,e]);case 2:return i(n(t,r),[e]);case 3:return n(t,r,e);case 4:return function(i){return n(t,r,e,i)};case 5:return function(i,o){return n(t,r,e,i,o)};case 6:return function(i,o,u){return n(t,r,e,i,o,u)};case 7:return function(i,o,u,c){return n(t,r,e,i,o,u,c)};default:return i(n,[t,r,e])}}(n,t,r,e,o)}function s(n,t,r,e,o){var u=n.length;return 4===u?n(t,r,e,o):function(n,t,r,e,o,u){switch(u){case 1:return i(n(t),[r,e,o]);case 2:return i(n(t,r),[e,o]);case 3:return i(n(t,r,e),[o]);case 4:return n(t,r,e,o);case 5:return function(i){return n(t,r,e,o,i)};case 6:return function(i,u){return n(t,r,e,o,i,u)};case 7:return function(i,u,c){return n(t,r,e,o,i,u,c)};default:return i(n,[t,r,e,o])}}(n,t,r,e,o,u)}function f(n,t,r,e,o,u){var c=n.length;return 5===c?n(t,r,e,o,u):function(n,t,r,e,o,u,c){switch(c){case 1:return i(n(t),[r,e,o,u]);case 2:return i(n(t,r),[e,o,u]);case 3:return i(n(t,r,e),[o,u]);case 4:return i(n(t,r,e,o),[u]);case 5:return n(t,r,e,o,u);case 6:return function(i){return n(t,r,e,o,u,i)};case 7:return function(i,c){return n(t,r,e,o,u,i,c)};default:return i(n,[t,r,e,o,u])}}(n,t,r,e,o,u,c)}},function(n,t,r){"use strict";r.d(t,"d",function(){return e}),r.d(t,"e",function(){return i}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return u}),r.d(t,"g",function(){return c}),r.d(t,"f",function(){return a}),r.d(t,"a",function(){return s});var e=["Failure",-2],i=["Invalid_argument",-3],o=["End_of_file",-4],u=["Division_by_zero",-5],c=["Not_found",-6],a=["Match_failure",-7],s=["Assert_failure",-10];e.tag=248,i.tag=248,o.tag=248,u.tag=248,c.tag=248,a.tag=248,s.tag=248},function(n,t,r){"use strict";(function(n){r.d(t,"f",function(){return f}),r.d(t,"g",function(){return i}),r.d(t,"e",function(){return o}),r.d(t,"a",function(){return u}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return a}),r.d(t,"b",function(){return s});var e=r(1),i=["",function(t,r){var e=r.length-1|0;return void 0!==n&&n.stdout&&n.stdout.write?n.stdout.write(r):"\n"===r[e]?(console.log(r.slice(0,e)),0):(console.log(r),0)}],o=["",function(n,t){var r=t.length-1|0;return"\n"===t[r]?(console.log(t.slice(0,r)),0):(console.log(t),0)}];function u(n){return""!==n[0]?(e.b(n[1],n,n[0]),n[0]="",0):0}function c(t,r,e,o){var c=0===e&&o===r.length?r:r.slice(e,o);if(void 0!==n&&n.stdout&&n.stdout.write&&t===i)return n.stdout.write(c);var a=c.lastIndexOf("\n");return a<0?(t[0]=t[0]+c,0):(t[0]=t[0]+c.slice(0,a+1|0),u(t),t[0]=t[0]+c.slice(a+1|0),0)}function a(n,t){return c(n,String.fromCharCode(t),0,1)}function s(n){return[i,[o,0]]}var f=void 0}).call(this,r(6))},function(module,__webpack_exports__,__webpack_require__){"use strict";function serializeFunction(n){return n.toString()}function deserializeFunction(funcStr){return eval("("+funcStr+")")}function serializeValueWithFunction(n){return JSON.stringify(n,function(n,t){return"function"==typeof t?t.toString():t})}function deserializeValueWithFunction(value){return JSON.parse(value,(key,value)=>"string"!=typeof value?value:"function"==value.substring(0,8)?eval("("+value+")"):value)}__webpack_require__.d(__webpack_exports__,"c",function(){return serializeFunction}),__webpack_require__.d(__webpack_exports__,"a",function(){return deserializeFunction}),__webpack_require__.d(__webpack_exports__,"d",function(){return serializeValueWithFunction}),__webpack_require__.d(__webpack_exports__,"b",function(){return deserializeValueWithFunction})},function(n,t,r){"use strict";(function(n,e){var i,o=r(7);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:e;var u=Object(o.a)(i);t.a=u}).call(this,r(9),r(10)(n))},function(n,t){var r,e,i=n.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(n){if(r===setTimeout)return setTimeout(n,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(t){try{return r.call(null,n,0)}catch(t){return r.call(this,n,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(n){r=o}try{e="function"==typeof clearTimeout?clearTimeout:u}catch(n){e=u}}();var a,s=[],f=!1,h=-1;function l(){f&&a&&(f=!1,a.length?s=a.concat(s):h=-1,s.length&&v())}function v(){if(!f){var n=c(l);f=!0;for(var t=s.length;t;){for(a=s,s=[];++h<t;)a&&a[h].run();h=-1,t=s.length}a=null,f=!1,function(n){if(e===clearTimeout)return clearTimeout(n);if((e===u||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(n);try{e(n)}catch(t){try{return e.call(null,n)}catch(t){return e.call(this,n)}}}(n)}}function p(n,t){this.fun=n,this.array=t}function d(){}i.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new p(n,t)),1!==s.length||f||c(v)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(n){return[]},i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(n,t,r){"use strict";function e(n){var t,r=n.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,"a",function(){return e})},function(n,t,r){"use strict";(function(n){r.d(t,"a",function(){return e});r(2);function e(t){return void 0!==n?n.exit(t):0}}).call(this,r(6))},function(n,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"==typeof window&&(r=window)}n.exports=r},function(n,t){n.exports=function(n){if(!n.webpackPolyfill){var t=Object.create(n);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(n,t,r){"use strict";r.r(t);var e=r(1);
/** @license MIT License (c) copyright 2010-2016 original author or authors */function i(n){this.source=n}function o(n,t){if(n<0)throw new TypeError("n must be >= 0");var r=t.length;return 0===n||0===r?t:n>=r?[]:function(n,t,r){for(var e=new Array(r),i=0;i<r;++i)e[i]=t[n+i];return e}(n,t,r-n)}function u(n){return o(1,n)}function c(n,t){for(var r=t.length,e=new Array(r),i=0;i<r;++i)e[i]=n(t[i]);return e}function a(n,t,r){if(t<0)throw new TypeError("i must be >= 0");for(var e=r.length,i=new Array(e),o=0;o<e;++o)i[o]=t===o?n:r[o];return i}function s(n,t){if(n<0)throw new TypeError("i must be >= 0");var r=t.length;return 0===r||n>=r?t:1===r?[]:function(n,t,r){var e=new Array(r),i=void 0;for(i=0;i<n;++i)e[i]=t[i];for(i=n;i<r;++i)e[i]=t[i+1];return e}(n,t,r-1)}function f(n,t){for(var r=0,e=t.length;r<e;++r)if(n===t[r])return r;return-1}i.prototype.run=function(n,t){return this.source.run(n,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */;
/** @license MIT License (c) copyright 2010-2016 original author or authors */
var h=function(n){return n},l=function(n,t){return n(t)};
/** @license MIT License (c) copyright 2016 original author or authors */
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function v(n,t){this._dispose=n,this._data=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function p(){this.disposable=void 0,this.disposed=!1,this._resolve=void 0;var n=this;this.result=new Promise(function(t){n._resolve=t})}v.prototype.dispose=function(){return this._dispose(this._data)},p.prototype.setDisposable=function(n){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=n,this.disposed&&this._resolve(n.dispose())},p.prototype.dispose=function(){return this.disposed?this.result:(this.disposed=!0,void 0!==this.disposable&&(this.result=this.disposable.dispose()),this.result)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */;
/** @license MIT License (c) copyright 2010-2016 original author or authors */
var d=c,_=h;function g(n,t,r){var e,i=b(t);return null!==(e=i)&&"object"==typeof e&&"function"==typeof e.then?i.catch(function(t){r.error(n,t)}):i}function y(n,t){return x(new v(n,t))}function m(){return new v(_,void 0)}function w(n){return y(E,n)}function E(n){return Promise.all(d(b,n))}function b(n){try{return n.dispose()}catch(n){return Promise.reject(n)}}function T(){return new p}function x(n){return new v(A,function(n){return{disposed:!1,disposable:n,value:void 0}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(n))}function A(n){return n.disposed||(n.disposed=!0,n.value=b(n.disposable),n.disposable=void 0),n.value}function S(n){setTimeout(function(){throw n},0)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function L(n,t,r){this._run=n,this.value=t,this.sink=r,this.active=!0}function D(n,t,r){r.error(n,t)}function R(n,t,r){r.event(n,t)}function k(n,t,r){r.end(n,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function P(n){return new i(new M(n))}function M(n){this.value=n}function N(n,t,r){r.event(n,t),r.end(n,void 0)}function C(){return U}function I(){}function B(n){return n.dispose()}L.event=function(n,t){return new L(R,n,t)},L.end=function(n,t){return new L(k,n,t)},L.error=function(n,t){return new L(D,n,t)},L.prototype.dispose=function(){this.active=!1},L.prototype.run=function(n){this.active&&this._run(n,this.value,this.sink)},L.prototype.error=function(n,t){if(!this.active)return S(t);this.sink.error(n,t)},M.prototype.run=function(n,t){return t.asap(new L(N,this.value,n))},I.prototype.run=function(n,t){var r=L.end(void 0,n);return t.asap(r),y(B,r)};var U=new i(new I);function F(){}F.prototype.run=function(){return m()};var O;
/** @license MIT License (c) copyright 2010-2016 original author or authors */new i(new F);function Y(n){this.array=n}function G(n,t,r){for(var e=0,i=t.length;e<i&&this.active;++e)r.event(n,t[e]);this.active&&r.end(n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function H(n){this.iterable=n}function W(n,t,r){for(var e=t.next();!e.done&&this.active;)r.event(n,e.value),e=t.next();r.end(n,e.value)}Y.prototype.run=function(n,t){return t.asap(new L(G,this.array,n))},O="function"==typeof Set&&"function"==typeof(new Set)["@@iterator"]?"@@iterator":"function"==typeof Symbol?Symbol.iterator:"_es6shim_iterator_",H.prototype.run=function(n,t){return t.asap(new L(W,this.iterable[O](),n))};var V=r(5);
/** @license MIT License (c) copyright 2010-2016 original author or authors */
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function j(n,t,r){try{r.event(n,t)}catch(t){r.error(n,t)}}function z(n,t,r){try{r.end(n,t)}catch(t){r.error(n,t)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function q(n){this.observable=n}function X(n,t){this.sink=n,this.scheduler=t}function J(n){return n.unsubscribe()}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function K(n){if(n instanceof i)return n;var t,r=function(n){var t=null;if(n){var r=n[V.a];if("function"==typeof r&&(!(t=r.call(n))||"function"!=typeof t.subscribe))throw new TypeError("invalid observable "+t)}return t}(n);if(null!=r)return function(n){return new i(new q(n))}(r);if(Array.isArray(n)||null!=(t=n)&&"number"==typeof t.length&&"function"!=typeof t)return function(n){return new i(new Y(n))}(n);if("function"==typeof n[O])return new i(new H(n));throw new TypeError("from(x) must be observable, iterable, or array-like: "+n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function $(n,t){this.period=n,this.value=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Q(n,t,r,e){this.time=n,this.period=t,this.task=r,this.scheduler=e,this.active=!0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Z(n){return Promise.resolve(n).then(nn)}function nn(n){try{return n.run()}catch(t){return n.error(t)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function tn(n,t){this.timer=n,this.timeline=t,this._timer=null,this._nextArrival=1/0;var r=this;this._runReadyTasksBound=function(){r._runReadyTasks(r.now())}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function rn(){}function en(n){this.f=n,this.active=!0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function on(){this.tasks=[]}function un(n,t,r){for(var e=t.events,i=0;i<e.length;++i){var o=e[i];o.active&&(n(o),o.period>=0&&o.active&&(o.time=o.time+o.period,cn(o,r)))}return r}function cn(n,t){var r=t.length;if(0!==r){var e=sn(n.time,t);e>=r?t.push(fn(n.time,[n])):n.time===t[e].time?t[e].events.push(n):t.splice(e,0,fn(n.time,[n]))}else t.push(fn(n.time,[n]))}function an(n,t){t.events=function(n,t){for(var r,e=t.length,i=new Array(e),o=0,u=0;u<e;++u)n(r=t[u])||(i[o]=r,++o);return i.length=o,i}(n,t.events)}function sn(n,t){for(var r,e,i=0,o=t.length;i<o;){if(n===(e=t[r=Math.floor((i+o)/2)]).time)return r;n<e.time?o=r:i=r+1}return o}function fn(n,t){return{time:n,events:t}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */q.prototype.run=function(n,t){var r=this.observable.subscribe(new X(n,t));if("function"==typeof r)return y(r);if(r&&"function"==typeof r.unsubscribe)return y(J,r);throw new TypeError("Observable returned invalid subscription "+String(r))},X.prototype.next=function(n){j(this.scheduler.now(),n,this.sink)},X.prototype.complete=function(n){z(this.scheduler.now(),n,this.sink)},X.prototype.error=function(n){this.sink.error(this.scheduler.now(),n)},$.prototype.run=function(n,t){return t.periodic(this.period,L.event(this.value,n))},Q.prototype.run=function(){return this.task.run(this.time)},Q.prototype.error=function(n){return this.task.error(this.time,n)},Q.prototype.dispose=function(){return this.scheduler.cancel(this),this.task.dispose()},tn.prototype.now=function(){return this.timer.now()},tn.prototype.asap=function(n){return this.schedule(0,-1,n)},tn.prototype.delay=function(n,t){return this.schedule(n,-1,t)},tn.prototype.periodic=function(n,t){return this.schedule(0,n,t)},tn.prototype.schedule=function(n,t,r){var e=this.now(),i=new Q(e+Math.max(0,n),t,r,this);return this.timeline.add(i),this._scheduleNextRun(e),i},tn.prototype.cancel=function(n){n.active=!1,this.timeline.remove(n)&&this._reschedule()},tn.prototype.cancelAll=function(n){this.timeline.removeAll(n),this._reschedule()},tn.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.now())},tn.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},tn.prototype._scheduleNextRun=function(n){if(!this.timeline.isEmpty()){var t=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(t,n):t<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(t,n))}},tn.prototype._scheduleNextArrival=function(n,t){this._nextArrival=n;var r=Math.max(0,n-t);this._timer=this.timer.setTimer(this._runReadyTasksBound,r)},tn.prototype._runReadyTasks=function(n){this._timer=null,this.timeline.runTasks(n,nn),this._scheduleNextRun(this.now())},rn.prototype.now=Date.now,rn.prototype.setTimer=function(n,t){return t<=0?function(n){var t=new en(n);return Z(t),t}(n):setTimeout(n,t)},rn.prototype.clearTimer=function(n){return n instanceof en?n.cancel():clearTimeout(n)},en.prototype.run=function(){return this.active&&this.f()},en.prototype.error=function(n){throw n},en.prototype.cancel=function(){this.active=!1},on.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},on.prototype.isEmpty=function(){return 0===this.tasks.length},on.prototype.add=function(n){cn(n,this.tasks)},on.prototype.remove=function(n){var t=sn(n.time,this.tasks);if(t>=0&&t<this.tasks.length){var r=f(n,this.tasks[t].events);if(r>=0)return this.tasks[t].events.splice(r,1),!0}return!1},on.prototype.removeAll=function(n){for(var t=0,r=this.tasks.length;t<r;++t)an(n,this.tasks[t])},on.prototype.runTasks=function(n,t){for(var r=this.tasks,e=r.length,i=0;i<e&&r[i].time<=n;)++i;this.tasks=r.slice(i);for(var o=0;o<i;++o)this.tasks=un(t,r[o],this.tasks)};var hn=new tn(new rn,new on);function ln(n,t,r){this.fatalError=n,this.subscriber=t,this.disposable=r}function vn(n){this.disposable=n}function pn(n,t,r){if("function"==typeof t.error)try{t.error(n)}catch(n){r(n)}else r(n)}
/** @license MIT License (c) copyright 2010-2017 original author or authors */
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function dn(n,t,r){this.event=n,this.source=t,this.capture=r}function _n(n){var t=n.target;t.source.removeEventListener(t.event,n.addEvent,t.capture)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function gn(n){this.sink=n,this.events=[],this.active=!0}function yn(n,t,r){this.sink=n,this.events=r,this.time=t}function mn(n,t,r){this.time=n,this.value=t,this.sink=r}function wn(n,t,r){this.time=n,this.value=t,this.sink=r}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function En(n,t){this.event=n,this.source=t}function bn(n){var t=n.target;t.source.removeListener(t.event,n.addEvent)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Tn(n,t,r){var e;if("function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener)arguments.length<3&&(r=!1),e=new dn(n,t,r);else{if("function"!=typeof t.addListener||"function"!=typeof t.removeListener)throw new Error("source must support addEventListener/removeEventListener or addListener/removeListener");e=new En(n,t)}return new i(e)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function xn(n){return function(n,t){return new Promise(function(r,e){!function(n,t,r,e){var i=T(),o=new An(r,e,i);i.setDisposable(n.run(o,t))}(n,t,r,e)})}(n,hn)}function An(n,t,r){this._end=n,this._error=t,this._disposable=r,this.active=!0}function Sn(n,t,r,e){Promise.resolve(r.dispose()).then(function(){n(e)},t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Ln(n){this.sink=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Dn(n,t){this.p=n,this.source=t}function Rn(n,t){this.p=n,this.sink=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function kn(n,t,r){this.p=n,this.f=t,this.source=r}function Pn(n,t,r){this.p=n,this.f=t,this.sink=r}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Mn(n,t){this.f=n,this.source=t}function Nn(n,t){this.f=n,this.sink=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Cn(n,t){return new i(Mn.create(n,t.source))}function In(n,t){return new i(new Bn(n,t.source))}function Bn(n,t){this.source=t,this.f=n}function Un(n,t){this.sink=t,this.f=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Fn(n,t){return On(In(n,t))}function On(n){return xn(n.source)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Yn(n,t,r){this.step=n,this.seed=t,this.source=r}function Gn(n,t,r){this.step=n,this.seed=t,this.sink=r}function Hn(n,t,r){this.source=r,this.f=n,this.value=t}function Wn(n,t,r){this.f=n,this.value=t,this.sink=r}function Vn(n,t,r){return xn(new jn(n,t,r.source))}function jn(n,t,r){this.source=r,this.f=n,this.value=t}function zn(n,t,r){this.f=n,this.value=t,this.sink=r}function qn(n,t){this.f=n,this.value=t}function Xn(n,t,r,e){this.f=n,this.sink=r,this.scheduler=e,this.active=!0;var i=this;Promise.resolve(this).then(function(n){return Jn(n,t)}).catch(function(n){i.sink.error(i.scheduler.now(),n)})}function Jn(n,t){var r=n.f;return Promise.resolve(r(t)).then(function(t){return function(n,t){if(t.done)return n.sink.end(n.scheduler.now(),t.value),t.value;if(n.sink.event(n.scheduler.now(),t.value),!n.active)return t.value;return Jn(n,t.seed)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(n,t)})}function Kn(n,t){this.f=n,this.value=t}function $n(n,t,r,e){this.f=n,this.sink=r,this.scheduler=e,this.active=!0;var i=t,o=this;Promise.resolve(this).then(function(n){return Qn(n,i)}).catch(function(n){o.sink.error(o.scheduler.now(),n)})}function Qn(n,t){if(n.sink.event(n.scheduler.now(),t),!n.active)return t;var r=n.f;return Promise.resolve(r(t)).then(function(t){return function(n,t){return n.active?Qn(n,t):n.value}
/** @license MIT License (c) copyright 2010-2014 original author or authors */(n,t)})}function Zn(n,t){this.f=n,this.args=t}function nt(n,t,r){this.iterator=n,this.sink=t,this.scheduler=r,this.active=!0;var e=this;Promise.resolve(this).then(tt).catch(function(n){e.sink.error(e.scheduler.now(),n)})}function tt(n,t){return n.active?rt(n,n.iterator.next(t)):t}function rt(n,t){return t.done?n.sink.end(n.scheduler.now(),t.value):Promise.resolve(t.value).then(function(t){return function(n,t){return n.sink.event(n.scheduler.now(),t),tt(n,t)}(n,t)},function(t){return function(n,t){return rt(n,n.iterator.throw(t))}(n,t)})}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function et(n,t){return new i(new it(n,t.source))}function it(n,t){this.f=n,this.source=t}function ot(n,t,r,e){this.f=n,this.sink=r,this.scheduler=e,this.active=!0,this.disposable=x(t.run(this,e))}function ut(n,t){return et(function(){return t},n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function ct(n,t){this.sink=t,this.index=n,this.active=!0,this.value=void 0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function at(n,t){switch(t.length){case 0:return n();case 1:return n(t[0]);case 2:return n(t[0],t[1]);case 3:return n(t[0],t[1],t[2]);case 4:return n(t[0],t[1],t[2],t[3]);case 5:return n(t[0],t[1],t[2],t[3],t[4]);default:return n.apply(void 0,t)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */ln.prototype.event=function(n,t){this.disposable.disposed||"function"!=typeof this.subscriber.next||this.subscriber.next(t)},ln.prototype.end=function(n,t){if(!this.disposable.disposed){var r=this.subscriber,e=this.fatalError;Promise.resolve(this.disposable.dispose()).then(function(){"function"==typeof r.complete&&r.complete(t)}).catch(function(n){pn(n,r,e)})}},ln.prototype.error=function(n,t){var r=this.subscriber,e=this.fatalError;Promise.resolve(this.disposable.dispose()).then(function(){pn(t,r,e)})},vn.prototype.unsubscribe=function(){this.disposable.dispose()},dn.prototype.run=function(n,t){function r(r){j(t.now(),r,n)}return this.source.addEventListener(this.event,r,this.capture),y(_n,{target:this,addEvent:r})},gn.prototype.event=function(n,t){this.active&&(0===this.events.length&&Z(new yn(this.sink,n,this.events)),this.events.push({time:n,value:t}))},gn.prototype.end=function(n,t){this.active&&this._end(new mn(n,t,this.sink))},gn.prototype.error=function(n,t){this._end(new wn(n,t,this.sink))},gn.prototype._end=function(n){this.active=!1,Z(n)},yn.prototype.run=function(){for(var n,t=this.events,r=this.sink,e=0,i=t.length;e<i;++e)n=t[e],this.time=n.time,r.event(n.time,n.value);t.length=0},yn.prototype.error=function(n){this.sink.error(this.time,n)},mn.prototype.run=function(){this.sink.end(this.time,this.value)},mn.prototype.error=function(n){this.sink.error(this.time,n)},wn.prototype.run=function(){this.sink.error(this.time,this.value)},wn.prototype.error=function(n){throw n},En.prototype.run=function(n,t){var r=new gn(n);function e(n){var e=arguments.length;if(e>1){for(var i=new Array(e),o=0;o<e;++o)i[o]=arguments[o];j(t.now(),i,r)}else j(t.now(),n,r)}return this.source.addListener(this.event,e),y(bn,{target:this,addEvent:e})},An.prototype.event=function(n,t){},An.prototype.end=function(n,t){this.active&&(this.active=!1,Sn(this._end,this._error,this._disposable,t))},An.prototype.error=function(n,t){this.active=!1,Sn(this._error,this._error,this._disposable,t)},Ln.prototype.event=function(n,t){return this.sink.event(n,t)},Ln.prototype.end=function(n,t){return this.sink.end(n,t)},Ln.prototype.error=function(n,t){return this.sink.error(n,t)},Dn.create=function(n,t){return t instanceof Dn?new Dn(function(n,t){return function(r){return n(r)&&t(r)}}(t.p,n),t.source):new Dn(n,t)},Dn.prototype.run=function(n,t){return this.source.run(new Rn(this.p,n),t)},Rn.prototype.end=Ln.prototype.end,Rn.prototype.error=Ln.prototype.error,Rn.prototype.event=function(n,t){(0,this.p)(t)&&this.sink.event(n,t)},kn.prototype.run=function(n,t){return this.source.run(new Pn(this.p,this.f,n),t)},Pn.prototype.event=function(n,t){var r=this.f;(0,this.p)(t)&&this.sink.event(n,r(t))},Pn.prototype.end=Ln.prototype.end,Pn.prototype.error=Ln.prototype.error,Mn.create=function(n,t){return t instanceof Mn?new Mn(function(n,t){return function(r){return n(t(r))}}(n,t.f),t.source):t instanceof Dn?new kn(t.p,n,t.source):new Mn(n,t)},Mn.prototype.run=function(n,t){return this.source.run(new Nn(this.f,n),t)},Nn.prototype.end=Ln.prototype.end,Nn.prototype.error=Ln.prototype.error,Nn.prototype.event=function(n,t){var r=this.f;this.sink.event(n,r(t))},Bn.prototype.run=function(n,t){return this.source.run(new Un(this.f,n),t)},Un.prototype.end=Ln.prototype.end,Un.prototype.error=Ln.prototype.error,Un.prototype.event=function(n,t){(0,this.f)(t),this.sink.event(n,t)},Yn.prototype.run=function(n,t){return this.source.run(new Gn(this.step,this.seed,n),t)},Gn.prototype.error=Ln.prototype.error,Gn.prototype.event=function(n,t){var r=this.step(this.seed,t);this.seed=r.seed,this.sink.event(n,r.value)},Gn.prototype.end=function(n){this.sink.end(n,this.seed)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,Hn.prototype.run=function(n,t){return w([t.asap(L.event(this.value,n)),this.source.run(new Wn(this.f,this.value,n),t)])},Wn.prototype.event=function(n,t){var r=this.f;this.value=r(this.value,t),this.sink.event(n,this.value)},Wn.prototype.error=Ln.prototype.error,Wn.prototype.end=Ln.prototype.end,jn.prototype.run=function(n,t){return this.source.run(new zn(this.f,this.value,n),t)},zn.prototype.event=function(n,t){var r=this.f;this.value=r(this.value,t),this.sink.event(n,this.value)},zn.prototype.error=Ln.prototype.error,zn.prototype.end=function(n){this.sink.end(n,this.value)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,qn.prototype.run=function(n,t){return new Xn(this.f,this.value,n,t)},Xn.prototype.dispose=function(){this.active=!1},Kn.prototype.run=function(n,t){return new $n(this.f,this.value,n,t)},$n.prototype.dispose=function(){this.active=!1},Zn.prototype.run=function(n,t){return new nt(this.f.apply(void 0,this.args),n,t)},nt.prototype.dispose=function(){this.active=!1},it.prototype.run=function(n,t){return new ot(this.f,this.source,n,t)},ot.prototype.error=Ln.prototype.error,ot.prototype.event=function(n,t){this.active&&this.sink.event(n,t)},ot.prototype.end=function(n,t){this.active&&(g(n,this.disposable,this.sink),this._startNext(n,t,this.sink))},ot.prototype._startNext=function(n,t,r){try{this.disposable=this._continue(this.f,t,r)}catch(t){r.error(n,t)}},ot.prototype._continue=function(n,t,r){return n(t).source.run(r,this.scheduler)},ot.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,ct.prototype.event=function(n,t){this.active&&(this.value=t,this.sink.event(n,this))},ct.prototype.end=function(n,t){this.active&&(this.active=!1,this.sink.end(n,{index:this.index,value:t}))},ct.prototype.error=Ln.prototype.error;var st=c,ft=u;function ht(n,t){var r=t.length;return 0===r?C():1===r?Cn(n,t[0]):new i(function(n,t){return new vt(n,st(lt,t))}(n,t))}function lt(n){return n.source}function vt(n,t){this.f=n,this.sources=t}function pt(n,t,r,e){this.sink=r,this.disposables=n,this.sinks=t,this.f=e;var i=t.length;this.awaiting=i,this.values=new Array(i),this.hasValue=new Array(i);for(var o=0;o<i;++o)this.hasValue[o]=!1;this.activeCount=t.length}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function dt(n,t){return function(n){return ht(n,ft(arguments))}(l,n,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function _t(n,t){this.transducer=n,this.source=t}function gt(n,t){this.xf=n,this.sink=t}function yt(n){this.time=-1/0,this.sink=n}function mt(n){this.tx=n}function wt(n){this.tx=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Et(){this.head=null,this.length=0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function bt(n,t){return Tt(h,n,t)}function Tt(n,t,r){return new i(new xt(n,t,r.source))}function xt(n,t,r){this.f=n,this.concurrency=t,this.source=r}function At(n,t,r,e,i){this.f=n,this.concurrency=t,this.sink=e,this.scheduler=i,this.pending=[],this.current=new Et,this.disposable=x(r.run(this,i)),this.active=!0}function St(n,t,r){this.prev=this.next=null,this.time=n,this.outer=t,this.sink=r,this.disposable=void 0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Lt(n,t){return Tt(n,1/0,t)}function Dt(n){return bt(1/0,n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Rt(n,t){return Tt(n,1,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */vt.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e),o=new Array(e),u=new pt(i,o,n,this.f),c=0;c<e;++c)r=o[c]=new ct(c,u),i[c]=this.sources[c].run(r,t);return w(i)},pt.prototype.error=Ln.prototype.error,pt.prototype.event=function(n,t){var r=t.index,e=this._updateReady(r);this.values[r]=t.value,0===e&&this.sink.event(n,at(this.f,this.values))},pt.prototype._updateReady=function(n){return this.awaiting>0&&(this.hasValue[n]||(this.hasValue[n]=!0,this.awaiting-=1)),this.awaiting},pt.prototype.end=function(n,t){g(n,this.disposables[t.index],this.sink),0==--this.activeCount&&this.sink.end(n,t.value)},_t.prototype.run=function(n,t){var r,e=this.transducer(new yt(n));return this.source.run(new gt("function"==typeof(r=e)["@@transducer/step"]?new mt(r):new wt(r),n),t)},gt.prototype.event=function(n,t){var r=this.xf.step(n,t);return this.xf.isReduced(r)?this.sink.end(n,this.xf.getResult(r)):r},gt.prototype.end=function(n,t){return this.xf.result(t)},gt.prototype.error=function(n,t){return this.sink.error(n,t)},yt.prototype["@@transducer/init"]=yt.prototype.init=function(){},yt.prototype["@@transducer/step"]=yt.prototype.step=function(n,t){return isNaN(n)||(this.time=Math.max(n,this.time)),this.sink.event(this.time,t)},yt.prototype["@@transducer/result"]=yt.prototype.result=function(n){return this.sink.end(this.time,n)},mt.prototype.step=function(n,t){return this.tx["@@transducer/step"](n,t)},mt.prototype.result=function(n){return this.tx["@@transducer/result"](n)},mt.prototype.isReduced=function(n){return null!=n&&n["@@transducer/reduced"]},mt.prototype.getResult=function(n){return n["@@transducer/value"]},wt.prototype.step=function(n,t){return this.tx.step(n,t)},wt.prototype.result=function(n){return this.tx.result(n)},wt.prototype.isReduced=function(n){return null!=n&&n.__transducers_reduced__},wt.prototype.getResult=function(n){return n.value},Et.prototype.add=function(n){null!==this.head&&(this.head.prev=n,n.next=this.head),this.head=n,++this.length},Et.prototype.remove=function(n){--this.length,n===this.head&&(this.head=this.head.next),null!==n.next&&(n.next.prev=n.prev,n.next=null),null!==n.prev&&(n.prev.next=n.next,n.prev=null)},Et.prototype.isEmpty=function(){return 0===this.length},Et.prototype.dispose=function(){if(this.isEmpty())return Promise.resolve();var n=[],t=this.head;for(this.head=null,this.length=0;null!==t;)n.push(t.dispose()),t=t.next;return Promise.all(n)},xt.prototype.run=function(n,t){return new At(this.f,this.concurrency,this.source,n,t)},At.prototype.event=function(n,t){this._addInner(n,t)},At.prototype._addInner=function(n,t){this.current.length<this.concurrency?this._startInner(n,t):this.pending.push(t)},At.prototype._startInner=function(n,t){try{this._initInner(n,t)}catch(t){this.error(n,t)}},At.prototype._initInner=function(n,t){var r=new St(n,this,this.sink);r.disposable=function(n,t,r,e){return n(t).source.run(r,e)}(this.f,t,r,this.scheduler),this.current.add(r)},At.prototype.end=function(n,t){this.active=!1,g(n,this.disposable,this.sink),this._checkEnd(n,t)},At.prototype.error=function(n,t){this.active=!1,this.sink.error(n,t)},At.prototype.dispose=function(){return this.active=!1,this.pending.length=0,Promise.all([this.disposable.dispose(),this.current.dispose()])},At.prototype._endInner=function(n,t,r){this.current.remove(r),g(n,r,this),0===this.pending.length?this._checkEnd(n,t):this._startInner(n,this.pending.shift())},At.prototype._checkEnd=function(n,t){!this.active&&this.current.isEmpty()&&this.sink.end(n,t)},St.prototype.event=function(n,t){this.sink.event(Math.max(n,this.time),t)},St.prototype.end=function(n,t){this.outer._endInner(Math.max(n,this.time),t,this)},St.prototype.error=function(n,t){this.outer.error(Math.max(n,this.time),t)},St.prototype.dispose=function(){return this.disposable.dispose()};var kt=function(n,t,r){for(var e=t,i=0,o=r.length;i<o;++i)e=n(e,r[i],i);return e};function Pt(n){var t=n.length;return 0===t?C():1===t?n[0]:new i(function(n){return new Nt(kt(Mt,[],n))}(n))}function Mt(n,t){var r=t.source;return r instanceof Nt?n.concat(r.sources):n.concat(r)}function Nt(n){this.sources=n}function Ct(n,t,r){this.sink=r,this.disposables=n,this.activeCount=t.length}function It(n,t,r){return new i(new Ut(n,t.source,c(Bt,r)))}function Bt(n){return n.source}function Ut(n,t,r){this.f=n,this.sampler=t,this.sources=r}function Ft(n){this.sink=n,this.hasValue=!1}function Ot(n,t,r){this.f=n,this.sinks=t,this.sink=r,this.active=!1}function Yt(n){return n.hasValue}function Gt(n){return n.value}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Ht(n){this._capacity=n||32,this._length=0,this._head=0}Nt.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e),o=new Array(e),u=new Ct(i,o,n),c=0;c<e;++c)r=o[c]=new ct(c,u),i[c]=this.sources[c].run(r,t);return w(i)},Ct.prototype.error=Ln.prototype.error,Ct.prototype.event=function(n,t){this.sink.event(n,t.value)},Ct.prototype.end=function(n,t){g(n,this.disposables[t.index],this.sink),0==--this.activeCount&&this.sink.end(n,t.value)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,Ut.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e+1),o=new Array(e),u=new Ot(this.f,o,n),c=0;c<e;++c)r=o[c]=new Ft(u),i[c]=this.sources[c].run(r,t);return i[c]=this.sampler.run(u,t),w(i)},Ft.prototype.event=function(n,t){this.value=t,this.hasValue=!0,this.sink._notify(this)},Ft.prototype.end=function(){},Ft.prototype.error=Ln.prototype.error,Ot.prototype._notify=function(){this.active||(this.active=this.sinks.every(Yt))},Ot.prototype.event=function(n){this.active&&this.sink.event(n,at(this.f,c(Gt,this.sinks)))},Ot.prototype.end=Ln.prototype.end,Ot.prototype.error=Ln.prototype.error,Ht.prototype.push=function(n){var t=this._length;this._checkCapacity(t+1),this[this._head+t&this._capacity-1]=n,this._length=t+1},Ht.prototype.shift=function(){var n=this._head,t=this[n];return this[n]=void 0,this._head=n+1&this._capacity-1,this._length--,t},Ht.prototype.isEmpty=function(){return 0===this._length},Ht.prototype.length=function(){return this._length},Ht.prototype._checkCapacity=function(n){this._capacity<n&&this._ensureCapacity(this._capacity<<1)},Ht.prototype._ensureCapacity=function(n){var t=this._capacity;this._capacity=n;var r=this._head+this._length;r>t&&function(n,t,r,e,i){for(var o=0;o<i;++o)r[o+e]=n[o+t],n[o+t]=void 0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(this,0,this,t,r&t-1)};var Wt=c;function Vt(n,t){return 0===t.length?C():1===t.length?Cn(n,t[0]):new i(new zt(n,Wt(jt,t)))}function jt(n){return n.source}function zt(n,t){this.f=n,this.sources=t}function qt(n,t,r,e){this.f=n,this.sinks=r,this.sink=e,this.buffers=t}function Xt(n){return n.shift()}function Jt(n){this.source=n}function Kt(n,t){this.sink=n,this.scheduler=t,this.current=null,this.ended=!1}function $t(n,t,r,e){this.min=n,this.max=t,this.outer=r,this.sink=e,this.disposable=m()}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Qt(n,t){return new i(Dn.create(n,t.source))}function Zt(n,t){return new i(new nr(n,t.source))}function nr(n,t){this.equals=n,this.source=t}function tr(n,t){this.equals=n,this.sink=t,this.value=void 0,this.init=!0}function rr(n,t){return n===t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function er(n,t){return or(0,n,t)}function ir(n,t){return or(n,1/0,t)}function or(n,t,r){return t<=n?C():new i(ur(n,t,r.source))}function ur(n,t,r){return r instanceof Mn?function(n,t,r){return Mn.create(r.f,ur(n,t,r.source))}(n,t,r):r instanceof cr?function(n,t,r){return n+=r.min,t=Math.min(t+r.min,r.max),new cr(n,t,r.source)}(n,t,r):new cr(n,t,r)}function cr(n,t,r){this.source=r,this.min=n,this.max=t}function ar(n,t,r,e){this.sink=r,this.skip=n,this.take=t,this.disposable=e}function sr(n,t){this.p=n,this.source=t}function fr(n,t,r){this.p=n,this.sink=t,this.active=!0,this.disposable=r}function hr(n,t){this.p=n,this.source=t}function lr(n,t){this.p=n,this.sink=t,this.skipping=!0}function vr(n,t){this.p=n,this.source=t}function pr(n,t){this.p=n,this.sink=t,this.skipping=!1}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function dr(n,t){return new i(new gr(n.source,t.source))}function _r(n,t){return new i(new yr(n.source,t.source))}function gr(n,t){this.maxSignal=n,this.source=t}function yr(n,t){this.minSignal=n,this.source=t}function mr(n,t){this.value=n,this.sink=t}function wr(n,t,r){this.min=n,this.max=t,this.sink=r}function Er(n,t,r){this.value=1/0,this.sink=t,this.disposable=n.run(this,r)}function br(n,t,r){this.value=1/0,this.sink=t,this.disposable=n.run(this,r)}function Tr(){}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function xr(n,t){this.dt=n,this.source=t}function Ar(n,t,r){this.dt=n,this.sink=t,this.scheduler=r}function Sr(n){this.source=n}function Lr(n){this.sink=n}function Dr(n,t){return t instanceof Mn?function(n,t){return Mn.create(t.f,Dr(n,t.source))}(n,t):t instanceof Rr?function(n,t){return new Rr(Math.max(n,t.period),t.source)}(n,t):new Rr(n,t)}function Rr(n,t){this.period=n,this.source=t}function kr(n,t){this.time=0,this.period=n,this.sink=t}function Pr(n,t){this.dt=n,this.source=t}function Mr(n,t,r,e){this.dt=n,this.sink=r,this.scheduler=e,this.value=void 0,this.timer=null,this.disposable=t.run(this,e)}function Nr(n,t){this.debounce=n,this.value=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Cr(n){return Ir(P(n))}function Ir(n){return new i(new Br(n.source))}function Br(n){this.source=n}function Ur(n,t){this.sink=n,this.scheduler=t,this.queue=Promise.resolve();var r=this;this._eventBound=function(n){r.sink.event(r.scheduler.now(),n)},this._endBound=function(n){r.sink.end(r.scheduler.now(),n)},this._errorBound=function(n){r.sink.error(r.scheduler.now(),n)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Fr(n){this.sink=n,this.active=!0}zt.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e),o=new Array(e),u=new Array(e),c=new qt(this.f,u,o,n),a=0;a<e;++a)u[a]=new Ht,r=o[a]=new ct(a,c),i[a]=this.sources[a].run(r,t);return w(i)},qt.prototype.event=function(n,t){var r=this.buffers,e=r[t.index];if(e.push(t.value),1===e.length()){if(!function(n){for(var t=0,r=n.length;t<r;++t)if(n[t].isEmpty())return!1;return!0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(this.buffers))return;!function(n,t,r,e){e.event(t,at(n,Wt(Xt,r)))}(this.f,n,r,this.sink),function(n,t){for(var r=0,e=n.length;r<e;++r)if(n[r].isEmpty()&&!t[r].active)return!0;return!1}(this.buffers,this.sinks)&&this.sink.end(n,void 0)}},qt.prototype.end=function(n,t){this.buffers[t.index].isEmpty()&&this.sink.end(n,t.value)},qt.prototype.error=Ln.prototype.error,Jt.prototype.run=function(n,t){var r=new Kt(n,t);return w([r,this.source.run(r,t)])},Kt.prototype.event=function(n,t){this._disposeCurrent(n),this.current=new $t(n,1/0,this,this.sink),this.current.disposable=t.source.run(this.current,this.scheduler)},Kt.prototype.end=function(n,t){this.ended=!0,this._checkEnd(n,t)},Kt.prototype.error=function(n,t){this.ended=!0,this.sink.error(n,t)},Kt.prototype.dispose=function(){return this._disposeCurrent(this.scheduler.now())},Kt.prototype._disposeCurrent=function(n){if(null!==this.current)return this.current._dispose(n)},Kt.prototype._disposeInner=function(n,t){t._dispose(n),t===this.current&&(this.current=null)},Kt.prototype._checkEnd=function(n,t){this.ended&&null===this.current&&this.sink.end(n,t)},Kt.prototype._endInner=function(n,t,r){this._disposeInner(n,r),this._checkEnd(n,t)},Kt.prototype._errorInner=function(n,t,r){this._disposeInner(n,r),this.sink.error(n,t)},$t.prototype.event=function(n,t){n<this.max&&this.sink.event(Math.max(n,this.min),t)},$t.prototype.end=function(n,t){this.outer._endInner(Math.max(n,this.min),t,this)},$t.prototype.error=function(n,t){this.outer._errorInner(Math.max(n,this.min),t,this)},$t.prototype._dispose=function(n){this.max=n,g(n,this.disposable,this.sink)},nr.prototype.run=function(n,t){return this.source.run(new tr(this.equals,n),t)},tr.prototype.end=Ln.prototype.end,tr.prototype.error=Ln.prototype.error,tr.prototype.event=function(n,t){this.init?(this.init=!1,this.value=t,this.sink.event(n,t)):this.equals(this.value,t)||(this.value=t,this.sink.event(n,t))},cr.prototype.run=function(n,t){var r=T(),e=new ar(this.min,this.max-this.min,n,r);return r.setDisposable(this.source.run(e,t)),r},ar.prototype.end=Ln.prototype.end,ar.prototype.error=Ln.prototype.error,ar.prototype.event=function(n,t){this.skip>0?this.skip-=1:0!==this.take&&(this.take-=1,this.sink.event(n,t),0===this.take&&(this.disposable.dispose(),this.sink.end(n,t)))},sr.prototype.run=function(n,t){var r=T(),e=new fr(this.p,n,r);return r.setDisposable(this.source.run(e,t)),r},fr.prototype.end=Ln.prototype.end,fr.prototype.error=Ln.prototype.error,fr.prototype.event=function(n,t){if(this.active){var r=this.p;this.active=r(t),this.active?this.sink.event(n,t):(this.disposable.dispose(),this.sink.end(n,t))}},hr.prototype.run=function(n,t){return this.source.run(new lr(this.p,n),t)},lr.prototype.end=Ln.prototype.end,lr.prototype.error=Ln.prototype.error,lr.prototype.event=function(n,t){if(this.skipping){var r=this.p;if(this.skipping=r(t),this.skipping)return}this.sink.event(n,t)},vr.prototype.run=function(n,t){return this.source.run(new pr(this.p,n),t)},pr.prototype.event=function(n,t){if(!this.skipping){var r=this.p;this.skipping=r(t),this.sink.event(n,t),this.skipping&&this.sink.end(n,t)}},pr.prototype.end=Ln.prototype.end,pr.prototype.error=Ln.prototype.error,gr.prototype.run=function(n,t){var r=new mr(-1/0,n),e=new br(this.maxSignal,n,t);return w([r,e,this.source.run(new wr(r,e,n),t)])},yr.prototype.run=function(n,t){var r=new Er(this.minSignal,n,t),e=new mr(1/0,n);return w([r,e,this.source.run(new wr(r,e,n),t)])},mr.prototype.error=Ln.prototype.error,mr.prototype.event=Tr,mr.prototype.end=Tr,mr.prototype.dispose=Tr,wr.prototype.event=function(n,t){n>=this.min.value&&n<this.max.value&&this.sink.event(n,t)},wr.prototype.error=Ln.prototype.error,wr.prototype.end=Ln.prototype.end,Er.prototype.event=function(n){n<this.value&&(this.value=n)},Er.prototype.end=Tr,Er.prototype.error=Ln.prototype.error,Er.prototype.dispose=function(){return this.disposable.dispose()},br.prototype.event=function(n,t){n<this.value&&(this.value=n,this.sink.end(n,t))},br.prototype.end=Tr,br.prototype.error=Ln.prototype.error,br.prototype.dispose=function(){return this.disposable.dispose()},xr.prototype.run=function(n,t){var r=new Ar(this.dt,n,t);return w([r,this.source.run(r,t)])},Ar.prototype.dispose=function(){var n=this;this.scheduler.cancelAll(function(t){return t.task.sink===n.sink})},Ar.prototype.event=function(n,t){this.scheduler.delay(this.dt,L.event(t,this.sink))},Ar.prototype.end=function(n,t){this.scheduler.delay(this.dt,L.end(t,this.sink))},Ar.prototype.error=Ln.prototype.error,Sr.prototype.run=function(n,t){return this.source.run(new Lr(n),t)},Lr.prototype.end=Ln.prototype.end,Lr.prototype.error=Ln.prototype.error,Lr.prototype.event=function(n,t){this.sink.event(n,{time:n,value:t})}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,Rr.prototype.run=function(n,t){return this.source.run(new kr(this.period,n),t)},kr.prototype.event=function(n,t){n>=this.time&&(this.time=n+this.period,this.sink.event(n,t))},kr.prototype.end=Ln.prototype.end,kr.prototype.error=Ln.prototype.error,Pr.prototype.run=function(n,t){return new Mr(this.dt,this.source,n,t)},Mr.prototype.event=function(n,t){this._clearTimer(),this.value=t,this.timer=this.scheduler.delay(this.dt,new Nr(this,t))},Mr.prototype._event=function(n,t){this._clearTimer(),this.sink.event(n,t)},Mr.prototype.end=function(n,t){this._clearTimer()&&(this.sink.event(n,this.value),this.value=void 0),this.sink.end(n,t)},Mr.prototype.error=function(n,t){this._clearTimer(),this.sink.error(n,t)},Mr.prototype.dispose=function(){return this._clearTimer(),this.disposable.dispose()},Mr.prototype._clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},Nr.prototype.run=function(n){this.debounce._event(n,this.value)},Nr.prototype.error=function(n,t){this.debounce.error(n,t)},Nr.prototype.dispose=function(){},Br.prototype.run=function(n,t){return this.source.run(new Ur(n,t),t)},Ur.prototype.event=function(n,t){var r=this;this.queue=this.queue.then(function(){return r._event(t)}).catch(this._errorBound)},Ur.prototype.end=function(n,t){var r=this;this.queue=this.queue.then(function(){return r._end(t)}).catch(this._errorBound)},Ur.prototype.error=function(n,t){var r=this;this.queue=this.queue.then(function(){return r._errorBound(t)}).catch(S)},Ur.prototype._event=function(n){return n.then(this._eventBound)},Ur.prototype._end=function(n){return Promise.resolve(n).then(this._endBound)},Fr.prototype.event=function(n,t){this.active&&this.sink.event(n,t)},Fr.prototype.end=function(n,t){this.active&&(this.disable(),this.sink.end(n,t))},Fr.prototype.error=function(n,t){this.disable(),this.sink.error(n,t)},Fr.prototype.disable=function(){return this.active=!1,this.sink}
/** @license MIT License (c) copyright 2010-2016 original author or authors */;var Or=function(n,t){return new i(new Hr(n,t.source))};function Yr(n){this.value=n}function Gr(n,t,r){r.error(n,t)}function Hr(n,t){this.f=n,this.source=t}function Wr(n,t,r,e){this.f=n,this.sink=new Fr(r),this.scheduler=e,this.disposable=t.run(this,e)}Yr.prototype.run=function(n,t){return t.asap(new L(Gr,this.value,n))},Hr.prototype.run=function(n,t){return new Wr(this.f,this.source,n,t)},Wr.prototype.event=function(n,t){j(n,t,this.sink)},Wr.prototype.end=function(n,t){z(n,t,this.sink)},Wr.prototype.error=function(n,t){var r=this.sink.disable();g(n,this.disposable,this.sink),this._startNext(n,t,r)},Wr.prototype._startNext=function(n,t,r){try{this.disposable=this._continue(this.f,t,r)}catch(t){r.error(n,t)}},Wr.prototype._continue=function(n,t,r){return n(t).source.run(r,this.scheduler)},Wr.prototype.dispose=function(){return this.disposable.dispose()};var Vr=function(n,t){this.source=n,this.sink=t,this.disposed=!1};function jr(n,t,r){try{r.event(n,t)}catch(t){r.error(n,t)}}function zr(n,t,r){try{r.end(n,t)}catch(t){r.error(n,t)}}Vr.prototype.dispose=function(){if(!this.disposed)return this.disposed=!0,0===this.source.remove(this.sink)&&this.source._dispose()};var qr=function(n){return n.dispose()},Xr={dispose:function(){}},Jr=function(n){this.source=n,this.sinks=[],this._disposable=Xr};Jr.prototype.run=function(n,t){return 1===this.add(n)&&(this._disposable=this.source.run(this,t)),new Vr(this,n)},Jr.prototype._dispose=function(){var n=this._disposable;return this._disposable=Xr,Promise.resolve(n).then(qr)},Jr.prototype.add=function(n){return this.sinks=function(n,t){for(var r=t.length,e=new Array(r+1),i=0;i<r;++i)e[i]=t[i];return e[r]=n,e}(n,this.sinks),this.sinks.length},Jr.prototype.remove=function(n){var t=f(n,this.sinks);return t>=0&&(this.sinks=s(t,this.sinks)),this.sinks.length},Jr.prototype.event=function(n,t){var r=this.sinks;if(1===r.length)return r[0].event(n,t);for(var e=0;e<r.length;++e)jr(n,t,r[e])},Jr.prototype.end=function(n,t){for(var r=this.sinks,e=0;e<r.length;++e)zr(n,t,r[e])},Jr.prototype.error=function(n,t){for(var r=this.sinks,e=0;e<r.length;++e)r[e].error(n,t)};var Kr=function(n){var t=n.source;return t instanceof Jr?n:new n.constructor(new Jr(t))};
/** @license MIT License (c) copyright 2010-2016 original author or authors */i.of=P,i.empty=C,i.from=K,i.prototype.subscribe=function(n){
/** @license MIT License (c) copyright 2010-2016 original author or authors */
return function(n,t){if(Object(n)!==n)throw new TypeError("subscriber must be an object");var r=T(),e=new ln(S,n,r);return r.setDisposable(t.source.run(e,hn)),new vn(r)}(n,this)},i.prototype[V.a]=function(){return this},i.prototype.thru=function(n){return function(n,t){return n(t)}(n,this)},i.prototype.observe=i.prototype.forEach=function(n){return Fn(n,this)},i.prototype.drain=function(){return On(this)},i.prototype.loop=function(n,t){return function(n,t,r){return new i(new Yn(n,t,r.source))}(n,t,this)},i.prototype.scan=function(n,t){return function(n,t,r){return new i(new Hn(n,t,r.source))}(n,t,this)},i.prototype.reduce=function(n,t){return Vn(n,t,this)},i.prototype.concat=function(n){return ut(this,n)},i.prototype.startWith=function(n){return function(n,t){return ut(P(n),t)}(n,this)},i.prototype.map=function(n){return Cn(n,this)},i.prototype.ap=function(n){return dt(this,n)},i.prototype.constant=function(n){return function(n,t){return Cn(function(){return n},t)}(n,this)},i.prototype.tap=function(n){return In(n,this)},i.prototype.transduce=function(n){return function(n,t){return new i(new _t(n,t.source))}(n,this)},i.prototype.chain=function(n){return Lt(n,this)},i.prototype.flatMap=i.prototype.chain,i.prototype.join=function(){return Dt(this)},i.prototype.continueWith=function(n){return et(n,this)},i.prototype.flatMapEnd=i.prototype.continueWith,i.prototype.concatMap=function(n){return Rt(n,this)},i.prototype.mergeConcurrently=function(n){return bt(n,this)},i.prototype.merge=function(){return Pt(function(n,t){var r=t.length,e=new Array(r+1);e[0]=n;for(var i=0;i<r;++i)e[i+1]=t[i];return e}(this,arguments))},i.prototype.combine=function(n){return ht(n,a(this,0,arguments))},i.prototype.sampleWith=function(n){return function(n,t){return new i(new Ut(h,n.source,[t.source]))}(n,this)},i.prototype.sample=function(n){return It(n,this,u(arguments))},i.prototype.zip=function(n){return Vt(n,a(this,0,arguments))},i.prototype.switchLatest=function(){return new i(new Jt(this.source))},i.prototype.switch=i.prototype.switchLatest,i.prototype.filter=function(n){return Qt(n,this)},i.prototype.skipRepeats=function(){return Zt(rr,this)},i.prototype.skipRepeatsWith=function(n){return Zt(n,this)},i.prototype.take=function(n){return er(n,this)},i.prototype.skip=function(n){return ir(n,this)},i.prototype.slice=function(n,t){return or(n,t,this)},i.prototype.takeWhile=function(n){return function(n,t){return new i(new sr(n,t.source))}(n,this)},i.prototype.skipWhile=function(n){return function(n,t){return new i(new hr(n,t.source))}(n,this)},i.prototype.skipAfter=function(n){return function(n,t){return new i(new vr(n,t.source))}(n,this)},i.prototype.until=function(n){return dr(n,this)},i.prototype.takeUntil=i.prototype.until,i.prototype.since=function(n){return _r(n,this)},i.prototype.skipUntil=i.prototype.since,i.prototype.during=function(n){return function(n,t){return dr(Dt(n),_r(n,t))}(n,this)},i.prototype.delay=function(n){return function(n,t){return n<=0?t:new i(new xr(n,t.source))}(n,this)},i.prototype.timestamp=function(){return new i(new Sr(this.source))},i.prototype.throttle=function(n){return function(n,t){return new i(Dr(n,t.source))}(n,this)},i.prototype.debounce=function(n){return function(n,t){return new i(new Pr(n,t.source))}(n,this)},i.prototype.awaitPromises=function(){return Ir(this)},i.prototype.await=i.prototype.awaitPromises,i.prototype.recoverWith=function(n){return Or(n,this)},i.prototype.flatMapError=i.prototype.recoverWith,i.prototype.multicast=function(){return Kr(this)};var $r=[0];function Qr(n){var t=[n,($r[0]+=1,$r[0])];return t.tag=248,t}var Zr=Qr("Exception-WonderLog.Check_fail"),ne=function(n){throw new Error(n)};function te(n){return console.warn(n),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.warn(n)}(n)}function re(n){return console.log(n),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.debug(n)}(n)}function ee(n){return console.error(n),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.error(n)}(n)}function ie(n){return console.trace(),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.trace(n)}(n),0}function oe(n){return JSON.stringify(n)}function ue(n){return te(String(n)+"")}function ce(n,t,r){return"\n  Debug:\n\n  description\n  "+String(n)+"\n\n  params\n  "+String(t)+"\n\n  "}function ae(n,t){return t?e.a(n,0):0}function se(n,t){return t?(re(e.a(n,0)),ie(se)):0}function fe(n,t,r){var e=JSON.stringify(t);return"\n  DebugJson:\n\n  description\n  "+String(n)+"\n\n  variable value\n  "+String(e)+"\n  "}function he(n,t){return t?(re(e.a(n,0)),ie(he)):0}function le(n,t,r,e,i){return"\n  Fatal:\n\n  title\n  "+String(n)+"\n\n  description\n  "+String(t)+"\n\n  reason\n  "+String(r)+"\n\n  solution\n  "+String(e)+"\n\n  params\n  "+String(i)+"\n\n   "}function ve(n){return e.a(ne,n)}function pe(n,t,r,e,i){return"\n  Error:\n\n  title\n  "+String(n)+"\n\n  description\n  "+String(t)+"\n\n  reason\n  "+String(r)+"\n\n  solution\n  "+String(e)+"\n\n  params\n  "+String(i)+"\n\n   "}function de(n){return ee(n),ie(de)}function _e(n,t){return"expect "+String(n)+", but actual "+String(t)}var ge=function(n){return"undefined"!=typeof window&&void 0!==window.fake_self_wonder?window.fake_self_wonder:self};function ye(n,t){return t.postMessage(n),0}var me=r(0);function we(n){return void 0!==n}function Ee(n){return void 0!==n}var be=[];function Te(n){if(void 0===n){var t=[be,0];return t.tag=256,t}if(null!==n&&n[0]===be){var r=n[1]+1|0,e=[be,r];return e.tag=256,e}return n}function xe(n){return null==n?void 0:Te(n)}function Ae(n){return void 0===n?void 0:Te(n)}function Se(n){if(null!==n&&n[0]===be){var t=n[1];return 0===t?void 0:[be,t-1|0]}return n}function Le(n,t,r){for(var e=t,i=0,o=r.length-1|0;i<=o;++i)e=n(e,r[i]);return e}function De(n){return null===n||void 0===n}function Re(n){return void 0===n}function ke(n){return void 0!==n}function Pe(n){return{}}function Me(n,t){return t[n]}function Ne(n,t){var r=t[n];return De(r)?void 0:Te(r)}var Ce=function(n){for(var t={},r=n;;){var e=r;if(!e)return t;var i=e[0];t[i[0]]=i[1],r=e[1]}};function Ie(n){return function(n){for(var t=Object.keys(n),r=t.length,e=new Array(r),i=0,o=r-1|0;i<=o;++i)e[i]=n[t[i]];return e}(n).filter(ke)}function Be(n,t,r){return r[n]=t,r}var Ue=Pe,Fe=Ne,Oe=Me,Ye=Ce,Ge=Ie;function He(n,t){var r=Oe(n,t);return[we(r),r]}function We(n,t){return n<t?-1:n===t?0:1}function Ve(n,t){return n===t?0:n<t?-1:1}var je=r(2);function ze(n,t){for(var r in n)t(r)}function qe(n,t){for(;;){var r=t,e=n;if(e===r)return 0;var i=typeof e,o=typeof r,u=0;switch(i){case"boolean":if("boolean"===o)return F=r,e?F?0:1:F?-1:0;u=1;break;case"function":if("function"===o)throw[je.e,"compare: functional value"];u=1;break;case"number":if("number"===o)return We(e,r);u=1;break;case"string":return"string"===o?Ve(e,r):1;case"undefined":return-1;default:u=1}if(1===u)switch(o){case"string":return-1;case"undefined":return 1;default:if("boolean"===i)return 1;if("boolean"===o)return-1;if("function"===i)return 1;if("function"===o)return-1;if("number"===i)return null===r||256===r.tag?1:-1;if("number"===o)return null===e||256===e.tag?-1:1;if(null===e)return 256===r.tag?1:-1;if(null===r)return 256===e.tag?-1:1;var c=0|e.tag,a=0|r.tag;if(250===c){n=e[0];continue}if(250===a){t=r[0];continue}if(256===c)return 256===a?We(e[1],r[1]):-1;if(248===c)return We(e[1],r[1]);if(251===c)throw[je.e,"equal: abstract value"];if(c!==a)return c<a?-1:1;var s=0|e.length,f=0|r.length;if(s===f){if(!Array.isArray(e)){var h=e,l=r,v=[void 0],p=[void 0],d=function(n,t){var r=n[2],e=n[1];if(!e.hasOwnProperty(t)||qe(n[0][t],e[t])>0){var i=r[0];return void 0!==i&&t>=i?0:(r[0]=t,0)}return 0},_=function(n){return function(t){return d(n,t)}}([h,l,p]),g=function(n){return function(t){return d(n,t)}}([l,h,v]);ze(h,_),ze(l,g);var y=v[0],m=p[0];return void 0!==y?void 0!==m?Ve(y,m):-1:void 0!==m?1:0}for(var w=e,E=r,b=0,T=s;;){var x=b;if(x===T)return 0;var A=qe(w[x],E[x]);if(0!==A)return A;b=x+1|0}}else if(s<f)for(var S=e,L=r,D=0,R=s;;){var k=D;if(k===R)return-1;var P=qe(S[k],L[k]);if(0!==P)return P;D=k+1|0}else for(var M=e,N=r,C=0,I=f;;){var B=C;if(B===I)return 1;var U=qe(M[B],N[B]);if(0!==U)return U;C=B+1|0}}}var F}function Xe(n,t){for(;;){var r=t,e=n;if(e===r)return!0;var i=typeof e;if("string"===i||"number"===i||"boolean"===i||"undefined"===i||null===e)return!1;var o=typeof r;if("function"===i||"function"===o)throw[je.e,"equal: functional value"];if("number"===o||"undefined"===o||null===r)return!1;var u=0|e.tag,c=0|r.tag;if(250!==u)if(250!==c){if(248===u)return e[1]===r[1];if(251===u)throw[je.e,"equal: abstract value"];if(u!==c)return!1;if(256===u)return e[1]===r[1];var a=0|e.length;if(a!==(0|r.length))return!1;if(!Array.isArray(e)){var s=e,f=r,h=[!0],l=function(n,t){return function(r){return n.hasOwnProperty(r)?0:(t[0]=!1,0)}}(f,h),v=function(n,t,r){return function(e){return n.hasOwnProperty(e)&&Xe(t[e],n[e])?0:(r[0]=!1,0)}}(s,f,h);return ze(s,l),h[0]&&ze(f,v),h[0]}for(var p=e,d=r,_=0,g=a;;){var y=_;if(y===g)return!0;if(!Xe(p[y],d[y]))return!1;_=y+1|0}}else t=r[0];else n=e[0]}}function Je(n,t){return!Xe(n,t)}function Ke(n,t){return qe(n,t)>=0}function $e(n,t){return qe(n,t)>0}function Qe(n,t){return qe(n,t)<0}function Ze(n){return void 0!==n}function ni(n){if(void 0!==n)return Se(n);throw new Error("getExn")}Qr("Caml_js_exceptions.Error");function ti(n,t){if(n)return 0;throw[Zr,t]}function ri(n,t){try{t()}catch(t){throw new Error(JSON.stringify(n))}}function ei(n,t){return t?e.a(n,0):0}function ii(n,t,r){return t?(e.a(n,r),r):r}function oi(n){return ti(!0===n,"expect to be true, but actual is false")}function ui(n){return ti(!1===n,"expect to be false, but actual is true")}var ci=function(n){return null!=n};function ai(n){return ti(e.a(ci,n),"expect exist, but actual not")}function si(n){return ti(Ze(n),"expect exist, but actual not")}function fi(n,t,r){return ti(Xe(t,r),function(n,t){return'"expect to be '+String(t)+", but actual is "+String(n)+'"'}(t,r))}function hi(n,t,r){return ti(Je(t,r),function(n,t){return'"expect not to be '+String(t)+", but actual is "+String(n)+'"'}(t,r))}function li(n,t,r){return ti($e(t,r),"expect "+String(t)+" > "+String(r)+", but actual isn't")}function vi(n,t,r){return ti(Ke(t,r),"expect "+String(t)+" >= "+String(r)+", but actual isn't")}function pi(n,t,r){return ti(Qe(t,r),"expect "+String(t)+" < "+String(r)+", but actual isn't")}function di(n,t,r){return ti(qe(t,r)<=0,"expect "+String(t)+" <= "+String(r)+", but actual isn't")}var _i=[function(n,t){return fi(0,n,t)},function(n,t){return fi(0,n,t)},function(n,t){return fi(0,n,t)},function(n,t){return hi(0,n,t)},function(n,t){return hi(0,n,t)},function(n,t){return li(0,n,t)},function(n,t){return li(0,n,t)},function(n,t){return vi(0,n,t)},function(n,t){return vi(0,n,t)},function(n,t){return pi(0,n,t)},function(n,t){return pi(0,n,t)},function(n,t){return di(0,n,t)},function(n,t){return di(0,n,t)}];var gi=[void 0,!1];function yi(n){return n[1]}function mi(n,t){for(var r=0,e=t.length-1|0;r<=e;++r)n(t[r]);return 0}function wi(n,t){for(var r=0,e=t.length-1|0;r<=e;++r)n(t[r],r);return 0}function Ei(n,t,r){for(var e=t,i=0,o=r.length-1|0;i<=o;++i)e=n(e,r[i],i);return e}var bi=Le;function Ti(n){var t=n.source;return!!t.event&&!!t.source}function xi(n){return 0!==n.length?bi(function(n,t){return Ti(n),n.concat(t)},me.b(n,0),n.slice(1)):P(1)}function Ai(n,t){return ei(function(n){var r=t.length;return ri(_e("stream count >= 2","is "+String(r)),function(n){return _i[7](r,2)}),ri("the first stream should be fromEvent stream",function(n){return ti(!0===Ti(me.b(t,0)),"expect to be true, but actual is false")}),ri("only the first stream should be fromEvent stream",function(n){return mi(function(n){return ti(!1===Ti(n),"expect to be false, but actual is true")},t.slice(1))})},yi(gi)),bi(function(t,r){return Rt(function(t){return e.b(r,t,n)},t)},e.b(me.b(t,0),void 0,n),t.slice(1))}function Si(n){return Cn(function(n){return e.a(n,0)},P(n))}function Li(n,t){for(var r=[],e=n;e<=t;++e)r.push(e);return r}function Di(n,t){return t.push(n),t}function Ri(n,t,r){return ii(function(r){var e=oe(n);return ri(_e("find "+String(t)+" in "+String(e),"not"),function(n){return ai(r)})},yi(gi),n.find(r))}function ki(n){return ei(function(t){return ri(_e("data exist(get by getExn)","not"),function(t){return si(n)})},yi(gi)),ni(n)}function Pi(n){return null===n||void 0===n}var Mi=ki,Ni=Xe;function Ci(n){return void 0!==n?Se(n):ve(le("throwJobFlagsShouldBeDefined","jobFlags should be defined","","",""))}var Ii=Ri;function Bi(n,t){var r=n[3],i=n[0];return bi(function(n,o){var u=o[0],c=function(n,t){return Ii(n,t,function(n){return Ni(n[0],t)})}(r,u),a=e.b(t,u,i);return Di(e.a(a,c[1]),n)},[],n[1])}function Ui(n,t,r,i){return function(n,t,r,e){var i=n[1];return bi(function(n,o){return Di(Ai(r,Bi([t,o,r,i],e)),n)},[],n[0])}([n,t],e.a(r[0],0),i,r[1])}var Fi=[void 0],Oi=r(3);r(8);var Yi=Math.imul||function(n,t){return((n>>16)*(t|=0)<<16)+(65535&n)*t|0};Qr("Pervasives.Exit");Oi.f,Oi.g,Oi.e;Oi.a,Oi.d,Oi.d;var Gi=Ye;var Hi=function(n){return parseInt(n,16)};function Wi(n){var t=n[0];return ei(function(n){return ri(_e("gl exist","not"),function(n){return si(t)})},yi(gi)),ki(t)}function Vi(n,t,r){var e=r[5];return void 0!==e&&e===t?r:1===1?(function(n,t){t?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST)}(n,t),[r[0],r[1],r[2],r[3],r[4],t,r[6],r[7],r[8]]):void 0}function ji(n,t){return n[0]=t,t}function zi(n){return ki(n[0])}function qi(n,t,r){return Si(function(n){return function(n){n.commit()}(Wi(zi(r)[4])),t})}function Xi(n){return[]}function Ji(n,t){return t[n]}function Ki(n,t){var r=t[n];return De(r)?void 0:Te(r)}function $i(n){return n.length}function Qi(n){return n.filter(ke)}function Zi(n,t,r){return Ei(function(t,r,e){return Re(r)?t:n(t,r,e)},t,r)}function no(n,t,r){return r[n]=t,r}function to(n,t){return t[n]=void 0,t}var ro=Xi,eo=Ji,io=Ki,oo=$i,uo=Qi,co=Zi;function ao(n){return n<<4}function so(n){return Yi(n,3)}function fo(n){return 0+Yi(n<<4,Float32Array.BYTES_PER_ELEMENT)|0}function ho(n){return n<<2}function lo(n){return fo(n)+Yi(Yi(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function vo(n){return Yi(n,3)}function po(n){return lo(n)+Yi(n<<2,Float32Array.BYTES_PER_ELEMENT)|0}function _o(n){return n<<4}function go(n,t){return[new Float32Array(n,0,ao(t)),new Float32Array(n,fo(t),so(t)),new Float32Array(n,lo(t),ho(t)),new Float32Array(n,po(t),vo(t))]}function yo(n,t){return t[n]}function mo(n,t){return t[n]}function wo(n,t){return t[n]}function Eo(n,t){return t[n]}function bo(n,t){return[t[n],t[n+1|0],t[n+2|0]]}function To(n,t,r){return ri(_e("not exceed bound","exceed"),function(i){return _i[9](n,e.a(r,t))})}function xo(n,t,r){return ei(function(t){return To(n,r,function(n){return n.length})},yi(gi)),r[n]=t,r}function Ao(n,t,r){return ei(function(t){return To(n,r,function(n){return n.length})},yi(gi)),r[n]=t,r}function So(n,t,r,e){return n[r]=t[e],0}function Lo(n,t,r,e){for(var i=t[0],o=n[0],u=n[1],c=t[1],a=r-1|0;c<=a;++c)e(o,i,u,c),u=u+1|0;return u}function Do(n,t,r){return Lo(n,t,r,So)}function Ro(n,t){return ve(le(n,"unknown browser","","","browser: "+String(t)))}var ko="\nprecision mediump float;\n\nattribute vec2 a_position;\nattribute vec3 a_color;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_projectionMat;\n\nvarying vec3 v_color;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  gl_Position = u_projectionMat * vec4(a_position, 0, 1);\n  v_color = a_color;\n  v_texCoord = a_texCoord;\n}\n    ",Po="\nprecision mediump float;\n\nvarying vec3 v_color;\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_sampler2D;\n\nvoid main() {\n  vec4 sample = texture2D(u_sampler2D, v_texCoord);\n\n  //gl_FragColor = vec4(v_color.xyz * sample.xyz, sample.x * vColor.a );\n  gl_FragColor = vec4(v_color * sample.xyz, sample.w);\n}\n    ";function Mo(n,t){return t.push(n),t}function No(n){return ei(function(t){return ri(_e("data exist(get by getExn)","not"),function(t){return si(n)})},!0),ni(n)}function Co(n){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Io(n,t,r){return n.shaderSource(r,t),n.compileShader(r),ae(function(e){if(!1===n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r),o=String(i)+"";se(function(n){return ce("shader info log",o)},!0);var u=String(t)+"";return se(function(n){return ce("glsl source",u)},!0)}return 0},!0),r}function Bo(n,t,r,e){var i=Io(r,n,r.createShader(r.VERTEX_SHADER)),o=Io(r,t,r.createShader(r.FRAGMENT_SHADER));return r.attachShader(e,i),r.attachShader(e,o),r.bindAttribLocation(e,0,"a_position"),function(n,t){t.linkProgram(n),ae(function(r){if(!1===t.getProgramParameter(n,t.LINK_STATUS)){var e=t.getProgramInfoLog(n);return ve(le("link program error",String(e)+"","","",""))}return 0},!0)}(e,r),r.deleteShader(i),r.deleteShader(o),e}function Uo(n){return No(n[3])}function Fo(n){return n[0]}function Oo(n){return n[7]}function Yo(n){return n[6][0]}function Go(n){return n[4][0]}function Ho(n){return n[4][1]}function Wo(n,t){return Yi(n,1e3)+t|0}function Vo(n){var t=n[1];return Fe(t[0],t[2])}function jo(n){var t=n[1];return Fe(t[1],t[3])}function zo(n){return Ze(jo(n))}function qo(n,t,r){var e=n.RGB,i=n.RGBA,o=n.TEXTURE_2D;return bi(function(t,r){var u;switch(r[2]){case 0:u=e;break;case 1:u=i;break;case 2:u=ve(le("createCustomTextures","unknown image type. type should be jpg or png.","","",""))}var c=n.createTexture();return n.bindTexture(o,c),n.texParameteri(o,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texImage2D(o,0,u,u,n.UNSIGNED_BYTE,r[0]),Be(r[1],c,t)},r,t)}function Xo(n,t){return Oe(n,t[1][5])}function Jo(n,t){return bi(function(n,t){return Mo(t,n)},t,n)}function Ko(n){return[].concat.apply([],n)}function $o(n){return n.length/2|0}function Qo(n,t){var r=n[2];return t.bindBuffer(t.ARRAY_BUFFER,n[0]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n[1]),t.DYNAMIC_DRAW),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,n[3],t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t}function Zo(n,t,r){var e=Uo(r),i=bi(function(n,t){var r=t[5],e=n[5],i=n[4],o=n[3],u=n[2],c=n[1],a=n[0],s=r.length;if(0!==s){var f=c+(s<<1)|0;return[Mo([t[0],t[1],s,c],a),f,u.concat(t[2]),o.concat(t[3]),i.concat(t[4]),e.concat(r)]}return[a,0,u,o,i,e]},[[],0,[],[],[],[]],t);return function(n,t,r){r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),r.DYNAMIC_DRAW)}(e[4],i[5],Qo([e[3],i[4],e[8],2],Qo([e[2],i[3],e[7],3],Qo([e[1],i[2],e[6],2],n)))),[r,i[0]]}function nu(n,t,r,e,i){return[Mo(t,Mo(n,e[0])),Jo(r,e[1]),Jo(i,e[2])]}function tu(n,t){var r=t[8][0];return r[0][r[1]]=n,[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],[[r[0],r[1]+1|0]]]}function ru(n){var t=n[8][0];return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],[[t[0],t[1]-1|0]]]}function eu(n,t){var r=function(n){var t=n[8][0];if(!(t[1]<=0))return bi(function(n,t){var r=n[1],e=n[0],i=e[t];return[e,[r[0]+i[0]|0,r[1]+i[1]|0]]},[t[0],[0,0]],function(n,t){for(var r=[],e=n;e<=t;++e)r.push(e);return r}(0,t[1]-1|0))[1]}(t);if(void 0!==r){var e=r;return[n[0]+e[0]|0,n[1]+e[1]|0,n[2],n[3]]}return n}function iu(n){return[n[0],n[1],n[2],n[3]]}function ou(n){return[n[0],n[1]]}function uu(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0],c=Fo(r)[1],a=Go(r),s=a[2],f=$o(s),h=r[4],l=r[4][0];return[r[0],r[1],r[2],r[3],[[l[0],l[1],Jo([u,o,u,o+e,u+i,o,u+i,o+e],s),Jo(Ko([t,t,t,t]),a[3]),Jo(Ko([c,c,c,c]),a[4]),Jo([f,f+1|0,f+2|0,f+3|0,f+2|0,f+1|0],a[5])],h[1]],r[5],r[6],r[7],r[8]]}function cu(n,t,r){var e=io(Wo(t,r),n[5]);return void 0!==e?e:0}function au(n,t){var r=n[4];return io(t,r)}function su(n,t,r){au(t,r);var e=au(t,r);return void 0!==e?e:r==="\t".charCodeAt(0)?n[1]:r===" ".charCodeAt(0)?n[0]:void 0}function fu(n,t){var r,e=au(n," ".charCodeAt(0));if(void 0!==e)r=e;else{var i=function(n){return bi(function(t,r){return void 0!==t?t:au(n,r.charCodeAt(0))},void 0,["m","w"])}(n);r=void 0!==i?i:function(n){return uo(n[4])[0]}(n)}return[r,["\t".charCodeAt(0),[0,0,0,0],0,0,Yi(t,r[4])]]}function hu(n){return oo(n[4])>0}function lu(n,t,r,i,o,u,c,a,s){if(!e.a(c,n))return[i,i,0];for(var f=0,h=0,l=0,v=void 0,p=!1,d=i,_=Math.min(t.length,o)-1|0;d<=_;++d){if(!p){var g=t.charCodeAt(d),y=e.b(a,n,g);if(void 0!==y){var m=y,w=m[1],E=v,b=((f=f+(void 0!==E?e.c(s,n,E[0],m[0]):0)|0)+m[4]|0)+r|0,T=f+w[2]|0;if(T>u||b>u)0===l&&(l=1,h=T),p=!0;f=b,h=T,v=m}l=l+1|0}}return void 0!==v&&(h=h+v[2]|0),[i,i+l|0,h]}function vu(n,t,r,e){var i=n.indexOf(t,r);return-1===i||i>e?e:i}function pu(n){return/\s/.test(n)}function du(n,t,r,e){return function(n,t,r,e,i,o,u,c,a){for(var s=[],f=o;e<i&&e<t.length;){let o=vu(t,"\n",e,i);for(;e<o&&pu(t.charAt(e));)e++;let h=lu(n,t,r,e,o,f,u,c,a),l=e+(h[1]-h[0]),v=l+"\n".length;if(l<o){for(;l>e&&!pu(t.charAt(l));)l--;if(l===e)v>e+"\n".length&&v--,l=v;else for(v=l;l>e&&pu(t.charAt(l-"\n".length));)l--}l>=e&&s.push(lu(n,t,r,e,l,f,u,c,a)),e=v}return s}(n,t,r[0],r[2],r[3],r[1],hu,function(n,t){return su(e,n,t)},cu)}function _u(n,t,r){return(n-Yi(r.length,t)|0)/2|0}function gu(n,t,r,e){var i=r[0],o=r[1][1],u=o[3],c=o[2],a=i[0]+n,s=i[1]+t;return Jo([a,s,a,s+u,a+c,s,a+c,s+u],e)}function yu(n,t,r,e){var i=n[1][1],o=i[1],u=i[0],c=u/t,a=o/r,s=(u+i[2]|0)/t,f=(o+i[3]|0)/r;return Jo([c,a,c,f,s,a,s,f],e)}function mu(n,t){return Jo([n,n+1|0,n+2|0,n+3|0,n+2|0,n+1|0],t)}function wu(n,t,r,e){var i=n[1],o=n[0],u=Fo(e)[0],c=Ko([u,u,u,u]),a=Vo(e);if(void 0!==a){var s=a,f=function(n,t,r,e){var i=t[4],o=t[3],u=t[0],c=fu(r,t[2]),a=du(r,n,[o,u,0,n.length],c),s=r[0],f=bi(function(n,t){return Math.max(n,t[2],u)},0,a);return Ei(function(t,e,u){for(var a=e[2],h=t[0],l=void 0,v=t[1],p=t[2],d=e[0],_=e[1]-1|0;d<=_;++d){var g=n.charCodeAt(d),y=su(c,r,g);if(void 0!==y){var m,w,E=y;switch(m=void 0!==l?v=v+cu(r,l[0],E[0])|0:v,i){case 0:w=m;break;case 1:w=m+((f-a|0)/2|0)|0;break;case 2:w=m+(f-a|0)|0}Mo([[w+E[2]|0,p+E[3]|0],E,d,u],h),v=(v+E[4]|0)+o|0,l=E}}return[h,0,p+s|0,l]},[[],0,_u(t[1],s,a),void 0],a)[0]}(t,[n[2],n[3],4,0,r],s),h=Go(e),l=bi(function(n,t){var r=n[0],e=$o(r);return[gu(o,i,t,r),Jo(c,n[1]),yu(t,s[2],s[3],n[2]),mu(e,n[3])]},[h[2],h[3],h[4],h[5]],f),v=e[4],p=e[4][0];return[e[0],e[1],e[2],e[3],[[p[0],p[1],l[0],l[1],l[2],l[3]],v[1]],e[5],e[6],e[7],e[8]]}return ve(le("getLayoutData","impossible to create font: not find fnt file","","",""))}function Eu(n,t,r,e){var i=t[3],o=t[2],u=t[1],c=t[0],a=n[3],s=n[2],f=n[1],h=n[0],l=function(n,t){var r=Fe(n,Ho(t));return void 0!==r?r:[1,Te(Xo(n,t)),[],[],[],[]]}(r,e),v=l[2],p=$o(v),d=[l[0],l[1],Jo([h,f,h,f+a,h+s,f,h+s,f+a],v),Jo([1,1,1,1,1,1,1,1,1,1,1,1],l[3]),Jo([c,u,c,i,o,u,o,i],l[4]),Jo([p,p+1|0,p+2|0,p+3|0,p+2|0,p+1|0],l[5])],_=e[4];return[e[0],e[1],e[2],e[3],[_[0],Be(r,d,e[4][1])],e[5],e[6],e[7],e[8]]}function bu(n,t){var r=n[0],e=n[1],i=t[1],o=t[0],u=r+n[2],c=e+n[3];return r<=o&&o<=u&&e<=i&&i<=c}function Tu(n){var t=Oo(n);return!!t[1]&&t[0]}function xu(n,t,r,e){var i,o,u,c=r[0],a=t[0];if(n[0]){var s=a+t[2],f=(i=n[1][0],u=s,Qe(i,o=a)?o:$e(i,u)?u:i),h=(r[1]-c)*((f-a)/(s-a))+c;return r[2]?Math.round(h):h}return function(n,t,r){var e=io(n,r[6][2][1]);return void 0!==e?e:t}(n[2],n[3],e)}function Au(n,t,r,e){var i=t[3],o=t[2],u=t[1],c=t[0],a=n[0],s=a[3],f=a[2],h=a[1],l=a[0],v=Fo(e)[5],p=v[3],d=v[2],_=Oo(e),g=_[2],y=bu(a,ou(g))?_[1]?[!0,d,p]:[!1,d,p]:[!1,v[0],v[1]],m=y[0],w=e[6][2][0],E=xu([m,g,w,r[0]],a,[c,u,o,i],e),b=(E-c)/(u-c),T=E.toFixed(o?0:i),x=uu(a,y[1],e),A=wu(a,T,1,uu([l,h,f*b,s],y[2],x));return[function(n){var t=n[6],r=n[6][2];return[n[0],n[1],n[2],n[3],n[4],n[5],[t[0],t[1],[n[6][2][0]+1|0,r[1]]],n[7],n[8]]}(function(n,t,r){return no(n,t,r[6][2][1]),r}(w,E,wu([l+f,h,n[1],s],r[1],0,A))),m,E]}function Su(n,t,r,e){var i=n[3],o=n[1],u=n[0],c=Fo(e)[4],a=c[3],s=c[2],f=Oo(e),h=i*c[4],l=i*c[5],v=[u,o,l,l],p=e[6][1][0],d=function(n,t,r){var e=io(n,r[6][1][1]);return void 0!==e?e:t}(p,t,e),_=bu(v,ou(f[2])),g=_&&Tu(e)?!d:d,y=g||_?[a,s]:[c[1],c[0]],m=function(n,t,r){return no(n,t,r[6][1][1]),r}(p,g,e),w=uu(v,y[1],m),E=g?uu([Math.round(.5*(u+(u+l)-h)),Math.round(.5*(o+(o+l)-h)),h,h],y[0],w):w;return[function(n){var t=n[6],r=n[6][1];return[n[0],n[1],n[2],n[3],n[4],n[5],[t[0],[n[6][1][0]+1|0,r[1]],t[2]],n[7],n[8]]}(wu([u+l,o,n[2]-l,i],r,1,E)),g]}function Lu(n,t,r,e){var i=n[2],o=Fo(e)[1],u=n[0]+.5*i,c=n[1]+.5*n[3],a=i/2,s=Go(e),f=s[2],h=$o(f),l=nu(u,c,t,[f,s[3],s[4]],o),v=function(n,t,r,e){for(;;){var i=e,o=n,u=r,c=t,a=i[3],s=i[2],f=i[1],h=i[0],l=o[7],v=o[6],p=o[5],d=o[4],_=o[3],g=o[2],y=o[1],m=o[0];if(!(c<=l))return[h,f,s,a];var w=nu(m+p*Math.cos(c),y+p*Math.sin(c),g,[h,f,s],_),E=0!==c?Mo(d,Mo(u-1|0,Mo(u+0|0,a))):a;e=[w[0],w[1],w[2],E],r=u+1|0,t=c+v,n=[m,y,g,_,d,p,v,l]}}([u,c,t,o,h+0|0,a,2*Math.PI/r,2*Math.PI+.1],0,h+1|0,[l[0],l[1],l[2],s[5]]),p=e[4],d=e[4][0];return[e[0],e[1],e[2],e[3],[[d[0],d[1],v[0],v[1],v[2],v[3]],p[1]],e[5],e[6],e[7],e[8]]}function Du(n,t,r,e){var i=Fo(e)[3],o=i[6],u=i[5],c=Oo(e)[2],a=function(n,t,r){var e=Fe(t,Yo(r)[0]);return void 0!==e?e:n}(n,r,e),s=Ei(function(n,t,r){var i=n[2],a=n[1],s=iu(eu(t[0],e)),f=s[3],h=s[1],l=s[0],v=f/2*u,p=f/2*o,d=2*v,_=2*v,g=2*p,y=2*p,m=[l,h,d,_],w=[l,h,g,y],E=function(n,t){var r=n[2],e=n[0]+.5*r,i=n[1]+.5*n[3],o=r/2;return Math.sqrt(Math.pow(t[0]-e,2)+Math.pow(t[1]-i,2))<=o}(w,ou(c)),b=E&&Tu(e);return[Mo([l,h,s[2],f,t[1],v,p,d,_,g,y,m,w],n[0]),void 0!==a?a:b?r:void 0,void 0!==i?i:E?r:void 0]},[[],void 0,void 0],t),f=s[1];return[s[0],void 0!==f?f:a,s[2]]}function Ru(n,t,r,e){return wu(iu(eu(n,e)),t,r,e)}function ku(n,t,r,e){return Eu(iu(eu(n,e)),t,r,e)}function Pu(n,t,r){return function(n,t,r){var e,i=Fo(r)[2],o=i[2],u=Oo(r);return e=bu(n,ou(u[2]))?Tu(r)?[!0,o]:u[1]?[!1,o]:[!1,i[1]]:[!1,i[0]],[wu(n,t,1,uu(n,e[1],r)),e[0]]}(iu(eu(n,r)),t,r)}function Mu(n,t,r){return uu(iu(eu(n,r)),t,r)}var Nu=function(n,t,r,e){ei(function(r){return ri(_e("defaultSelectIndex < radioButton count","not"),function(r){return _i[9](t,n.length)})},!0);var i=Fo(e)[3],o=i[4],u=i[3],c=i[2],a=i[1],s=i[0],f=Du(t,n,r,e),h=f[2],l=f[1];return Be(r,l,Yo(e)[0]),[Ei(function(n,t,r){var e,i=t[9],f=t[5],v=t[1],p=t[0],d=l===r;e=d?[u,c]:void 0!==h&&h===r?[u,c]:[a,s];var _=Lu(t[12],e[1],o,n),g=d?Lu([Math.round(.5*(p+(p+i)-2*f)),Math.round(.5*(v+(v+t[10])-2*f)),t[7],t[8]],e[0],o,_):_;return wu([p+i,v,t[2]-i,t[3]],t[4],1,g)},e,f[0]),l]};function Cu(n,t,r,e){return Su(iu(eu(n,e)),t,r,e)}function Iu(n,t,r,e){return function(n,t,r,e){var i=Au([n[0],n[1]],[t[0],t[1],!0,0],[r[0],r[1]],e);return[i[0],i[1],i[2]]}([iu(eu(n[0],e)),n[1]],[t[0],t[1]],[r[0],r[1]],e)}function Bu(n,t,r,e){return function(n,t,r,e){return Au([n[0],n[1]],[t[0],t[1],!1,t[2]],[r[0],r[1]],e)}([iu(eu(n[0],e)),n[1]],[t[0],t[1],t[2]],[r[0],r[1]],e)}function Uu(n){var t=n.createBuffer();return n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,new Float32Array([]),n.DYNAMIC_DRAW),t}function Fu(n){return t=0,r=n[0],e=n[1],i=0,o=-1,u=1,c=Co(),a=1/(t-r),s=1/(e-i),f=1/(o-u),c[0]=-2*a,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*s,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*f,c[11]=0,c[12]=(t+r)*a,c[13]=(i+e)*s,c[14]=(u+o)*f,c[15]=1,c;var t,r,e,i,o,u,c,a,s,f}function Ou(n,t,r){return n.useProgram(t),function(n,t,r){n.uniformMatrix4fv(n.getUniformLocation(t,"u_projectionMat"),!1,Fu(r))}(n,t,r),n.uniform1i(n.getUniformLocation(t,"u_sampler2D"),0),0}function Yu(n){return[[0,void 0,[],[],[],[]],Ue(0)]}function Gu(n,t,r){var i=e.a(t[0],r);!function(n){var t=n.getExtension("OES_vertex_array_object");null==t||t.bindVertexArrayOES(null)}(n);var o=function(n){var t=Go(n),r=Ho(n);return[n,Ko([[t],bi(function(n,t){var r=$o(n[0])+n[1]|0;return[t[2],r,Mo([t[0],t[1],t[2],t[3],t[4],t[5].map(function(n){return n+r|0})],n[2])]},[t[2],0,[]],Ge(r))[2]])]}(function(n,t){var r=Uo(t);return[t[0],t[1],t[2],[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],[xe(n.getParameter(n.CURRENT_PROGRAM)),n.getParameter(n.ELEMENT_ARRAY_BUFFER_BINDING),n.getParameter(n.ARRAY_BUFFER_BINDING),xe(n.getParameter(n.TEXTURE_BINDING_2D)),n.isEnabled(n.DEPTH_TEST),n.isEnabled(n.BLEND)]],t[4],t[5],t[6],t[7],t[8]]}(n,i)),u=Zo(n,o[1],o[0]),c=u[0],a=Uo(c);return n.useProgram(a[0]),function(n){n.disable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}(n),e.b(t[1],function(n,t){var r=No(Uo(t)[9]),e=r[3],i=r[0];return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r[1]),n.bindBuffer(n.ARRAY_BUFFER,r[2]),void 0!==i&&n.useProgram(Se(i)),void 0!==e&&n.bindTexture(n.TEXTURE_2D,Se(e)),r[4]?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),r[5]?n.enable(n.BLEND):n.disable(n.BLEND),t}(n,function(n,t,r){var e=Uo(r)[5];return mi(function(t){var r=t[0]?No(t[1]):e;return n.bindTexture(n.TEXTURE_2D,r),n.drawElements(n.TRIANGLES,t[2],n.UNSIGNED_SHORT,t[3]),0},t),r}(n,u[1],c)),r)}function Hu(n){return n[5][0]}function Wu(n,t,r,i,o){var u=i[1],c=i[0];return!zo(e.a(c,o))?o:Gu(n,[c,u],function(n,t,r){var i=e.a(t,r),o=Hu(i);return void 0!==o?Se(o)(No(i[5][1]),n,r):r}(r,c,function(n,t,r){var i=e.a(t[0],r),o=i[6],u=i[6][1],c=i[6][2];return e.b(t[1],[i[0],i[1],i[2],i[3],Yu(),i[5],[o[0],[0,u[1]],[0,c[1]]],n,i[8]],r)}(t,[c,u],o)))}function Vu(n){return[[[1,1,1],[0,0],[[.35,.1,.1],[.4,.1,.1],[.5,.1,.1]],[[.3,.3,.3],[.15,.15,.15],[.33,.33,.33],[.18,.18,.18],9,.6,1],[[.3,.3,.3],[.15,.15,.15],[.33,.33,.33],[.18,.18,.18],1.4,2],[[.16,.16,.16],[0,.3,.6],[.19,.19,.19],[0,.3,.7]]],["fnt","bitmap",Ue(0),Ue(0),[],Ue(0)],void 0,void 0,Yu(),[void 0,void 0,{label:Ru,image:ku,button:Pu,box:Mu,radioButton:Nu,checkbox:Cu,sliderInt:Iu,sliderFloat:Bu,beginGroup:tu,endGroup:ru}],[[Ue(0)],[0,ro(0)],[0,ro(0)]],[!1,!1,[0,0],[0,0]],[[[],0]]]}function ju(n){return ki(n).data}function zu(n,t,r){return Si(function(n){var e,i=zi(r),o=ju(t),u=(e=function(n){return{alpha:n[0],depth:n[1],stencil:n[2],antialias:n[3],premultipliedAlpha:n[4],preserveDrawingBuffer:n[5]}}(o.contextConfig),o.canvas.getContext("webgl",e));return i[4]=function(n,t){return[Te(n),t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}(u,i[4]),ji(r,i),t})}function qu(n,t){var r;switch(n){case"element_index_uint":r=function(n){return null!=n.getExtension("OES_element_index_uint")||(ve(le("_getExtension","not support OES_element_index_uint extension","","","")),!1)}(t);break;case"instanced_arrays":r=t.getExtension("ANGLE_instanced_arrays");break;default:r=t.getExtension(n)}return null==r?void 0:Te(r)}function Xu(n,t,r){return function(n,t){var r=n.VERTEX_SHADER,e=n.FRAGMENT_SHADER,i=n.HIGH_FLOAT,o=n.MEDIUM_FLOAT,u=n.getShaderPrecisionFormat(r,i),c=n.getShaderPrecisionFormat(r,o),a=n.getShaderPrecisionFormat(e,i),s=n.getShaderPrecisionFormat(e,o),f=u.precision>0&&a.precision>0,h=c.precision>0&&s.precision>0;return f?[t[0],t[1],0,t[3]]:h?(ue("not support highp, using mediump instead"),[t[0],t[1],1,t[3]]):(ue("not support highp and mediump, using lowp instead"),[t[0],t[1],2,t[3]])}(n,function(n,t,r){return ii(function(n){var r=ki(n[3]);return ri(_e("maxTextureUnit:"+String(r)+" >= textureCountPerMaterial:"+String(t),"not"),function(n){return _i[7](r,t)})},yi(gi),[r[0],r[1],r[2],n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)])}(n,t,r))}function Ju(n,t,r){return Xu(n,t,function(n,t){return[qu("instanced_arrays",n),qu("element_index_uint",n),t[2],t[3]]}(n,r))}var Ku=Ze;function $u(n,t,r){return Si(function(n){var e=zi(r),i=ju(t);return e[3]=Ju(Wi(e[4]),i.bufferData.textureCountPerMaterial,e[3]),ji(r,e),t})}function Qu(n,t,r){return[t[0]-r[0],t[1]-r[1],t[2]-r[2]]}function Zu(n,t){var r=t[2],e=t[1],i=t[0],o=n[2],u=n[1],c=n[0];return[u*r-e*o,o*i-r*c,c*e-i*u]}function nc(n,t){var r=n[0],e=n[1],i=n[2],o=n[4],u=n[5],c=n[6],a=n[8],s=n[9],f=n[10],h=f*u-c*s,l=-f*e+i*s,v=c*e-i*u,p=-f*o+c*a,d=f*r-i*a,_=-c*r+i*o,g=s*o-u*a,y=-s*r+e*a,m=u*r-e*o,w=r*h+e*p+i*g;return 0!==w?(w=1/w,t[0]=h*w,t[1]=l*w,t[2]=v*w,t[3]=p*w,t[4]=d*w,t[5]=_*w,t[6]=g*w,t[7]=y*w,t[8]=m*w,t):new Float32Array([0,0,0,0,0,0,0,0,0])}var tc=function(n,t){var r=t[1];return Be(r[0],n,r[2]),t},rc=function(n,t){var r=t[1];return Be(r[1],n,r[3]),t},ec=function(n,t){var r=t[1];return[t[0],[r[0],r[1],r[2],r[3],n,r[5]],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]};var ic=Vu,oc=function(n,t,r){if(!zo(r))return r;var e=Bo(ko,Po,n,n.createProgram()),i=Uu(n),o=Uu(n),u=Uu(n),c=function(n){var t=n.createBuffer();return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array([]),n.DYNAMIC_DRAW),t}(n),a=function(n,t){var r=n.createTexture(),e=n.TEXTURE_2D;n.bindTexture(e,r),n.texParameteri(e,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(e,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(e,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(e,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var i=n.RGBA;return n.texImage2D(e,0,i,i,n.UNSIGNED_BYTE,t),r}(n,function(n){return No(jo(n))}(r));Ou(n,e,t);var s=r[1],f=r[1];return[r[0],[f[0],f[1],f[2],f[3],f[4],qo(n,s[4],s[5])],r[2],[e,i,o,u,c,a,n.getAttribLocation(e,"a_position"),n.getAttribLocation(e,"a_color"),n.getAttribLocation(e,"a_texCoord"),void 0],r[4],r[5],r[6],r[7],r[8]]},uc=function(n,t,r){var e=r[5];return function(n){return[n[0],n[1],n[2],n[3],n[4],n[5],[[Ue(0)],[0,ro(0)],[0,ro(0)]],n[7],[[[],0]]]}([r[0],r[1],r[2],r[3],r[4],[Te(t),Te(n),e[2]],r[6],r[7],r[8]])};function cc(n){return ki(n[26])}function ac(n,t,r){var i=new ImageData(new Uint8ClampedArray(n[0]),n[1],n[2]),o=cc(r)[0];return 1!==o?0!==o?Ro("_createImageBitmap",o):function(n,t){return createImageBitmap(n,t)}(i,{imageOrientation:!0===e.a(t,r)?"flipY":"none"}):function(n){return createImageBitmap(n)}(i)}function sc(n){return n[27]}function fc(n){return!1}function hc(n,t,r){var e=ju(t).imguiData;if(Pi(e.fntData)||Pi(e.bitmapImageData))return P(t);var i=zi(r);return Cn(function(n){return t},Cr(ac(Mi(e.bitmapImageData),fc,i).then(function(n){var t,i,o,u,c,a,s,f,h,l,v=zi(r),p=tc(JSON.parse(Mi(e.fntData)),(t=JSON.parse(e.setting),i=rc(n,sc(v)),o=t.buttonSetting,u=t.radioButtonSetting,c=t.checkboxSetting,a=t.sliderSetting,s=[o.buttonColor,o.hoverButtonColor,o.clickButtonColor],f=[u.radioButtonOuterColor,u.radioButtonInnerColor,u.radioButtonOuterColorHover,u.radioButtonInnerColorHover,u.radioButtonCircleSegments,u.radioButtonInnerRadius,u.radioButtonOuterRadius],h=[c.checkboxOuterColor,c.checkboxInnerColor,c.checkboxOuterColorHover,c.checkboxInnerColorHover,c.checkboxInnerSizeRatio,c.checkboxOuterSizeRatio],l=[a.sliderBackgroundColor,a.sliderFillColor,a.sliderBackgroundColorHover,a.sliderFillColorHover],function(n,t){return[n,t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}([t.textColor,t.fontTexUvForWhite,s,f,h,l],i)));return v[27]=p,Promise.resolve(ji(r,v))})).concat(Cr(Vn(function(n,t){return Di(t,n)},[],Pt(e.customTextureSourceDataArr.map(function(n){var t=n[2],r=n[1];return Cr(ac(n[0],fc,i).then(function(n){return Promise.resolve([n,r,t])}))}))).then(function(n){var t=zi(r);return t[27]=oc(Wi(t[4]),[e.canvasWidth,e.canvasHeight],ec(n,t[27])),Promise.resolve(ji(r,t))}))))}function lc(n,t,r){return Si(function(n){var e,i,o,u,c,a=zi(r);return a[4]=Vi(Wi(e=a[4]),!0,(i=Wi(e),o=2,void 0!==(c=(u=e)[4])&&c===o?u:(function(n,t){switch(t){case 0:return n.enable(n.CULL_FACE),n.cullFace(n.FRONT_AND_BACK),0;case 1:return n.disable(n.CULL_FACE),0;case 2:return n.enable(n.CULL_FACE),n.cullFace(n.BACK),0;case 3:n.enable(n.CULL_FACE),n.cullFace(n.FRONT)}}(i,o),[u[0],u[1],u[2],u[3],o,u[5],u[6],u[7],u[8]]))),ji(r,a),t})}function vc(n){return Ci(n)[0]}var pc=2147483647,dc=-2147483648;function _c(n){return n>pc?pc:n<dc?dc:Math.floor(n)}var gc=_c,yc=/^\#([0-9a-f]{6})$/i;function mc(n){return ve(le("convert16HexToRGBA","color should be #xxxxxx, but actual is "+String(n),"","",""))}function wc(n,t){return function(n,t,r){var e=r[3],i=t[3],o=t[2],u=t[1],c=t[0],a=0;if(void 0!==e){var s=e;if(s[0]===c&&s[1]===u&&s[2]===o&&s[3]===i)return r;a=1}else a=1;if(1===a)return n.clearColor(c,u,o,i),[r[0],r[1],r[2],[c,u,o,i],r[4],r[5],r[6],r[7],r[8]]}(Wi(t),function(n){var t=yc.exec(n);if(null!==t){var r=me.b(t,1);if(null==r)return mc(n);var i=gc(e.a(Hi,r));return[(i>>>16&255)/255,(i>>>8&255)/255,(255&i)/255,1]}return mc(n)}(vc(n)),t)}function Ec(n,t,r){return Si(function(e){var i=zi(r);return i[4]=wc(n,i[4]),ji(r,i),t})}function bc(n,t){var r=t.pop();return void 0!==r?r:n.createBuffer()}function Tc(n,t){return bc(n,t[6])}function xc(n,t,r){var e=io(n,t);return void 0!==e?Di(Se(e),r):r}function Ac(n,t){return[t[0],t[1],t[2],t[3],t[4],xc(n,t[2],xc(n,t[1],xc(n,t[0],t[5]))),xc(n,t[3],t[6]),t[7]]}function Sc(n,t){var r=io(n,t[4]);return void 0!==r?[t[0],t[1],t[2],t[3],t[4],t[5],t[6],Di(Se(r),t[7])]:t}var Lc=to;function Dc(n,t){return[Lc(n,t[0]),Lc(n,t[1]),Lc(n,t[2]),Lc(n,t[3]),t[4],t[5],t[6],t[7]]}function Rc(n,t){return[t[0],t[1],t[2],t[3],Lc(n,t[4]),t[5],t[6],t[7]]}function kc(n,t,r){var e=t[1],i=t[0];return bi(function(n,t){return e(t,i(t,n))},r,n)}function Pc(n,t){return kc(n,[Ac,Dc],t)}function Mc(n,t,r){return Si(function(n){var e,i,o=zi(r),u=ju(t);return o[23]=(e=u.sourceInstanceNeedDisposeVboBufferArr,i=Pc(u.geometryNeedDisposeVboBufferArr,o[23]),kc(e,[Sc,Rc],i)),ji(r,o),t})}function Nc(n,t){var r=eo(n,t);return[we(r),r]}function Cc(n,t,r){var e=Nc(n,r);if(e[0])return e[1];var i,o=(i=t,function(n,t){return t.subarray(n,n+16|0)}(_o(n),i));return no(n,o,r),o}function Ic(n,t,r,e){var i=r[1],o=Nc(n,i);if(o[0])return o[1];var u,c,a=(c=(u=e)[2].pop(),[u,Ee(c),c]),s=function(n,t,r,e){return i=nc(e(n,t,r[0]),r[1]),o=i[1],u=i[2],c=i[5],i[1]=i[3],i[2]=i[6],i[3]=o,i[5]=i[7],i[6]=u,i[7]=c,i;var i,o,u,c}(n,t,[r[0],a[1]?a[2]:new Float32Array([1,0,0,1,0,0,1,0,0])],Cc);return no(n,s,i),s}function Bc(n,t,r,i){return t[1].includes(t[0])?void 0!==i?i|e.a(r,n):e.a(r,n):i}function Uc(n,t,r){return Si(function(e){var i=zi(r),o=Wi(i[4]);return i[4]=function(n,t,r){var e=function(n,t,r){var e=r[1],i=t[3],o=t[2],u=t[1],c=t[0],a=0;if(void 0!==e){var s=e;if(s[0]===c&&s[1]===u&&s[2]===o&&s[3]===i)return r;a=1}else a=1;if(1===a)return n.colorMask(c,u,o,i),[r[0],[c,u,o,i],r[2],r[3],r[4],r[5],r[6],r[7],r[8]]}(n,[!0,!0,!0,!0],r);return n.clear(t),e}(o,function(n,t){var r=Bc(n,["STENCIL_BUFFER",t],function(n){return n.STENCIL_BUFFER_BIT},Bc(n,["DEPTH_BUFFER",t],function(n){return n.DEPTH_BUFFER_BIT},Bc(n,["COLOR_BUFFER",t],function(n){return n.COLOR_BUFFER_BIT},void 0)));return void 0!==r?r:ve(le("_getBit","should find bit","","","flags:"+String(t)))}(o,Ci(n)),i[4]),ji(r,i),t})}function Fc(n){return n<<0}function Oc(n){return n<<0}function Yc(n){return 0+Yi(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function Gc(n){return n<<0}function Hc(n){return Yc(n)+Yi(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function Wc(n){return n<<0}function Vc(n){return Hc(n)+Yi(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function jc(n){return n<<0}function zc(n){return Vc(n)+Yi(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}var qc=wo;function Xc(n){return 429496729!==n}function Jc(n,t){return[new Uint32Array(n,0,Fc(t)),new Uint32Array(n,Yc(t),Oc(t)),new Uint32Array(n,Hc(t),Gc(t)),new Uint32Array(n,Vc(t),Wc(t)),new Uint32Array(n,zc(t),jc(t))]}var Kc=io;var $c=no;function Qc(n,t,r){return void 0!==Kc(t,r)?r:$c(t,n.createTexture(),r)}function Zc(n,t,r){return bi(function(t,r){return Qc(n,r,t)},r,t)}var na=Zc;function ta(n){return ki(n[1])}function ra(n){return ta(n)[1]}function ea(n){return n[2]}function ia(n){return ki(n[3])}function oa(n){return ki(n[6])}function ua(n,t){return 0===t?n.UNSIGNED_BYTE:1===t?n.UNSIGNED_SHORT_5_6_5:2===t?n.UNSIGNED_SHORT_4_4_4_4:n.UNSIGNED_SHORT_5_5_5_1}function ca(n){return Yi(n,Yi(Uint8Array.BYTES_PER_ELEMENT,8))}var aa=ca;function sa(n){return 1}function fa(n){return Yi(n,1)}function ha(n){return Yi(n,1)}function la(n){return Yi(n,1)}function va(n){return Yi(n,1)}function pa(n){return 0+Yi(Yi(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function da(n){return Yi(n,1)}function _a(n){return Yi(n,1)}function ga(n){return pa(n)+Yi(Yi(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ya(n){return Yi(n,1)}function ma(n){return Yi(n,1)}function wa(n){return ga(n)+Yi(Yi(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Ea(n){return Yi(n,1)}function ba(n){return Yi(n,1)}function Ta(n){return wa(n)+Yi(Yi(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function xa(n){return Yi(n,1)}function Aa(n){return Yi(n,1)}function Sa(n){return Ta(n)+Yi(Yi(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function La(n){return Yi(n,1)}function Da(n){return Yi(n,1)}function Ra(n){return Sa(n)+Yi(Yi(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ka(n){return Yi(n,1)}function Pa(n){return Ra(n)+Yi(Yi(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Ma(n){return Yi(n,1)}var Na=sa,Ca=fa;function Ia(n,t){return[new Uint8Array(n,0,ha(t)),new Uint8Array(n,pa(t),va(t)),new Uint8Array(n,ga(t),_a(t)),new Uint8Array(n,wa(t),ma(t)),new Uint8Array(n,Ta(t),ba(t)),new Uint8Array(n,Sa(t),Aa(t)),new Uint8Array(n,Ra(t),Da(t)),new Uint8Array(n,Pa(t),ka(t))]}function Ba(n){return n}function Ua(n,t){return t+n|0}function Fa(n,t){return ii(function(n){return ri(_e("index should >= 0","is "+String(n)),function(t){return _i[7](n,0)})},yi(gi),n-t|0)}function Oa(n,t,r,e){return Qe(n,t)?e[0](n,r):e[1](n,r)}function Ya(n){return ki(n[15])}var Ga=io,Ha=no;function Wa(n,t){return yo(la(n),t)}function Va(n,t){return yo(da(n),t)}function ja(n,t){return yo(ya(n),t)}function za(n,t){return yo(Ea(n),t)}function qa(n,t){return yo(Ca(n),t)}function Xa(n,t){return 1===yo(Ma(n),t)}function Ja(n,t){return yo(xa(n),t)}function Ka(n,t){return yo(La(n),t)}var $a=function(n,t){return Lt(function(n){var r=n[3];return Cn(function(n){return function(n,t,r){var e=Ya(r);return Ha(n,t,e[8]),r}(r,n,t)},Cr(ac([n[0],n[1],n[2]],function(n){return function(n,t){return Xa(n,ki(Ya(t)[7]))}(r,n)},t)))},K(n))};function Qa(n){return Yi(n,1)}function Za(n,t){return aa(n)+0|0}function ns(n){return Yi(n,1)}function ts(n){return Yi(n,1)}function rs(n,t){return(aa(n)+0|0)+Yi(Yi(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function es(n){return Yi(n,1)}function is(n){return Yi(n,1)}function os(n,t){return rs(n,t)+Yi(Yi(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function us(n){return Yi(n,1)}function cs(n){return Yi(n,1)}function as(n,t){return os(n,t)+Yi(Yi(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ss(n){return Yi(n,1)}function fs(n){return Yi(n,1)}function hs(n,t){return as(n,t)+Yi(Yi(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ls(n){return Yi(n,1)}function vs(n){return Yi(n,1)}function ps(n,t){return hs(n,t)+Yi(Yi(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ds(n){return Yi(n,1)}function _s(n){return Yi(n,1)}function gs(n,t){return ps(n,t)+Yi(Yi(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ys(n){return Yi(n,1)}function ms(n,t){return gs(n,t)+Yi(Yi(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ws(n){return Yi(n,1)}function Es(n){return Yi(n,1)}function bs(n,t){return ms(n,t)+Yi(Yi(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Ts(n){return Yi(n,1)}function xs(n){return Yi(n,1)}function As(n,t){return bs(n,t)+Yi(Yi(t,1),Uint16Array.BYTES_PER_ELEMENT)|0}function Ss(n){return Yi(n,1)}var Ls=sa,Ds=fa;function Rs(n,t,r){return[new Uint8Array(n,Za(t),Qa(r)),new Uint8Array(n,rs(t,r),ts(r)),new Uint8Array(n,os(t,r),is(r)),new Uint8Array(n,as(t,r),cs(r)),new Uint8Array(n,hs(t,r),fs(r)),new Uint8Array(n,ps(t,r),vs(r)),new Uint8Array(n,gs(t,r),_s(r)),new Uint8Array(n,ms(t,r),ys(r)),new Uint16Array(n,bs(t,r),Es(r)),new Uint16Array(n,As(t,r),xs(r))]}function ks(n){return ki(n[16])}function Ps(n,t){return Si(function(r){var e=zi(t),i=e[1],o=ju(n).textureData,u=ia(i),c=function(n){return ki(n[4])}(i);return ji(t,function(n,t,r,e){var i=Ia(n,t);e[15]=[Te(i[0]),Te(i[1]),Te(i[2]),Te(i[3]),Te(i[4]),Te(i[5]),Te(i[6]),Te(i[7]),ro(0),ro(0),ro(0)];var o=Rs(n,t,r);return e[16]=[Te(o[0]),Te(o[1]),Te(o[2]),Te(o[3]),Te(o[4]),Te(o[5]),Te(o[6]),Te(o[7]),Te(o[8]),Te(o[9]),void 0,ro(0),ro(0)],e}(o.buffer,u,c,e))})}function Ms(n,t){return Si(function(r){var e=zi(t),i=ju(n).textureData.arrayBufferViewSourceTextureData.sourceMap;return ji(t,function(n,t){var r=ks(t),e=me.a(t);return e[16]=[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],n,r[11],r[12]],e}(i,e))})}function Ns(n,t){return Si(function(r){var e,i,o=zi(t),u=ju(n).textureData,c=Ya(o),a=ks(o);return o[15]=[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],na(Wi(o[4]),Li(0,u.basicSourceTextureData.index-1|0),c[9]),c[10]],o[16]=[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],na(Wi(o[4]),(e=u.arrayBufferViewSourceTextureData.index,i=ia(o[1]),Li(0,e-1|0).map(function(n){return Ua(n,i)})),a[11]),a[12]],o})}function Cs(n,t,r){var e=zi(r),i=ju(t).textureData;return Cr(Fn(function(n){return ji(r,n),0},xi([Ps(t,r),$a(i.basicSourceTextureData.needAddedImageDataArray,e),Ms(t,r),Ns(t,r)])).then(function(n){return Promise.resolve(t)}))}function Is(n){return ei(function(t){return ri(_e("data##renderData exist","not"),function(t){return ai(n.renderData)})},yi(gi)),!0===n.renderData.isRender}function Bs(n,t){return t.drawElements(n[0],n[3],n[1],0),0}function Us(n,t,r){var e=n[2],i=n[1],o=Fe(i,e);if(void 0!==o)return Se(o);var u=t(n[0],i,r);return Be(i,u,e),u}function Fs(n,t,r){return r.getAttribLocation(n,t)}function Os(n,t,r){return r.getUniformLocation(n,t)}function Ys(n,t,r,e){return Us([n,t,r],Fs,e)}function Gs(n,t,r,e){return Us([n,t,r],Os,e)}function Hs(n,t,r){return no(n,t,r[0]),r}function Ws(n,t,r){return no(n,t,r[1]),r}function Vs(n){return null!==n}var js=eo;function zs(n,t){return js(n,t[5][9])}function qs(n,t,r){return zs(t,r)?n.UNSIGNED_INT:n.UNSIGNED_SHORT}function Xs(n,t,r){return zs(t,r)?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT}function Js(n,t,r){return n.shaderSource(r,t),n.compileShader(r),ae(function(e){if(!1===n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r),o=String(i)+"";se(function(n){return ce("shader info log",o)},yi(gi));var u=String(t)+"";return se(function(n){return ce("glsl source",u)},yi(gi))}return 0},yi(gi)),r}function Ks(n,t,r,e){var i=Js(r,n,r.createShader(r.VERTEX_SHADER)),o=Js(r,t,r.createShader(r.FRAGMENT_SHADER));return r.attachShader(e,i),r.attachShader(e,o),r.bindAttribLocation(e,0,"a_position"),function(n,t){t.linkProgram(n),ae(function(r){if(!1===t.getProgramParameter(n,t.LINK_STATUS)){var e=t.getProgramInfoLog(n);return ve(le("link program error",String(e)+"","","",""))}return 0},yi(gi))}(e,r),r.deleteShader(i),r.deleteShader(o),e}function $s(n,t,r){return function(n,t,r){var e=r[4],i=e[1];return void 0!==i&&t===Se(i)?r:(e[1]=Te(t),n.useProgram(t),r)}(n,function(n,t){return ii(function(n){return ri(_e("program exist","not"),function(t){return ai(n)})},yi(gi),eo(n,t[0]))}(t,r[4]),r)}function Qs(n,t,r,e){var i=t[1],o=t[0],u=Nc(o,i);if(u[0])return u[1];var c=r(n,t[2](o,e),e);return no(o,c,i),c}function Zs(n,t,r){var e=function(n,t){return bc(n,t[5])}(n,r[1]);return n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e}function nf(n,t,r,e){return function(n,t,r,e){var i=t[1],o=t[0],u=Nc(o,i);if(u[0])return u[1];var c=r[0](n,r[1](o,e),e);return no(o,c,i),c}(n,[t[0],t[1]],[Zs,r],e)}function tf(n,t,r){var e=Tc(n,r[1]);return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),e}function rf(n,t,r){var e=Tc(n,r[1]);return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),e}function ef(n){return Yi(n,3)}function of(n){return n<<1}function uf(n){return 0+Yi(Yi(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function cf(n){return uf(n)+Yi(n<<1,Float32Array.BYTES_PER_ELEMENT)|0}function af(n){return n<<0}function sf(n){return cf(n)+Yi(Yi(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function ff(n){return n<<0}function hf(n){return sf(n)+Yi(n<<0,Uint16Array.BYTES_PER_ELEMENT)|0}function lf(n){return n<<1}function vf(n){return hf(n)+Yi(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function pf(n){return n<<1}function df(n,t){return vf(n)+Yi(t<<1,Uint32Array.BYTES_PER_ELEMENT)|0}function _f(n){return n<<1}function gf(n,t){return df(n,t)+Yi(t<<1,Uint32Array.BYTES_PER_ELEMENT)|0}function yf(n){return n<<1}function mf(n,t){return gf(n,t)+Yi(t<<1,Uint32Array.BYTES_PER_ELEMENT)|0}function wf(n){return n<<1}function Ef(n,t){return ii(function(n){var t=n[1],r=n[0];return ri(_e("has info data","not"),function(n){return ai(r),ai(t)}),ri(_e("endIndex >= startIndex","is "+String(t)),function(n){return _i[7](t,r)})},yi(gi),[wo(n,t),wo(n+1|0,t)])}function bf(n,t,r){var e,i,o,u=Ef(n,r);return e=t,i=u[0],o=u[1],e.slice(i,o)}function Tf(n,t){var r,e,i,o,u,c,a,s=t[5];return r=wf(n),e=s[3],i=s[8],a=Ef(r,i),o=e,u=a[0],c=a[1],o.slice(u,c)}function xf(n,t){var r,e,i,o,u,c,a,s=t[5];return r=wf(n),e=s[4],i=s[8],a=Ef(r,i),o=e,u=a[0],c=a[1],o.slice(u,c)}function Af(n,t){var r=Ef(wf(n),t[5][8]);return r[1]-r[0]|0}function Sf(n,t){return r=wf(n),(e=Ef(r,t))[1]>e[0];var r,e}function Lf(n,t){return t[n]}function Df(n,t){return[n[t],n[t+1|0],n[t+2|0]]}function Rf(n,t,r){return r[t]=r[t]+n[0],r[t+1|0]=r[t+1|0]+n[1],r[t+2|0]=r[t+2|0]+n[2],r}function kf(n,t){return function(n){for(var t=n.length,r=0,e=n;;){var i=r;if(i>=t)return e;var o=e[i],u=e[i+1|0],c=e[i+2|0],a=Math.sqrt(o*o+u*u+c*c);0===a?(e[i]=0,e[i+1|0]=0,e[i+2|0]=0):(e[i]=o/a,e[i+1|0]=u/a,e[i+2|0]=c/a),r=i+3|0}}(function(r,e,i){for(;;){var o=i,u=e;if(u>=r)return o;var c=Yi(Lf(u,t),3),a=Yi(Lf(u+1|0,t),3),s=Yi(Lf(u+2|0,t),3),f=Df(n,c),h=Df(n,a),l=Zu(Qu(0,Df(n,s),h),Qu(0,f,h));i=Rf(l,s,Rf(l,a,Rf(l,c,o))),e=u+3|0}}(function(n){return n.length}(t),0,new Float32Array(n.length)))}function Pf(n,t){var r=t[5];return bf(wf(n),r[0],r[5])}function Mf(n,t){var r,e;return(r=n,e=t[5],Sf(r,e[7]))?function(n,t){var r=t[5];return bf(wf(n),r[2],r[7])}(n,t):function(n,t){var r=zs(n,t);return kf(Pf(n,t),r?xf(n,t):Tf(n,t))}(n,t)}function Nf(n,t){return ii(function(n){return ri(_e("instance attribute send record exist","not"),function(t){return ai(n)})},yi(gi),eo(n,t[1]))}function Cf(n,t){var r=t[5];return bf(wf(n),r[1],r[6])}function If(n){switch(n){case"vec2":return 2;case"vec3":return 3;default:return ve(le("getBufferSizeByType","invalide type_: "+String(n),"","",""))}}function Bf(n,t,r){var e,i,o;return(i=!0,(e=t)>=(o=r).length||Je(o[e],i))?(n.enableVertexAttribArray(t),r[t]=!0,0):0}function Uf(n,t,r){return n.uniformMatrix3fv(t,!1,r),0}function Ff(n,t,r){return n.uniformMatrix4fv(t,!1,r),0}var Of=io;function Yf(n,t,r){var e=r[2],i=r[1],o=r[0],u=He(t,n);return u[0]?function(n,t,r,e){var i=!1;return n[0]!==t&&(n[0]=t,i=!0),n[1]!==r&&(n[1]=r,i=!0),n[2]!==e&&(n[2]=e,i=!0),i}(u[1],o,i,e):(Be(t,[o,i,e],n),!0)}function Gf(n,t,r){var e=He(t,n);return!(e[0]&&e[1]===r)&&(Be(t,r,n),!0)}function Hf(n,t,r,e){return Gf(t,r[0],e)?(n.uniform1f(r[1],e),0):0}function Wf(n,t,r,e){return Gf(t,r[0],e)?(n.uniform1i(r[1],e),0):0}function Vf(n,t,r,e){ei(function(n){return ri(_e("valueArr.length === 3","not"),function(n){return _i[0](e.length,3)})},yi(gi));var i=me.b(e,0),o=me.b(e,1),u=me.b(e,2);return Yf(t,r[0],[i,o,u])?(n.uniform3f(r[1],i,o,u),0):0}function jf(n,t,r,e){return Yf(t,r[0],e)?(n.uniform3f(r[1],e[0],e[1],e[2]),0):0}function zf(n){switch(n){case"mat3":return Uf;case"mat4":return Ff;default:return ve(le("getSendNoCachableDataByType","unknown type:"+String(n),"","",""))}}function qf(n){switch(n){case"float":return Hf;case"float3":return Vf;case"sampler2D":case"samplerCube":return Wf;case"vec3":return jf;default:return ve(le("getSendCachableDataByType","unknown type:"+String(n),"","",""))}}function Xf(n,t){return ii(function(n){return ri(_e("uniform send record exist","not"),function(t){return ai(n)})},yi(gi),eo(n,t))}function Jf(n,t,r){return[Di([n[0],r,zf(n[1])],t[0]),t[1],t[2],t[3],t[4],t[5],t[6]]}function Kf(n,t){return Xf(n,t[3])}function $f(n,t,r){return[t[0],Di([n[0],n[1],n[2],r,qf(n[3])],t[1]),t[2],t[3],t[4],t[5],t[6]]}function Qf(n,t,r){return[t[0],Di([n[0],n[1],n[2],r,Wf],t[1]),t[2],t[3],t[4],t[5],t[6]]}function Zf(n){return n[1][8]}function nh(n){var t,r=n[22];return[n[6],n[7],n[8],n[12],n[13],n[14],[[(t=r,t[0][0])],[Zf(r)]],n[17]]}function th(n){return[n[3][10],n[0],n[12],n[13]]}function rh(n,t,r,e){var i=r[1],o=r[0],u=o[3],c=t[1],a=t[0],s=0;switch(n){case 0:return nf(a,[c,o[0]],i[0],e);case 1:return nf(a,[c,o[2]],i[2],e);case 2:return nf(a,[c,o[1]],i[1],e);case 3:return zs(c,e)?function(n,t,r,e){return Qs(n,[t[0],t[1],r],rf,e)}(a,[c,u],i[4],e):function(n,t,r,e){return Qs(n,[t[0],t[1],r],tf,e)}(a,[c,u],i[3],e);case 4:case 5:s=1}if(1===s)return ve(le("_getOrCreateBuffer","unknown buffer: "+String(n),"","",""))}var eh=function(n,t,r,e){var i,o,u=e[1],c=[[u[0],u[1],u[2],u[3]],[Pf,Cf,Mf,Tf,xf]],a=t[1],s=[n,a];return mi(function(t){var i=rh(t[2],s,c,e);return t[3](n,[t[1],t[0]],i,r)},(i=t[0],o=e[3],ii(function(n){return ri(_e("attribute send record exist","not"),function(t){return ai(n)})},yi(gi),eo(i,o[0])))),e};function ih(n,t,r,e){var i,o,u=t[1];return mi(function(t){return t[4](n,t[0],[t[1],t[2]],t[3](u,r))},(i=t[0],o=e[3],Xf(i,o[4]))),e}function oh(n,t,r,e){var i=t[2],o=t[1],u=$s(n,i,e),c=th(u),a=eh(n,[i,t[4]],c,u),s=nh(a);!function(n,t,r){var e=r[0],i=t[1];mi(function(t){var r=t[0];return Vs(r)?t[2](n,r,t[1](i,e)):0},Kf(t[0],r[1][3]))}(n,[i,t[0]],[s,a]);var f=a[3],h=f[11],l=0;if(void 0!==h){var v=h;if(v[0]===o&&v[1]===i)return a;l=1}else l=1;if(1===l)return f[11]=[o,i],r(n,o,ih(n,[i,o],nh(a),a))}function uh(n,t,r,e){return Bs([t,qs(n,r,e),Xs(0,r,e),Af(r,e)],n)}function ch(n){return n<<0}function ah(n,t){return wo(n<<0,t)}function sh(n,t,r){return Ao(n<<0,t,r)}var fh=Yi;function hh(n,t,r){return Yi(n,r)+t|0}function lh(n){return Yi(n,3)}function vh(n){return 0+Yi(ch(n),Uint32Array.BYTES_PER_ELEMENT)|0}function ph(n){return Yi(n,3)}function dh(n,t){return vh(n)+Yi(Yi(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function _h(n){return n<<0}function gh(n,t){return dh(n)+Yi(fh(n,t),Uint32Array.BYTES_PER_ELEMENT)|0}function yh(n){return n<<0}function mh(n){return n<<0}function wh(n,t){return gh(n,t)+Yi(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function Eh(n){return n<<0}function bh(n){return n<<0}function Th(n,t){return wh(n,t)+Yi(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function xh(n){return n<<0}var Ah=fh;function Sh(n,t){return wo(hh(n[0],n[1],n[2]),t)}function Lh(n,t){return bo(ph(n),t)}function Dh(n,t){return yo(yh(n),t)}function Rh(n,t){return 0===yo(Eh(n),t)}function kh(n,t){return Eo(xh(n),t)}var Ph=Sh;function Mh(n){return 255!==n}function Nh(n,t,r){var e=io(n,r);return void 0!==e&&Se(e)===t}function Ch(n,t,r,e){var i=e[1],o=e[0];ei(function(n){return ri(_e("unit should >= 0","is "+String(t)),function(n){return _i[7](t,0)})},yi(gi));var u=Kc(r,i);if(void 0!==u){if(Nh(t,r,o))return e;var c=function(n,t,r){return ei(function(e){return ri(_e("not cached",""),function(e){return ui(Nh(n,t,r))})},yi(gi)),no(n,t,r)}(t,r,o),a=n.TEXTURE_2D;return n.activeTexture(n.TEXTURE0+t|0),n.bindTexture(a,Se(u)),[c,i]}return e}function Ih(n,t){var r=t[2],e=r[10];return Ch(t[0],t[1],n,[e[10],e[9]]),r}function Bh(n,t){var r=t[2],e=r[11];return Ch(t[0],t[1],n,[e[12],e[11]]),r}function Uh(n){return n.width}function Fh(n){return n.height}function Oh(n,t){switch(t){case 0:return n.CLAMP_TO_EDGE;case 1:return n.MIRRORED_REPEAT;case 2:return n.REPEAT}}function Yh(n,t){switch(t){case 0:return n.RGB;case 1:return n.RGBA;case 2:return n.ALPHA;case 3:return n.LUMINANCE;case 4:return n.LUMINANCE_ALPHA;case 5:return n.RGB_S3TC_DXT1;case 6:return n.RGBA_S3TC_DXT1;case 7:return n.RGBA_S3TC_DXT3;case 8:return n.RGBA_S3TC_DXT5}}function Gh(n,t){switch(t){case 0:return n.NEAREST;case 1:return n.LINEAR;case 2:return n.NEAREST_MIPMAP_NEAREST;case 3:return n.LINEAR_MIPMAP_NEAREST;case 4:return n.NEAREST_MIPMAP_LINEAR;case 5:return n.LINEAR_MIPMAP_LINEAR}}function Hh(n){return 0==(n&(n-1|0))&&0!==n&&1!==n}function Wh(n,t){switch(n){case 0:case 2:case 4:return t.NEAREST;case 1:case 3:case 5:return t.LINEAR}}function Vh(n){return n>=2}function jh(n,t,r,i){var o,u,c,a,s,f=t[9],h=t[5],l=t[4],v=n[0],p=(o=t[0],u=t[1],!!Hh(o)&&Hh(u));return e.c(i[1],v,t[8],r[1]),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,v.NONE),function(n,t,r,e){var i=e[3],o=e[2];r?(n.texParameteri(t,n.TEXTURE_WRAP_S,e[0]),n.texParameteri(t,n.TEXTURE_WRAP_T,e[1]),n.texParameteri(t,n.TEXTURE_MAG_FILTER,Gh(n,o)),n.texParameteri(t,n.TEXTURE_MIN_FILTER,Gh(n,i))):(n.texParameteri(t,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(t,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(t,n.TEXTURE_MAG_FILTER,Wh(o,n)),n.texParameteri(t,n.TEXTURE_MIN_FILTER,Wh(i,n)))}(v,f,p,[t[2],t[3],l,h]),e.c(i[0],v,[f,t[6],t[7]],n[2]),p&&(Vh(l)||Vh(h))&&v.generateMipmap(f),c=n[1],a=0,s=r[0],xo(fa(c),a,s),0}function zh(n,t,r,e){return 1===e(n,r)}var qh=function(n,t,r){return function(n,t){var r=t[3];return n.texImage2D(t[0],t[1],r,r,t[4],t[2]),0}(n,[t[0],0,r,t[1],t[2]])};function Xh(n,t){return yo(Ds(n),t)}function Jh(n,t,r,e){return function(n,t,r){var e=r[1],i=r[0],o=t[3];return ei(function(n){return ri(_e("width/height shouldn't be 0","width is "+String(i)+"; height is "+String(e)),function(n){return _i[3](i,0),_i[3](e,0)})},yi(gi)),n.texImage2D(t[0],t[1],o,i,e,0,o,t[4],t[2]),0}(n,[t[0],0,e,t[1],t[2]],r)}function Kh(n,t,r){var e,i,o=r[0],u=r[1],c=t[1],a=Ga(t[0],o[10]);if(void 0!==a){var s=(e=c,i=o[8],mo(Ts(e),i)),f=function(n,t){return mo(Ss(n),t)}(c,o[9]),h=Oh(n,function(n,t){return yo(ns(n),t)}(c,o[0])),l=Oh(n,function(n,t){return yo(es(n),t)}(c,o[1])),v=function(n,t){return yo(us(n),t)}(c,o[2]),p=function(n,t){return yo(ss(n),t)}(c,o[3]),d=Yh(n,function(n,t){return yo(ls(n),t)}(c,o[4])),_=ua(n,function(n,t){return yo(ds(n),t)}(c,o[5])),g=function(n,t){return 1===yo(ws(n),t)}(c,o[7]),y=n.TEXTURE_2D,m=[s,f];return jh([n,c,Se(a)],[s,f,h,l,v,p,d,_,g,y],[o[6],u],[function(n,t,r){return function(n,t,r,e){return Jh(t,r,n,e)}(m,n,t,r)},o[13]]),[o,u]}return[o,u]}function $h(n,t){var r=t[1],e=r[21],i=r[10];return function(n,t){return zh(n,Na(0),t[6],qa)}(n,i)&&function(n,t,r){var e=r[0],i=r[1],o=Ga(t,e[8]);if(void 0!==o){var u=Se(o);return jh([n,t,u],[Uh(u),Fh(u),Oh(n,Wa(t,e[0])),Oh(n,Va(t,e[1])),ja(t,e[2]),za(t,e[3]),Yh(n,Ja(t,e[4])),ua(n,Ka(t,e[5])),Xa(t,e[7]),n.TEXTURE_2D],[e[6],i],[qh,e[11]]),[e,i]}}(t[0],n,[i,e]),r}function Qh(n,t){var r=t[1],e=r[21],i=r[11],o=Fa(n,i[14]);return function(n,t){return zh(n,Ls(0),t[6],Xh)}(o,i)&&Kh(t[0],[n,o],[i,e]),r}function Zh(n,t,r){return Oa(t,r[11][14],[n,r],[$h,Qh])}function nl(n){return ki(n[2])}function tl(n,t,r){var e=r[1],i=r[0],o=n[2],u=n[0];if(Mh(o)){var c=function(n,t,r,e){return r([n,t,nl(e[1])],e[0])}(n[1],o,t,[i,e]);return[i,e,Zh(u,c,function(n,t,r,e){return ei(function(n){return ri(_e("unit should >= 0","is "+String(t)),function(n){return _i[7](t,0)})},yi(gi)),Oa(r,e[11][14],[n,t,e],[Ih,Bh])}(u,o,c,r[2]))]}return r}function rl(n,t,r){var e=r[7];return tl([n,t,Dh(t,e[3])],Ph,[e[2],r[19],r])[2]}function el(n,t,r){return oh(n,t,rl,r)}var il=Vi;function ol(n,t,r){return ii(function(n){return ri(_e("shaderIndex should exist","not"),function(t){return _i[3](n,429496729)})},yi(gi),t(n,r))}function ul(n){return n<<0}function cl(n){return n<<0}function al(n){return 0+Yi(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function sl(n){return n<<0}function fl(n,t){return yo(sl(n),t)}function hl(n,t,r){switch(fl(t,r[9][0])){case 0:return n.POINTS;case 1:return n.LINES;case 2:return n.LINE_LOOP;case 3:return n.LINE_STRIP;case 4:return n.TRIANGLES;case 5:return n.TRIANGLE_STRIP;case 6:return n.TRIANGLE_FAN}}function ll(n,t){return!!n&&Ku(t[0])}var vl=eo;function pl(n){return ll((t=n[19],ki(t[0]))[0],n[16]);var t}var dl=Yi;function _l(n){return n<<0}function gl(n,t){return 0+Yi(Yi(n,t),Uint32Array.BYTES_PER_ELEMENT)|0}var yl=Yi;function ml(n){return n<<0}var wl=eo;function El(n,t,r,e){var i=yl(n,t);return ii(function(n){var t=n[1],r=n[0];return ri(_e("endIndex should <= objectInstanceTransformCollections->length","not"),function(n){return _i[11](t,e.length)}),ri(_e("endIndex + 1 should >= startIndex","not"),function(n){return _i[7](t+1|0,r)})},yi(gi),[i,i+(r-1|0)|0])}function bl(n,t,r){for(var e=n[3],i=t,o=El(n[0],n[1],n[2],e),u=o[0],c=o[1];u<=c;++u)i=r(i,wo(u,e));return i}function Tl(n,t){var r,e=t[15],i=wl(n,e[0]);return[i,[n,(r=t[19],ki(r[1])[0]),i,e[1]]]}function xl(n,t,r,e){var i=t[4],o=t[3],u=t[2],c=r(n,[t[0],t[1],u,o,i],e);uh(n,hl(n,o,c),i,c);var a=Kf(u,c[3]),s=hl(n,o,c),f=qs(n,i,c),h=Xs(0,i,c),l=Af(i,c),v=Tl(t[5],c),p=nh(c);return function(n,t){for(var r=n[3],e=El(n[0],n[1],n[2],r),i=e[0],o=e[1];i<=o;++i)t(wo(i,r))}(v[1],function(t){return mi(function(r){var e=r[0];return Vs(e)?r[2](n,e,r[1](t,p)):0},a),Bs([s,f,h,l],n),0}),c}function Al(n,t,r,e){var i=io(n,e);if(void 0!==i){var o=i;return o.length>=r?e:(o.push(t),e)}return no(n,[t],e)}function Sl(n,t,r){return Al(n.length,n,t,r)}function Ll(n,t){var r=io(n,t);if(void 0!==r){var e=r;return 0!==e.length?Ae(e.pop()):void 0}}function Dl(n,t,r){var e=function(n,t){return bc(n,t[7])}(n,r[1]);return n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,t,n.DYNAMIC_DRAW),e}function Rl(n){return ei(function(t){return ri(_e("capacity should be a multiplier of 4","is "+String(n)),function(t){return _i[0](n%4,0)})},yi(gi)),n/4|0}function kl(n,t,r){var e=io(n,r);return void 0!==e?Se(e):t}function Pl(n,t,r){var e=t[1],i=n[1],o=io(i,e);if(void 0!==o)return Se(o);var u=Dl(n[0],kl(i,n[2],t[0]),r);return no(i,u,e),u}function Ml(n,t,r,e){var i=r[1],o=kl(n,t,r[0]),u=io(n,i);if(void 0!==u)return Se(u);var c=(a=Rl(o),s=e[2],Ll(a,s[0]));if(void 0!==c)return Se(c);var a,s,f=new Float32Array(Rl(o));return no(n,f,i),f}function Nl(n,t,r,e){for(var i=r[2],o=t[0],u=n[2],c=n[1],a=n[0],s=kl(c,n[3],i),f=!1;s<u;)s<<=1,f=!0;if(f){!function(n,t,r){no(n,t,r)}(c,s,i),a.deleteBuffer(o);var h=Dl(a,s,e);no(c,h,r[0]);var l=new Float32Array(Rl(s));return no(c,l,r[1]),[h,l]}return[o,t[1]]}var Cl=no;function Il(n,t){return function(n,t){return 1===yo(ml(n),t)}(n,t[2])}function Bl(n,t,r){return[r[0],r[1],r[2],r[3],r[4],Cl(n,t,r[5])]}function Ul(n,t){var r=t[5];return Cc(n,r[0],r[1])}function Fl(n,t){var r=t[5];return Ic(n,r[0],[r[1],r[2]],t[7])}function Ol(n,t,r,e){var i=e[1],o=e[0];return wi(function(t,e){return function(n,t,r){var e=t[0],i=e[0],o=n[0];return o.vertexAttribPointer(i,e[1],o.FLOAT,!1,t[1],e[2](t[2])),n[1].vertexAttribDivisorANGLE(i,1),Bf(o,i,r[0]),r}(n,[t,r,e],o)},Nf(t,i[3])),i}function Yl(n,t,r,e){var i=t[2],o=i[2],u=i[1],c=i[0],a=t[1],s=a[0],f=t[0],h=f[0],l=n[1],v=Pl([h,l,s],[c,u],e),p=Ml(l,s,[c,o],e),d=Nl([h,l,Yi(a[4],a[1]),s],[v,p],[u,o,c],e),_=d[1],g=nh(e);return function(n,t,r,e,i){bl(n,i,function(n,i){return r(i,t,e,n)})}(a[3],_,r,g,r(n[0],_,g,0)),function(n,t,r,e){var i,o,u;return i=n[0],o=r[1],u=r[2],i.bindBuffer(i.ARRAY_BUFFER,u),i.bufferSubData(i.ARRAY_BUFFER,0,o),Ol(n,t,r[0],[e[0],e[1]])}([h,f[1]],f[2],[a[2],_,d[0]],[th(e),e])}function Gl(n,t,r,e){var i=t[2],o=t[1],u=t[0],c=u[0],a=n[1];if(function(n,t){var r=io(n,t);return void 0!==r&&r}(a,e[15][5])){!function(n,t){n.bindBuffer(n.ARRAY_BUFFER,t)}(c,Pl([c,a,o[0]],[i[0],i[1]],e));var s=th(e);return Ol([c,u[1]],u[2],o[2],[s,e])}var f=Yl(n,t,r,e),h=me.a(f);return h[15]=Bl(a,!0,f[15]),h}function Hl(n){var t=n[1],r=n[15];return[r[3],t[4],r[4]]}function Wl(n,t,r,e){var i,o=(i=e[16],ei(function(n){return ri(_e("extensionInstancedArrays exist","not"),function(n){return si(i[0])})},yi(gi)),ki(i[0])),u=Tl(r[0],e),c=0|u[0]+1;return[[n,o,t],[r[1],r[2],r[3],u[1],c],Hl(e)]}function Vl(n,t,r,e){var i=r[1],o=t[0],u=o[5],c=o[4],a=o[3],s=o[2],f=o[0],h=function(n,t,r,e){return r(n,t,e)}(n,[f,o[1],s,a,c],r[0],e),l=Wl(n,s,[u,t[1],t[2],t[3]],h),v=l[0],p=v[1],d=v[0],_=Il(u,h[15])?Gl([f,u],l,i,h):function(n,t,r,e){var i=me.a(e);return Yl(n,t,r,(i[15]=Bl(n[1],!1,e[15]),i))}([f,u],l,i,h);return function(n,t){t.drawElementsInstancedANGLE(n[0],n[3],n[1],0,n[4])}([hl(d,a,_),qs(d,c,_),Xs(0,c,_),Af(c,_),l[1][4]],p),function(n,t,r){return mi(function(n){return t.vertexAttribDivisorANGLE(n[0],0),0},Nf(n,r[3])),r}(s,p,_)}function jl(n,t,r,e){return Do([t,e],[Ul(n,r),0],16)}function zl(n,t,r,e){return jl(n,t,r,e),e+16|0}function ql(n,t,r){return pl(r)?function(n,t,r){return Vl(n,[t,4096,64,64],[el,zl],r)}(n,t,r):function(n,t,r){return xl(n,t,el,r)}(n,t,r)}function Xl(n,t){return ah(n,t[7][0])}function Jl(n,t,r){var e=t[5],i=t[4],o=t[3],u=t[2],c=t[1];return bi(function(t,r){var a=qc(r,c),s=qc(r,u),f=ol(s,Xl,t),h=qc(r,o),l=qc(r,i),v=qc(r,e),p=function(n,t,r){return il(n,Rh(t,r[7][4]),r[18]),r}(n,s,t);if(Xc(v))return ql(n,[a,s,f,h,l,v],p);var d=el(n,[a,s,f,h,l],p);return uh(n,hl(n,h,d),l,d),d},r,t[0])}function Kl(n){return n[21][2]}function $l(n){return ki(n[18])}function Ql(n){return ki(n[20])}function Zl(n){return ki(n[1])}function nv(n){return ki(n[2])}function tv(n){return n[0][0][0]}function rv(n){return Ba(ia(n[1]))}function ev(n){return ki(n[12])}function iv(n){return ki(ev(n)[0])}function ov(n){return ki(ev(n)[3])}function uv(n){return ki(ev(n)[4])}function cv(n){return ki(ev(n)[5])}function av(n){return ki(n[13])}function sv(n){return ki(av(n)[0])}function fv(n){return ki(av(n)[5])}function hv(n){return ki(av(n)[6])}function lv(n,t,r){var e=r[0];return 1!==e?0!==e?ve(le("setFlipY","unknown browser","","","")):0:(n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t),0)}function vv(n){return ki(n[19])}function pv(n){return ki(n[2])}function dv(n){return ki(n[0])}function _v(n){return ki(n[1])}function gv(n){return ki(n[2])}function yv(n){var t,r=n[1],e=n[3],i=n[4],o=n[5],u=n[6],c=n[8],a=n[11],s=n[22],f=n[23],h=n[24],l=n[30],v=ki(n[17]),p=$l(n),d=ev(n),_=av(n),g=function(n){return ki(n[14])}(n),y=vv(n),m=Ql(n),w=Ya(n),E=ks(n),b=function(n){return ki(n[25])}(n),T=cc(n);return[[[tv(n)]],f,s,c,u,[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9]],Kl(n),[iv(n),ki(d[1]),ki(d[2]),ov(n),uv(n),cv(n)],[sv(n),ki(_[1]),ki(_[2]),ki(_[3]),ki(_[4]),fv(n),hv(n)],[g[0]],[ki(w[0]),ki(w[1]),ki(w[2]),ki(w[3]),ki(w[4]),ki(w[5]),ki(w[6]),ki(w[7]),w[8],w[9],w[10],lv],[ki(E[0]),ki(E[1]),ki(E[2]),ki(E[3]),ki(E[4]),ki(E[5]),ki(E[6]),ki(E[7]),ki(E[8]),ki(E[9]),ki(E[10]),E[11],E[12],lv,rv(n)],[y[0],y[3],y[4],pv(y),(t=y,ki(t[1]))],[m[0],m[3],m[4],m[5],m[6],m[7],m[8],nv(m),Zl(m)],[v[0],v[4],v[5]],[dv(a),_v(a),gv(a),a[3],a[4],a[5]],e,h,i,[r[0],[ra(r)],ea(r)],[b[0]],[T[0]],l,o]}function mv(n,t,r){return Si(function(n){var e=zi(r);if(Is(ju(t))){var i=Wi(e[4]);return ji(r,function(n,t){var r=function(n){return n[21][0]}(t);if(void 0!==r){var e=r;return Jl(n,[e[0],e[1],e[2],e[3],e[4],e[5]],yv(t)),t}return t}(i,e)),t}return t})}var wv=r(4);function Ev(n){return n[29][0]}function bv(n,t){var r=t[29];return t[29]=[n,r[1],r[2]],t}function Tv(n){return n[29][1]}function xv(n,t){var r=t[29];return t[29]=[r[0],n,r[2]],t}function Av(n){return n[29][2]}var Sv=tu,Lv=ru,Dv=sc;function Rv(n,t){return t[27]=n,t}function kv(n,t,r,e){return Rv(Ru(n,t,r,Dv(e)),e)}function Pv(n,t,r,e){return Rv(ku(n,t,r,Dv(e)),e)}function Mv(n,t,r){var e=Pu(n,t,Dv(r));return[Rv(e[0],r),e[1]]}function Nv(n,t,r){return Rv(Mu(n,t,Dv(r)),r)}function Cv(n,t,r,e){var i=Nu(n,t,r,Dv(e));return[Rv(i[0],e),i[1]]}function Iv(n,t,r,e){var i=Cu(n,t,r,Dv(e));return[Rv(i[0],e),i[1]]}function Bv(n,t,r,e){var i=Iu([n[0],n[1]],[t[0],t[1]],[r[0],r[1]],Dv(e));return[Rv(i[0],e),i[1],i[2]]}function Uv(n,t,r,e){var i=Bu([n[0],n[1]],[t[0],t[1],t[2]],[r[0],r[1]],Dv(e));return[Rv(i[0],e),i[1],i[2]]}function Fv(n,t){return Rv(Sv(n,Dv(t)),t)}function Ov(n){return Rv(Lv(Dv(n)),n)}function Yv(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).imguiData,o=Pi(i.imguiFunc)||Pi(i.customData)?sc(e):uc(wv.b(Mi(i.customData)),wv.a(Mi(i.imguiFunc)),sc(e));e[27]=o;var u=Wu(Wi(e[4]),i.ioData,function(n){return n[28][0]}(e),[Dv,Rv],e);return ji(r,u),t})}function Gv(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).viewportData;return e[4]=function(n,t,r){var e=r[8],i=t[3],o=t[2],u=t[1],c=t[0],a=0;if(void 0!==e){var s=e;if(s[0]===c&&s[1]===u&&s[2]===o&&s[3]===i)return r;a=1}else a=1;if(1===a)return n.viewport(c,u,o,i),[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],[c,u,o,i]]}(Wi(e[4]),i,e[4]),ji(r,e),t})}function Hv(n,t,r){return[new Float32Array(n,0,ef(t)),new Float32Array(n,uf(t),of(t)),new Float32Array(n,cf(t),ef(t)),new Uint16Array(n,sf(t),af(t)),new Uint32Array(n,hf(t),ff(t)),new Uint32Array(n,vf(t),lf(r)),new Uint32Array(n,df(t,r),pf(r)),new Uint32Array(n,gf(t,r),_f(r)),new Uint32Array(n,mf(t,r),yf(r))]}function Wv(n,t,r){return Si(function(n){var e=zi(r),i=ju(t),o=i.geometryData,u=o.buffer,c=o.indicesTypeMap,a=i.bufferData.geometryPointCount,s=i.bufferData.geometryCount;return ji(r,function(n,t,r,e){var i=Hv(n,t[0],t[1]);return e[18]=[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],r],e}(u,[a,s],c,e)),t})}function Vv(n,t,r){return[new Uint32Array(n,0,dl(t,r)),new Uint8Array(n,gl(t,r),_l(t))]}function jv(n,t,r){return Si(function(n){var e=zi(r),i=e[1],o=ju(t).sourceInstanceData,u=function(n,t,r,e){var i=Vv(n,t,r),o=e[11];return e[11]=[o[0],Te(i[0]),Te(i[1]),o[3],o[4],o[5]],e}(o.buffer,ta(i)[0],ra(i),e),c=u[11];return u[11]=[o.objectInstanceTransformIndexMap,c[1],c[2],c[3],c[4],c[5]],ji(r,u),t})}function zv(n,t,r,e){return ri(_e(n,"not"),function(n){var r=io(t,e);return void 0!==r?ui(bi(function(n,t){var r=n[0];return void 0!==io(t,r)?[r,!0]:[no(t,!0,r),n[1]]},[ro(0),!1],r)[1]):0})}function qv(n){return Yi(n,3)}function Xv(n){return Yi(n,3)}function Jv(n){return 0+Yi(Yi(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Kv(n){return n<<0}function $v(n){return Jv(n)+Yi(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function Qv(n){return n<<0}function Zv(n){return $v(n)+Yi(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function np(n){return n<<0}function tp(n){return Zv(n)+Yi(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function rp(n){return n<<0}function ep(n){return tp(n)+Yi(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function ip(n){return n<<0}function op(n,t){return[new Float32Array(n,0,Xv(t)),new Float32Array(n,Jv(t),Kv(t)),new Float32Array(n,$v(t),Qv(t)),new Float32Array(n,Zv(t),np(t)),new Float32Array(n,tp(t),rp(t)),new Float32Array(n,ep(t),ip(t))]}function up(n,t){return[new Uint8Array(n,0,ul(t)),new Uint8Array(n,al(t),cl(t))]}function cp(n,t,r){return[new Uint32Array(n,0,ch(t)),new Float32Array(n,vh(t),lh(t)),new Uint32Array(n,dh(t),Ah(t,r)),new Uint8Array(n,gh(t,r),_h(t)),new Uint8Array(n,wh(t,r),mh(t)),new Float32Array(n,Th(t,r),bh(t))]}function ap(n){return Yi(n,3)}function sp(n){return Yi(ch(n),Uint32Array.BYTES_PER_ELEMENT)}function fp(n){return Yi(n,3)}function hp(n){return Yi(ch(n),Uint32Array.BYTES_PER_ELEMENT)+Yi(Yi(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function lp(n){return n<<0}function vp(n){return hp(n)+Yi(Yi(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function pp(n){return Yi(n,3)}function dp(n){return Yi(n,3)}function _p(n){return n<<0}function gp(n,t){return vp(n)+Yi(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function yp(n){return n<<0}function mp(n,t){return gp(n)+Yi(fh(n,t),Uint32Array.BYTES_PER_ELEMENT)|0}function wp(n){return n<<0}function Ep(n){return n<<0}function bp(n,t){return mp(n,t)+Yi(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function Tp(n){return n<<0}var xp=fh;function Ap(n,t,r){return[new Uint32Array(n,0,ch(t)),new Float32Array(n,sp(t),ap(t)),new Float32Array(n,hp(t),fp(t)),new Float32Array(n,vp(t),lp(t)),new Uint32Array(n,gp(t),xp(t,r)),new Uint8Array(n,mp(t,r),yp(t)),new Uint8Array(n,bp(t,r),Ep(t))]}function Sp(n,t){return bo(pp(n),t)}function Lp(n,t){return bo(dp(n),t)}function Dp(n,t){return Eo(_p(n),t)}function Rp(n,t){return yo(wp(n),t)}function kp(n,t){return yo(Tp(n),t)}var Pp=Sh;function Mp(n){return Yi(n,3)}function Np(n){return n<<0}function Cp(n){return Yi(n,3)}function Ip(n){return 0+Yi(Yi(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Bp(n){return n<<0}function Up(n,t){return[new Float32Array(n,0,Cp(t)),new Float32Array(n,Ip(t),Bp(t))]}function Fp(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).renderData.camera;return e[21][2]=null==i?void 0:[i.vMatrix,i.pMatrix,i.position],ji(r,e),t})}function Op(n,t,r){return Si(function(n){var e=zi(r),i=function(n,t){var r=t[29];return t[29]=[r[0],r[1],n],t}(ju(t).customData,e);return ji(r,i),t})}function Yp(n,t){return Qt(function(t){return t.data.operateType===vc(n)},Tn("message",t))}function Gp(n,t){return Cn(function(n){return Te(n)},Yp(n,t))}function Hp(n,t,r){return Gp(n,e.a(ge,0))}function Wp(n,t,r){return Si(function(n){var e=zi(r),i=ju(t),o=i.transformData.buffer,u=i.bufferData.transformCount;return ji(r,function(n,t,r){var e=go(n,t);return r[17]=[e[0],e[1],e[2],e[3],ro(0),ro(0)],r}(o,u,e)),t})}function Vp(n,t,r){return Si(function(n){var e=zi(r);return ju(t),ji(r,e),t})}function jp(n,t,r){return Gp(n,e.a(ge,0))}function zp(n,t,r){return Si(function(n){var r=ju(t);return function(n,t){n[1]=t}(gi,r.isDebug),t})}function qp(n,t,r){return Si(function(n){var e=zi(r),i=ju(t),o=i.gpuData,u=i.memoryData,c=i.instanceBufferData;return e[1]=[[o.useHardwareInstance],[c.sourceInstanceCount,c.objectInstanceCountPerSourceInstance],i.bufferData.textureCountPerMaterial,i.bufferData.basicSourceTextureCount,i.bufferData.arrayBufferViewSourceTextureCount,i.bufferData.directionLightCount,i.bufferData.pointLightCount,[u.maxBigTypeArrayPoolSize]],ji(r,e),t})}function Xp(n,t,r){return Si(function(n){var e=zi(r),i=e[1],o=ju(t).pointLightData,u=o.buffer,c=oa(i);return ji(r,function(n,t){var r=Ql(t);return t[20]=[r[0],r[1],n.renderLightArr,r[3],r[4],r[5],r[6],r[7],r[8]],t}(o,function(n,t,r,e){var i=op(n,t);return e[20]=[r,void 0,void 0,i[0],i[1],i[2],i[3],i[4],i[5]],e}(u,c,o.index,e))),t})}function Jp(n,t){return ni(Fe(n,t[0]))}function Kp(n,t,r,e){return[n[0],n[1],t,r[0],r[1],e]}function $p(n,t,r){return Si(function(n){var e=zi(r);return e[7][0]=function(n,t){var r=Jp("highp_fragment",t)[0],e=n[2];if(void 0===e)return r;switch(e){case 0:return Jp("highp_fragment",t)[0];case 1:return Jp("mediump_fragment",t)[0];case 2:return Jp("lowp_fragment",t)[0]}}(e[3],e[10]),ji(r,e),t})}function Qp(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).renderData.geometryData.indicesTypeMap,o=$l(e);return e[18]=[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],i],ji(r,e),t})}function Zp(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).renderData.sourceInstance,o=e[11];return e[11]=[i.objectInstanceTransformIndexMap,o[1],o[2],o[3],o[4],o[5]],ji(r,e),t})}function nd(n,t,r){return Si(function(n){var e=zi(r),i=ju(t),o=i.basicMaterialData;e[12]=[void 0,void 0,void 0,void 0,void 0,void 0,o.index,o.disposedIndexArray,o.isSourceInstanceMap];var u=i.lightMaterialData;return e[13]=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,u.index,u.disposedIndexArray,u.isSourceInstanceMap],ji(r,e),t})}function td(n,t,r){var e=r[8],i=Rp(t,e[5]);return tl([n,t,kp(t,e[6])],Pp,tl([n,t,i],Pp,[e[4],r[19],r]))[2]}function rd(n,t,r){return oh(n,t,td,r)}function ed(n,t,r,e){return jl(n,t,r,e),Do([t,e+16|0],[Fl(n,r),0],9),9+(e+16|0)|0}function id(n,t,r){return pl(r)?function(n,t,r){return Vl(n,[t,6400,112,100],[rd,ed],r)}(n,t,r):function(n,t,r){return xl(n,t,rd,r)}(n,t,r)}function od(n,t){return ah(n,t[8][0])}function ud(n,t){var r=function(n){return n[21][1]}(t);if(void 0!==r){var e=r;return function(n,t,r){var e=t[5],i=t[4],o=t[3],u=t[2],c=t[1];bi(function(t,r){var a=qc(r,c),s=qc(r,u),f=ol(s,od,t),h=qc(r,o),l=qc(r,i),v=qc(r,e);if(Xc(v))return id(n,[a,s,f,h,l,v],t);var p=rd(n,[a,s,f,h,l],t);return uh(n,hl(n,h,p),l,p),p},r,t[0])}(n,[e[0],e[1],e[2],e[3],e[4],e[5]],yv(t)),t}return t}function cd(n,t,r){return Si(function(n){var e=zi(r);if(Is(ju(t))){var i=Wi(e[4]);return ji(r,ud(i,e)),t}return t})}function ad(n,t,r){return Si(function(n){var e=zi(r),i=ju(t),o=i.meshRendererData.buffer,u=i.bufferData.meshRendererCount;return ji(r,function(n,t,r){var e=up(n,t);return r[14]=[e[0],e[1]],r}(o,u,e)),t})}function sd(n){return n[0]}function fd(n){return n[1]}function hd(n,t,r){return Gp(n,e.a(ge,0))}function ld(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).pointLightData,o=Ql(e);return e[20]=[i.index,i.positionMap,i.renderLightArr,o[3],o[4],o[5],o[6],o[7],o[8]],ji(r,e),t})}var vd=function(n,t,r,i){var o=i[2],u=i[1],c=t[0],a=sd(u);return r[2](c,e.d(r[0],c,[n,r[4](c,[t[1],t[2]],[a,e.a(r[3],a),fd(u)],o)],r[1],o),i[0]),o};function pd(n,t,r,e){var i=e[1],o=t[1],u=t[0];return ei(function(n){return ri(_e("not dispose any material before init","do"),function(n){return oi(function(n){return 0===n.length}(i))})},yi(gi)),bi(function(t,e){return r(n,[e,vl(e,u),o],t)},e[2],Li(0,e[0]-1|0))}function dd(n,t,r){return[t[0],t[1],Di([n[1],r,zf(n[0])],t[2]),t[3],t[4],t[5],t[6]]}function _d(n,t,r){return[t[0],t[1],t[2],t[3],Di([n[0],n[1],n[2],r],t[4]),t[5],t[6]]}function gd(n,t,r){var e,i,o,u,c,a=r[3];return i=t,u=Nc(e=n,o=a),c=u[1],u[0]?c.includes(i)||Di(i,c):no(e,[i],o),ii(function(t){var r=t[3];return zv("material should only use the same shaderIndex once",n,0,r)},yi(gi),r)}function yd(n){for(var t="",r=0,e=n.length-1|0;r<=e;++r)t+=me.b(n,r)[0];return t}function md(n,t,r,e){return Ks(r[0],r[1],n,function(n,t,r){return no(n,r,t[0]),r}(t,e,n.createProgram()))}function wd(n,t,r,e){var i=t[1],o=t[0],u=n[0];!function(n,t,r){Be(n,t,r[2])}(n[1],u,e[0]);var c=r[0](i,r[1],[e[2],e[5]]),a=md(o,u,[c[0],c[1]],e[1]),s=r[2]([o,u,a],i,[e[3],e[4]]);return r[3](o,[a,u,i],s),u}function Ed(n,t,r,e){var i=e[0],o=t[1],u=yd(o),c=function(n,t){var r=t[2];return Fe(n,r)}(u,i);if(void 0!==c){var a=c;return gd(a,n,i),a}var s,f,h=(f=(s=i)[0],s[0]=f+1|0,ii(function(n){return ri(_e("not equal default shader index:"+String(429496729)+" ","equal"),function(t){return _i[3](n,429496729)})},yi(gi),f)),l=gd(h,n,i);return wd([h,u],[t[0],o],[r[0],r[1],r[2],r[3]],[l,e[1],e[2],e[3],e[4],e[5]])}function bd(n,t,r,e){return Ed(n,[t[0],t[1]],[r[0],r[1],r[2],r[3]],[e[0],e[1],e[2],e[3],e[4],e[5]])}function Td(n){return ve(le("getHandle","unknown handle name: "+String(n),"","",""))}function xd(n,t,r){return[t[0],t[1],t[2],t[3],t[4],Di([n,r[0],r[1]],t[5]),t[6]]}function Ad(n,t,r){return no(n,r,t),0}function Sd(n,t){var r=n[3],e=n[1],i=n[0];switch(i){case"instance_mMatrix":return xd(e,t,[Ul,Ff]);case"instance_normalMatrix":return xd(e,t,[Fl,Uf]);case"mMatrix":return Jf([e,r],t,Ul);case"normalMatrix":return Jf([e,r],t,Fl);default:return ve(le("addModelSendData","unknow field:"+String(i),"","",""))}}function Ld(n){return ki(n[0])[0]}function Dd(n){return ki(n[0])[1]}function Rd(n){return ki(n[0])[2]}function kd(n,t){var r=n[3],e=n[1],i=n[0];switch(i){case"pMatrix":return dd([r,e],t,Dd);case"position":return function(n,t,r){return[t[0],t[1],t[2],Di([n[0],n[1],n[2],r,qf(n[3])],t[3]),t[4],t[5],t[6]]}([n[4],n[2],e,r],t,Rd);case"vMatrix":return dd([r,e],t,Ld);default:return ve(le("_addCameraSendData","unknow field:"+String(i),"","",""))}}function Pd(n,t){return Lh(n,t[1][1])}function Md(n,t){return kh(n,t[1][5])}function Nd(n,t){return Dh(n,t[1][3])}function Cd(n,t){return Sp(n,t[2][1])}function Id(n,t){return Lp(n,t[2][2])}function Bd(n,t){return Dp(n,t[2][3])}function Ud(n,t){return Rp(n,t[2][5])}function Fd(n,t){return kp(n,t[2][6])}function Od(n,t){var r=n[4],e=n[3],i=n[2],o=n[1],u=n[0],c=0;switch(u){case"shininess":return $f([r,i,o,e],t,Bd);case"diffuseColor":case"specularColor":c=1;break;case"diffuseMap":case"specularMap":c=2;break;default:return ve(le("_addLightMaterialSendData","unknow field:"+String(u),"","",""))}switch(c){case 1:return function(n,t,r){var e=t[3],i=t[2],o=t[1],u=t[0];switch(n){case"diffuseColor":return $f([u,o,i,e],r,Cd);case"specularColor":return $f([u,o,i,e],r,Id);default:throw[je.f,["HandleMaterialUniformConfigDataService.re",36,2]]}}(u,[r,i,o,e],t);case 2:return function(n,t,r){var e=t[3],i=t[2],o=t[1],u=t[0];switch(n){case"diffuseMap":return Qf([u,o,i,e],r,Ud);case"specularMap":return Qf([u,o,i,e],r,Fd);default:return ve(le("_addLightMaterialSendData","unknow field:"+String(n),"","",""))}}(u,[r,i,o,e],t)}}function Yd(n){return void 0!==n?Se(n):Ue(0)}function Gd(n,t,r){var e=t[8],i=r[5];return function(n,t,r){no(n,r,t)}(n,t[3],r[0]),function(n,t,r){no(n,r,t)}(n,t[4],r[1]),function(n,t,r){no(n,r,t)}(n,t[5],r[2]),function(n,t,r){no(n,r,t)}(n,t[6],r[3]),function(n,t,r){no(n,r,t)}(n,t[7],r[4]),Ad(n,e,i),Ad(n,e,i),function(n,t,r){no(n,r,t)}(n,t[9],r[6]),0}function Hd(n,t,r,e){var i=e[1],o=e[0],u=t[1],c=t[0];return bi(function(n,t){var e=t[2];if(Pi(e))return n;var a=Mi(e);return r([c,u,o,i],n,a[0])},[[],[],[],[],[],[],[]],n)}function Wd(n,t,r,e){var i=e[1],o=e[0],u=t[1],c=Yd(function(n,t){return io(n,t[1])}(u,i));return[Gd(u,o,r(t[2],n,t[0],[c,Yd(Of(u,o[2]))])),Ws(u,c,i)]}function Vd(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0];return Pi(r)?t:bi(function(n,t){var r=t[3],c=t[2],a=t[1],s=t[0];switch(r){case"basicMaterial":return function(n,t){var r=n[4],e=n[3],i=n[2],o=n[1],u=n[0];switch(u){case"alpha":return $f([r,i,o,e],t,Md);case"color":return $f([r,i,o,e],t,Pd);case"map":return Qf([r,i,o,e],t,Nd);default:return ve(le("_addBasicMaterialSendData","unknow field:"+String(u),"","",""))}}([a,Gs(o,s,i,u),s,c,e],n);case"camera":return kd([a,Gs(o,s,i,u),s,c,e],n);case"model":return Sd([a,Gs(o,s,i,u),s,c,e],n);default:return ve(le("_readUniforms","unknow from:"+String(r),"","",""))}},t,Mi(r))}function jd(n,t,r,e){return Hd(n,[t,r],Vd,[e[0],e[1]])}function zd(n,t,r){return Wd(n,[t[0],t[1],t[2]],jd,r)}function qd(n,t,r,e){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r),0}function Xd(n,t,r,e){var i=t[1];return function(n){return-1!==n}(i)?(n.bindBuffer(n.ARRAY_BUFFER,r),n.vertexAttribPointer(i,t[0],n.FLOAT,!1,0,0),Bf(n,i,e[0]),0):0}function Jd(n,t){return[t[0],Di([Ys(n[1],n[2],n[3],n[0]),4,function(n){return n<<4}],t[1])]}function Kd(n,t){return[Di([Ys(n[1],n[2],n[5],n[0]),If(n[4]),n[3],Xd],t[0]),t[1]]}function $d(n,t){return[Di([0,0,n,qd],t[0]),t[1]]}function Qd(n,t,r,e){var i=t[1],o=t[0];return bi(function(n,t){var u=t[2];if(Pi(u))return n;var c=Mi(u);return r([o,i,e],n,c[1])},[[],[]],n)}function Zd(n,t,r,e){return no(n,e[0],r[0]),no(n,e[1],r[1]),r}function n_(n,t,r,e){var i=e[1],o=n[1],u=Yd(function(n,t){return io(n,t[0])}(o,i));return[Zd(o,0,e[0],r(t,n[0],n[2],u)),Hs(o,u,i)]}function t_(n,t,r){var e=n[2],i=n[1],o=n[0];return Pi(r)?t:bi(function(n,t){var r=t[2],u=t[1],c=t[0];if(!Pi(c)&&!Pi(r)){var a=Mi(c),s=Mi(r);return u>=5?Jd([o,i,a,e],n):Kd([o,i,a,u,s,e],n)}return $d(u,n)},t,Mi(r))}function r_(n,t,r,e){return Qd(n,[t,r],t_,e)}function e_(n,t,r){return n_(n,t,r_,r)}function i_(n,t,r,e){return bd(n,[t[0],t[1]],[r,Td,e_,zd],[e[2],e[3],e[4],e[5],e[6],e[7]])}var o_="void main(void){\n",u_="}\n";function c_(n,t){return t.indexOf(n)>-1}function a_(n,t){var r=n[0],e=n[1],i=n[2],o=n[3],u=n[4],c=n[5],a=t[0],s=t[1],f=t[2],h=t[3],l=t[4],v=t[5];return n[0]=r+a,n[1]=e+s,n[2]=i+f,n[3]=o+h,n[4]=u+l,n[5]=c+v,n}function s_(n,t){return n[5]+t}function f_(n,t){var r=n[2];return r+"\n"+function(n,t,r,e){return n.reduce(function(n,i){var o=i[2];if(Pi(o))return n;var u=Mi(o)[0];return Pi(u)?n:n+Mi(u).filter(function(n){var i=n[0];return!(!c_(i,t)&&!c_(i,r))||c_(i,e)}).reduce(function(n,t){var r=function(n){return"float3"===n?"vec3":n}(t[2]);return n+"uniform "+String(r)+" "+String(t[0])+";\n"},"")},"")}(t,r,n[4],n[5])}function h_(n){return n[0]+(n[1]+(n[2]+(n[3]+(n[4]+n[5]))))}function l_(n,t,r,i){return bi(function(n,t){var o=t[1];return Pi(o)?n:bi(function(n,t){return function(n,t,r,i){var o=t[1],u=t[0],c=n[1],a=n[0];switch(u){case"fs":return[a,a_(c,Jp(o,i))];case"fs_function":return[a,a_(c,e.a(r,o))];case"vs":return[a_(a,Jp(o,i)),c];case"vs_function":return[a_(a,e.a(r,o)),c];default:return ve(le("buildGLSLSource","unknown glsl type: "+String(u),"","","name: "+String(o)))}}(n,[t[0],t[1]],r,i)},n,Mi(o))},[n[0],n[1]],t)}function v_(n,t,r){var e=r[0][0],i=["","","","","",""],o=["","","","","",""];i[5]=i[5]+o_,o[5]=o[5]+o_;var u=ki(e);i[0]=u+i[0],o[0]=u+o[0];var c=l_([i,o],n,t,r[1]),a=c[1],s=c[0];return s[5]=s_(s,u_),a[5]=s_(a,u_),s[2]="\n"+(function(n){return n.reduce(function(n,t){var r=t[2];if(Pi(r))return n;var e=Mi(r)[1];return Pi(e)?n:n+Mi(e).reduce(function(n,t){var r=t[2],e=t[0];if(!Pi(e)&&!Pi(r)){var i=Mi(e),o=Mi(r);return n+"attribute "+String(o)+" "+String(i)+";\n  "}return n},"")},"")}(n)+s[2]),s[2]=f_(s,n),a[2]=f_(a,n),[h_(s),h_(a)]}function p_(n,t){return Ri(t,n,function(t){return t[0]===n})}function d_(n,t){return he(function(n){return fe("staticBranchs",t)},yi(gi)),ve(le("_getMaterialShaderLibDataArrByStaticBranch","unknown name:"+String(n),"","",""))}function __(n,t,r){var e=t[1];return Di(p_(n[0]?n[1]?me.b(e,1):me.b(e,2):me.b(e,0),t[0]),r)}function g_(n,t,r,e){var i=t[0],o=n[3],u=n[1];switch(u){case"dynamic_branch":return function(n,t,r,e){var i=n[1],o=Ii(t[0],i,function(n){return Ni(n[0],i)}),u=r(n[0],o[1],t[2])?function(n){return n[2]}(o):function(n){return n[3]}(o);return Pi(u)?e:Di(p_(Mi(u),t[1]),e)}([n[0],o],[t[2],i,t[3]],r[1],e);case"group":return function(n,t,r,e){return e.concat(Ri(n,t,function(n){return n[0]===t})[1].map(function(n){return p_(n,r)}))}(n[2],o,i,e);case"static_branch":return r[0]([o,n[4],n[5]],[t[1],i],e);default:return he(function(n){return fe("shaderLibs",i)},yi(gi)),ve(le("_getMaterialShaderLibDataArrByType","unknown type_:"+String(u),"","",""))}}function y_(n,t,r,e){var i=r[1],o=r[0],u=t[2],c=t[0],a=c[2],s=c[1],f=c[0],h=n[2],l=n[1],v=n[0];return bi(function(n,t){var r=t[1],c=t[0];return Pi(c)?Di(p_(r,u),n):g_([v,Mi(c),a,r,l,h],[u,f,s,e],[o,i],n)},[],t[1])}function m_(n,t,r){var e=t[0],i=n[0];if("modelMatrix_instance"===i){var o=Ri(e,i,function(n){return n[0]===i});return __([n[1],n[2]],[t[1],o[1]],r)}return d_(i,e)}function w_(n,t,r){return"basic_has_map"===t?Mh(Dh(n,r[0][3])):ve(le("_isPass","unknown condition:"+String(t),"","",""))}function E_(n,t,r,e){return y_([n,t[0],t[1]],r,[m_,w_],e)}function b_(n){return Ri(n[3],"render_basic",function(n){return"render_basic"===n[0]})[1]}function T_(n,t,r){return vd(n,t,[i_,v_,sh,b_,E_],[r[0][2],r[1],r])}function x_(n,t,r){var e=r[0];return pd(n,t,T_,[e[0],e[1],r])}function A_(n){return ll((t=n[1],ki(t[0]))[0],n[3]);var t}function S_(n,t,r){return e.c(n[1],Wi(r[4]),[t,A_(r)],e.a(n[0],r)),r}function L_(n){return ki(n[2])}function D_(n){var t=n[5],r=n[6],e=n[7],i=n[8],o=n[9],u=n[10],c=ev(n);return[[c[6],c[7],iv(n),ov(n)],L_(n),t,r,e,i,o,u]}function R_(n,t,r){return Si(function(n){var e=zi(r),i=ju(t),o=i.basicMaterialData,u=i.bufferData.basicMaterialCount,c=i.bufferData.textureCountPerMaterial;return ji(r,S_([D_,x_],ev(e)[8],function(n,t,r,e){var i=cp(n,t,r),o=ev(e);return e[12]=[Te(i[0]),Te(i[1]),Te(i[2]),Te(i[3]),Te(i[4]),Te(i[5]),o[6],o[7],o[8]],e}(o.buffer,u,c,e))),t})}function k_(n,t){var r,e=function(n){return n.length}(n);return r=e,ei(function(n){return ri(_e("light count: "+String(r)+" <= max count: "+String(4),"not"),function(n){return di(0,r,4)})},yi(gi)),r}function P_(n){var t=function(n){return k_(n[1])}(n[0]),r=function(n){return k_(n[1])}(n[1]);return["","#define DIRECTION_LIGHTS_COUNT "+String(t)+"\n#define POINT_LIGHTS_COUNT "+String(r),"","","",""]}function M_(n,t){return"defineLightCount"===t?P_(n):ve(le("getHandle","unknown handle name: "+String(t),"","",""))}var N_=eo;function C_(n,t){return r=n,e=t[1],bo(qv(r),e);var r,e}function I_(n,t,r){var e=r[3],i=t[2],o=t[1],u=t[0];ei(function(n){return ri(_e("max buffer count === 4","is "+String(4)),function(n){return _i[0](4,4)})},yi(gi));var c=[["u_pointLights[0].position","u_pointLights[0].color","u_pointLights[0].intensity","u_pointLights[0].constant","u_pointLights[0].linear","u_pointLights[0].quadratic","u_pointLights[0].range"],["u_pointLights[1].position","u_pointLights[1].color","u_pointLights[1].intensity","u_pointLights[1].constant","u_pointLights[1].linear","u_pointLights[1].quadratic","u_pointLights[1].range"],["u_pointLights[2].position","u_pointLights[2].color","u_pointLights[2].intensity","u_pointLights[2].constant","u_pointLights[2].linear","u_pointLights[2].quadratic","u_pointLights[2].range"],["u_pointLights[3].position","u_pointLights[3].color","u_pointLights[3].intensity","u_pointLights[3].constant","u_pointLights[3].linear","u_pointLights[3].quadratic","u_pointLights[3].range"]],a=e[8];return Ei(function(t,r,e){var s=me.b(c,e),f=s[2],h=s[1],l=s[0];return jf(n,o,[l,Gs(u,l,i,n)],N_(r,a)),Vf(n,o,[h,Gs(u,h,i,n)],C_(r,t)),Hf(n,o,[f,Gs(u,f,i,n)],function(n,t){return r=n,t[2][r];var r}(r,t)),function(n,t,r,e){var i=r[6],o=r[5],u=r[4],c=r[3],a=t[3],s=t[2],f=t[1],h=t[0];return Hf(h,s,[c,Gs(f,c,a,h)],function(n,t){return r=n,t[3][r];var r}(n,e)),Hf(h,s,[u,Gs(f,u,a,h)],function(n,t){return r=n,t[4][r];var r}(n,e)),Hf(h,s,[o,Gs(f,o,a,h)],function(n,t){return r=n,t[5][r];var r}(n,e)),Hf(h,s,[i,Gs(f,i,a,h)],function(n,t){return r=n,t[6][r];var r}(n,e)),e}(r,[n,u,o,i],s,t)},e,e[7]),0}function B_(n,t,r){return Vf(n,t[1],["u_ambient",Gs(t[0],"u_ambient",t[2],n)],function(n){return n[0][0]}(r[1]))}var U_=eo;function F_(n,t){return r=n,e=t[1],bo(Mp(r),e);var r,e}function O_(n,t){return r=n,e=t[2],Eo(Np(r),e);var r,e}function Y_(n,t,r){var e=r[2],i=t[2],o=t[1],u=t[0];ei(function(n){return ri(_e("max buffer count === 4","is "+String(4)),function(n){return _i[0](4,4)})},yi(gi));var c=[["u_directionLights[0].direction","u_directionLights[0].color","u_directionLights[0].intensity"],["u_directionLights[1].direction","u_directionLights[1].color","u_directionLights[1].intensity"],["u_directionLights[2].direction","u_directionLights[2].color","u_directionLights[2].intensity"],["u_directionLights[3].direction","u_directionLights[3].color","u_directionLights[3].intensity"]],a=e[4];return Ei(function(t,r,e){var s=me.b(c,e),f=s[2],h=s[1],l=s[0];return jf(n,o,[l,Gs(u,l,i,n)],U_(r,a)),Vf(n,o,[h,Gs(u,h,i,n)],F_(r,t)),Hf(n,o,[f,Gs(u,f,i,n)],O_(r,t)),t},e,e[3]),0}function G_(n,t,r){var e=t[3],i=t[2],o=t[1],u=t[0];switch(n){case"ambientLight":return function(n,t){var r=n[0];return"send"===r?_d([n[1],n[2],n[3]],t,B_):ve(le("_addAmbientLightSendData","unknow field:"+String(r),"","",""))}([u,o,i,e],r);case"directionLight":return function(n,t){var r=n[0];return"send"===r?_d([n[1],n[2],n[3]],t,Y_):ve(le("_addDirectionLightSendData","unknow field:"+String(r),"","",""))}([u,o,i,e],r);case"pointLight":return function(n,t){var r=n[0];return"send"===r?_d([n[1],n[2],n[3]],t,I_):ve(le("_addPointLightSendData","unknow field:"+String(r),"","",""))}([u,o,i,e],r);default:throw[je.f,["HandleUniformConfigDataInitLightMaterialService.re",74,2]]}}function H_(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0];return Pi(r)?t:bi(function(n,t){var r=t[3],c=t[2],a=t[1],s=t[0],f=0;switch(r){case"camera":return kd([a,Gs(o,s,i,u),s,c,e],n);case"lightMaterial":return Od([a,Gs(o,s,i,u),s,c,e],n);case"model":return Sd([a,Gs(o,s,i,u),s,c,e],n);case"ambientLight":case"directionLight":case"pointLight":f=1;break;default:return ve(le("_readUniforms","unknow from:"+String(r),"","",""))}if(1===f)return G_(r,[a,o,e,i],n)},t,Mi(r))}function W_(n,t,r,e){return Hd(n,[t,r],H_,[e[0],e[1]])}function V_(n,t,r){return Wd(n,[t[0],t[1],t[2]],W_,r)}function j_(n,t,r){var e=n[2],i=n[1],o=n[0];return Pi(r)?t:bi(function(n,t){var r=t[2],u=t[1],c=t[0];if(!Pi(c)&&!Pi(r)){var a=Mi(c),s=Mi(r);return 4!==u?u>=5?Jd([o,i,a,e],n):Kd([o,i,a,u,s,e],n):function(n,t){return[t[0],Di([Ys(n[1],n[2],n[3],n[0]),3,function(n){return Yi(n-4|0,12)+64|0}],t[1])]}([o,i,a,e],n)}return $d(u,n)},t,Mi(r))}function z_(n,t,r,e){return Qd(n,[t,r],j_,e)}function q_(n,t,r){return n_(n,t,z_,r)}function X_(n,t,r,e){var i=[e[1],e[2]];return bd(n,[t[0],t[1]],[r,function(n){return M_(i,n)},q_,V_],[e[4],e[5],e[6],e[7],e[8],e[9]])}function J_(n,t,r){var e=t[0],i=n[0],o=0;switch(i){case"modelMatrix_instance":case"normalMatrix_instance":o=1;break;default:return d_(i,e)}if(1===o){var u=Ri(e,i,function(n){return n[0]===i});return __([n[1],n[2]],[t[1],u[1]],r)}}function K_(n,t,r){var e=r[0];switch(t){case"has_diffuse_map":return Mh(Rp(n,e[3]));case"has_specular_map":return Mh(kp(n,e[4]));case"light_has_map":return!!Mh(Rp(n,e[3]))||Mh(kp(n,e[4]));default:return ve(le("_isPass","unknown condition:"+String(t),"","",""))}}function $_(n,t,r,e){return y_([n,t[0],t[1]],r,[J_,K_],e)}function Q_(n){return Ri(n[3],"front_render_light",function(n){return"front_render_light"===n[0]})[1]}function Z_(n,t,r){return vd(n,t,[X_,v_,sh,Q_,$_],[r[0][2],r[3],r])}function ng(n,t,r){var e=r[0];return pd(n,t,Z_,[e[0],e[1],r])}function tg(n){var t=n[5],r=n[6],e=n[7],i=n[8],o=n[9],u=n[10],c=vv(n),a=Ql(n),s=av(n);return[[s[7],s[8],sv(n),fv(n),hv(n)],[c[0],pv(c)],[a[0],nv(a)],L_(n),t,r,e,i,o,u]}function rg(n,t,r){return Si(function(n){var e=zi(r),i=ju(t),o=i.lightMaterialData,u=i.bufferData.lightMaterialCount,c=i.bufferData.textureCountPerMaterial;return ji(r,S_([tg,ng],av(e)[9],function(n,t,r,e){var i=Ap(n,t,r),o=av(e);return e[13]=[Te(i[0]),Te(i[1]),Te(i[2]),Te(i[3]),Te(i[4]),Te(i[5]),Te(i[6]),o[7],o[8],o[9]],e}(o.buffer,u,c,e))),t})}function eg(n,t,r){return Si(function(n){var e=zi(r),i=e[1],o=ju(t).directionLightData,u=o.buffer,c=oa(i);return ji(r,function(n,t){var r=vv(t);return t[19]=[r[0],r[1],n.renderLightArr,r[3],r[4]],t}(o,function(n,t,r,e){var i=Up(n,t);return e[19]=[r,void 0,void 0,i[0],i[1]],e}(u,c,o.index,e))),t})}function ig(n,t,r){return Si(function(n){var e=zi(r),i=function(n,t){var r=me.a(t);return r[0]=[[n]],r}(ju(t).ambientLightData.color,e);return ji(r,i),t})}function og(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).renderConfigData;return e[2]=function(n){return[n[0],n[1]]}([JSON.parse(i.shaders),JSON.parse(i.shaderLibs)]),ji(r,e),t})}function ug(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).workerDetectData;return e[25]=[i.isUseWorker],ji(r,e),t})}function cg(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).browserDetectData;return e[26]=[i.browser],ji(r,e),t})}function ag(n,t){return Si(function(r){var e=zi(t),i=ju(n).initData.textureData;return ji(t,function(n,t){var r=ks(t),e=ki(r[10]);bi(function(n,t){return Ha(t[0],t[1],n)},e,n);var i=me.a(t);return i[16]=[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],e,r[11],r[12]],i}(i.arrayBufferViewSourceTextureData.needAddedSourceArray,e))})}function sg(n,t){return Si(function(r){var e=zi(t),i=ju(n).initData.textureData,o=Ya(e),u=ks(e);return e[15]=[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],Zc(Wi(e[4]),i.basicSourceTextureData.needInitedTextureIndexArray,o[9]),o[10]],e[16]=[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],Zc(Wi(e[4]),i.arrayBufferViewSourceTextureData.needInitedTextureIndexArray,u[11]),u[12]],e})}function fg(n,t,r){var e=zi(r),i=ju(t).initData.textureData;return Cr(Fn(function(n){return ji(r,n),0},xi([$a(i.basicSourceTextureData.needAddedImageDataArray,e),ag(t,r),sg(t,r)])).then(function(n){return Promise.resolve(t)}))}function hg(n,t,r){return Si(function(i){var o=zi(r);return ye({operateType:vc(n),customData:Tv(o)},e.a(ge,0)),t})}function lg(n,t,r,e){var i=io(n,r);return void 0!==i&&Sl(Se(i),t,e[0]),Lc(n,r)}var vg=Lc,pg=Lc;function dg(n){return(t=n,ki(t[7]))[0];var t}function _g(n,t,r){return Si(function(n){var e=zi(r),i=e[1],o=e[11],u=e[22],c=ju(t),a=bi(function(n,t){return[lg(t,dg(i),n[0],u),vg(t,n[1]),pg(t,n[2])]},[o[4],o[3],o[5]],c.sourceInstanceNeedDisposeVboBufferArr);return e[11]=[o[0],o[1],o[2],a[1],a[0],a[2]],ji(r,e),t})}function gg(n,t,r){return Si(function(n){var e=zi(r),i=ju(t).directionLightData,o=vv(e);return e[19]=[i.index,i.directionMap,i.renderLightArr,o[3],o[4]],ji(r,e),t})}function yg(n,t,r){return Si(function(n){var e=zi(r),i=ju(t);i.initData.materialData;var o=i.initData.materialData.basicMaterialData,u=i.initData.materialData.lightMaterialData,c=Wi(e[4]),a=A_(e);return ji(r,function(n,t,r,e){return av(e),bi(function(t,e){return Z_(n,[e[0],e[1],r],t)},tg(e),t.materialDataForWorkerInit),e}(c,u,a,function(n,t,r,e){return ev(e),bi(function(t,e){return T_(n,[e[0],e[1],r],t)},D_(e),t.materialDataForWorkerInit),e}(c,o,a,e))),t})}function mg(n,t,r){return Si(function(r){return ye({operateType:vc(n)},e.a(ge,0)),t})}var wg=mg,Eg=mg;function bg(n,t){return r=t[3],co(function(t,r,e){var i=$s(n,e,t);return bi(function(t,r){var e=r[0];return Vs(e)&&r[2](n,e,r[1](t)),t},nh(i),r),i},t,r[5]);var r}function Tg(n,t){return r=t[3],co(function(t,r,e){var i=$s(n,e,t);return bi(function(t,r){return r[4](n,r[0],[r[1],r[2]],r[3](t)),t},nh(i),r),i},t,r[6]);var r}function xg(n,t){return r=t[3],co(function(t,r,e){var i=$s(n,e,t);return bi(function(t,r){return r[3](n,[r[0],r[1],r[2]],t),t},th(i),r),i},t,r[7]);var r}function Ag(n){if(!Ze(n[6]))return n;var t=Wi(n[18]);return xg(t,Tg(t,bg(t,n)))}function Sg(n,t,r){return Si(function(n){var e=zi(r);return Is(ju(t))?(Ag(yv(e)),ji(r,e),t):t})}function Lg(n,t,r){return Si(function(n){var e,i=zi(r);return i[8]=[(e=i[8])[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],void 0,void 0],ji(r,i),t})}var Dg=mg;function Rg(n,t,r){return Si(function(n){var e=zi(r),i=ju(t);if(Is(i)){var o=i.renderData.basic,u=Jc(o.buffer,o.bufferCount);return e[21][0]=[o.renderIndexArray,u[0],u[1],u[2],u[3],u[4]],ji(r,e),t}return t})}function kg(n,t,r){return Si(function(n){var e=zi(r),i=ju(t);if(Is(i)){var o=i.renderData.light,u=Jc(o.buffer,o.bufferCount);return e[21][1]=[o.renderIndexArray,u[0],u[1],u[2],u[3],u[4]],ji(r,e),t}return t})}function Pg(n){return Gi([["send_finish_send_job_data",Eg],[["get_init_render_data",hd],[["get_isDebug_data",zp],[["get_renderConfig_data",og],[["get_setting_data",qp],[["get_material_data",nd],[["get_browserDetect_data",cg],[["get_workerDetect_data",ug],[["preget_glslData",$p],[["create_gl",zu],[["set_viewport",Gv],[["detect_gl",$u],[["preget_glslData",$p],[["init_state",lc],[["init_transform",Wp],[["init_instance",jv],[["init_geometry",Wv],[["init_meshRenderer",ad],[["init_basic_material",R_],[["init_direction_light",eg],[["init_point_light",Xp],[["init_light_material",rg],[["init_texture",Cs],[["init_imgui",hc],[["send_finish_init_render_data",Dg],[["get_render_data",Hp],[["get_instance_data",Zp],[["get_geometry_data",Qp],[["get_ambient_light_data",ig],[["get_direction_light_data",gg],[["get_point_light_data",ld],[["init_material_for_render",yg],[["init_texture_for_render",fg],[["clear_color",Ec],[["clear_buffer",Uc],[["clear_last_send_component",Lg],[["create_basic_render_object_typeArray",Rg],[["create_light_render_object_typeArray",kg],[["get_custom_data",Op],[["get_camera_data",Fp],[["send_uniform_shader_data",Sg],[["render_basic",mv],[["front_render_light",cd],[["render_imgui",Yv],[["commit",qi],[["send_finish_render_data",hg],[["get_dispose_data",jp],[["dispose_vbo",Mc],[["dispose_sourceInstance",_g],[["dispose_texture",Vp],[["send_finish_dispose_data",wg],0]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]])}function Mg(n,t){var r=Fe(n,t);return void 0!==r?Se(r):function(n,t){return ve(le("get no job","can't find job handle function whose job name is "+String(n),"","make sure that the job name defined in config record be correctly","jobHandleMap:"+oe(t)+"\nname: "+String(n)))}(n,t)}var Ng=Mg;function Cg(n,t,r){return de(pe("render worker error",String(n)+"","","","fileName:"+String(t)+"\n        lineno:"+String(r)))}function Ig(n){return ji(Fi,[[[[0,0,0]]],[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],void 0,[void 0,void 0,void 0,void 0],[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],[0,Ue(0),Ue(0),ro(0)],[ro(0),void 0],[void 0],[ro(0),ro(0),ro(0),ro(0),ro(0),ro(0),ro(0),ro(0),ro(0),ro(0),[],void 0,void 0],[ro(0),ro(0)],[Be("webgl1_basic_map_fragment",Kp(["\n\n","\n\n"],"\nvarying vec2 v_mapCoord0;\n",["\n\n","\n\n"],"\nvec4 texelColor = texture2D(u_mapSampler, v_mapCoord0);\n\n    vec4 totalColor = vec4(texelColor.rgb * u_color, texelColor.a * u_alpha);\n"),Be("webgl1_basic_map_vertex",Kp(["\n\n","\n\n"],"\nvarying vec2 v_mapCoord0;\n",["\n\n","\n\n"],"\n//    vec2 sourceTexCoord0 = a_texCoord * u_map0SourceRegion.zw + u_map0SourceRegion.xy;\n//\n//    v_mapCoord0 = sourceTexCoord0 * u_map0RepeatRegion.zw + u_map0RepeatRegion.xy;\n\n    v_mapCoord0 = a_texCoord;\n"),Be("webgl1_no_basic_map_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nvec4 totalColor = vec4(u_color, u_alpha);\n"),Be("webgl1_basic_end_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = vec4(totalColor.rgb, totalColor.a);\n"),Be("webgl1_basic_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),Be("common_define",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Be("common_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Be("common_function",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n// mat2 transpose(mat2 m) {\n//   return mat2(  m[0][0], m[1][0],   // new col 0\n//                 m[0][1], m[1][1]    // new col 1\n//              );\n//   }\n\n// mat3 transpose(mat3 m) {\n//   return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\n//                 m[0][1], m[1][1], m[2][1],  // new col 1\n//                 m[0][2], m[1][2], m[2][2]   // new col 1\n//              );\n//   }\n\n//bool isRenderArrayEmpty(int isRenderArrayEmpty){\n//  return isRenderArrayEmpty == 1;\n//}\n"],"\n\n"),Be("common_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n// mat2 transpose(mat2 m) {\n//   return mat2(  m[0][0], m[1][0],   // new col 0\n//                 m[0][1], m[1][1]    // new col 1\n//              );\n//   }\n\n// mat3 transpose(mat3 m) {\n//   return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\n//                 m[0][1], m[1][1], m[2][1],  // new col 1\n//                 m[0][2], m[1][2], m[2][2]   // new col 1\n//              );\n//   }\n\n//bool isRenderArrayEmpty(int isRenderArrayEmpty){\n//  return isRenderArrayEmpty == 1;\n//}\n"],"\n\n"),Be("highp_fragment",Kp(["\nprecision highp float;\nprecision highp int;\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Be("lowp_fragment",Kp(["\nprecision lowp float;\nprecision lowp int;\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Be("mediump_fragment",Kp(["\nprecision mediump float;\nprecision mediump int;\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Be("webgl1_setPos_mvp",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),Be("webgl1_rotation_gizmo_circle_for_editor_fragment",Kp(["\n\n","\n\n"],"\nvarying vec3 v_position;\n",["\nbool isAngleBetweenVertexToCenterAndVertexToCameraLessThan90(vec3 vertexPos, vec3 cameraPosInLocalCoordSystem);\n","\nbool isAngleBetweenVertexToCenterAndVertexToCameraLessThan90(vec3 vertexPos, vec3 cameraPosInLocalCoordSystem){\nreturn dot(\nnormalize(-vertexPos),\ncameraPosInLocalCoordSystem - vertexPos\n) >= 0.0;\n}\n"],"\nif(isAngleBetweenVertexToCenterAndVertexToCameraLessThan90(v_position, u_cameraPosInLocalCoordSystem)){\n    discard;\n}\n\ngl_FragColor = vec4(u_color, u_alpha);\n"),Be("webgl1_rotation_gizmo_circle_for_editor_vertex",Kp(["\n\n","\n\n"],"\nvarying vec3 v_position;\n",["\n\n","\n\n"],"\nv_position = a_position;\n\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),Be("modelMatrix_batch_instance_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat4 mMatrix = u_mMatrix;\n"),Be("normalMatrix_batch_instance_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat3 normalMatrix = u_normalMatrix;\n"),Be("modelMatrix_hardware_instance_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat4 mMatrix = mat4(a_mVec4_0, a_mVec4_1, a_mVec4_2, a_mVec4_3);\n"),Be("normalMatrix_hardware_instance_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat3 normalMatrix = mat3(a_normalVec3_0, a_normalVec3_1, a_normalVec3_2);\n"),Be("modelMatrix_noInstance_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat4 mMatrix = u_mMatrix;\n"),Be("normalMatrix_noInstance_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat3 normalMatrix = u_normalMatrix;\n"),Be("webgl1_diffuse_map_fragment",Kp(["\n\n","\n\n"],"\nvarying vec2 v_diffuseMapTexCoord;\n",["\n\n","\nvec4 getMaterialDiffuse() {\n        vec4 texelColor = texture2D(u_diffuseMapSampler, v_diffuseMapTexCoord);\n\n        return vec4(texelColor.rgb * u_diffuse, texelColor.a);\n    }\n"],"\n\n"),Be("webgl1_diffuse_map_vertex",Kp(["\n\n","\n\n"],"\nvarying vec2 v_diffuseMapTexCoord;\n",["\n\n","\n\n"],"\n//TODO optimize(combine, reduce compute numbers)\n    //TODO BasicTexture extract textureMatrix\n//    vec2 sourceTexCoord = a_texCoord * u_diffuseMapSourceRegion.zw + u_diffuseMapSourceRegion.xy;\n//    v_diffuseMapTexCoord = sourceTexCoord * u_diffuseMapRepeatRegion.zw + u_diffuseMapRepeatRegion.xy;\n\n    v_diffuseMapTexCoord = a_texCoord;\n"),Be("webgl1_no_diffuse_map_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\nvec4 getMaterialDiffuse() {\n        return vec4(u_diffuse, 1.0);\n    }\n"],"\n\n"),Be("webgl1_no_emission_map_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\nvec3 getMaterialEmission() {\n        return vec3(0.0);\n    }\n"],"\n\n"),Be("webgl1_no_light_map_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\nvec3 getMaterialLight() {\n        return vec3(0.0);\n    }\n"],"\n\n"),Be("webgl1_no_normal_map_fragment",Kp(["\n\n","\n\n"],"\nvarying vec3 v_normal;\n",["\nvec3 getNormal();\n","\nvec3 getNormal(){\n    return v_normal;\n}\n\n#if POINT_LIGHTS_COUNT > 0\nvec3 getPointLightDir(int index){\n    //workaround '[] : Index expression must be constant' error\n    for (int x = 0; x <= POINT_LIGHTS_COUNT; x++) {\n        if(x == index){\n            return getPointLightDirByLightPos(u_pointLights[x].position);\n        }\n    }\n    /*!\n    solve error in window7 chrome/firefox:\n    not all control paths return a value.\n    failed to create d3d shaders\n    */\n    return vec3(0.0);\n}\n#endif\n\n#if DIRECTION_LIGHTS_COUNT > 0\nvec3 getDirectionLightDir(int index){\n    //workaround '[] : Index expression must be constant' error\n    for (int x = 0; x <= DIRECTION_LIGHTS_COUNT; x++) {\n        if(x == index){\n            return getDirectionLightDir(u_directionLights[x].direction);\n        }\n    }\n\n    /*!\n    solve error in window7 chrome/firefox:\n    not all control paths return a value.\n    failed to create d3d shaders\n    */\n    return vec3(0.0);\n}\n#endif\n\n\nvec3 getViewDir(){\n    return normalize(u_cameraPos - v_worldPosition);\n}\n"],"\n\n"),Be("webgl1_no_normal_map_vertex",Kp(["\n\n","\n\n"],"\nvarying vec3 v_normal;\n",["\n\n","\n\n"],"\nv_normal = normalize(normalMatrix * a_normal);\n"),Be("webgl1_no_shadow_map_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\nfloat getShadowVisibility() {\n        return 1.0;\n    }\n"],"\n\n"),Be("webgl1_no_specular_map_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\nfloat getSpecularStrength() {\n        return 1.0;\n    }\n"],"\n\n"),Be("webgl1_specular_map_fragment",Kp(["\n\n","\n\n"],"\nvarying vec2 v_specularMapTexCoord;\n",["\n\n","\nfloat getSpecularStrength() {\n        return texture2D(u_specularMapSampler, v_specularMapTexCoord).r;\n    }\n"],"\n\n"),Be("webgl1_specular_map_vertex",Kp(["\n\n","\n\n"],"\nvarying vec2 v_specularMapTexCoord;\n",["\n\n","\n\n"],"\nv_specularMapTexCoord = a_texCoord;\n"),Be("webgl1_ambientLight_fragment",Kp(["\n\n","\n\n"],"\nuniform vec3 u_ambient;\n",["\n\n","\n\n"],"\n\n"),Be("webgl1_frontLight_common_fragment",Kp(["\n\n","\n\n"],"\nvarying vec3 v_worldPosition;\n\n#if POINT_LIGHTS_COUNT > 0\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float intensity;\n\n    float range;\n    float constant;\n    float linear;\n    float quadratic;\n};\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\n\n#endif\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\nstruct DirectionLight {\n    vec3 direction;\n\n    float intensity;\n\n    vec3 color;\n};\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\n#endif\n",["\nvec3 getDirectionLightDir(vec3 lightDirection);\nvec3 getPointLightDirByLightPos(vec3 lightPos);\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\n","\nvec3 getDirectionLightDir(vec3 lightDirection){\n    lightDirection =  normalize(lightDirection);\n\n    return -lightDirection;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos){\n    return lightPos - v_worldPosition;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\n    return lightPos - worldPosition;\n}\n"],"\n\n"),Be("webgl1_frontLight_common_vertex",Kp(["\n\n","\n\n"],"\nvarying vec3 v_worldPosition;\n\n#if POINT_LIGHTS_COUNT > 0\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float intensity;\n\n    float range;\n    float constant;\n    float linear;\n    float quadratic;\n};\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\n\n#endif\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\nstruct DirectionLight {\n    vec3 direction;\n\n    float intensity;\n\n    vec3 color;\n};\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\n#endif\n",["\nvec3 getDirectionLightDir(vec3 lightDirection);\nvec3 getPointLightDirByLightPos(vec3 lightPos);\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\n","\nvec3 getDirectionLightDir(vec3 lightDirection){\n    lightDirection =  normalize(lightDirection);\n\n    return -lightDirection;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos){\n    return lightPos - v_worldPosition;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\n    return lightPos - worldPosition;\n}\n"],"\n\n"),Be("webgl1_frontLight_common",Kp(["\n\n","\n\n"],"\nvarying vec3 v_worldPosition;\n\n#if POINT_LIGHTS_COUNT > 0\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float intensity;\n\n    float range;\n    float constant;\n    float linear;\n    float quadratic;\n};\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\n\n#endif\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\nstruct DirectionLight {\n    vec3 direction;\n\n    float intensity;\n\n    vec3 color;\n};\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\n#endif\n",["\nvec3 getDirectionLightDir(vec3 lightDirection);\nvec3 getPointLightDirByLightPos(vec3 lightPos);\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\n","\nvec3 getDirectionLightDir(vec3 lightDirection){\n    lightDirection =  normalize(lightDirection);\n\n    return -lightDirection;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos){\n    return lightPos - v_worldPosition;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\n    return lightPos - worldPosition;\n}\n"],"\n\n"),Be("webgl1_frontLight_end_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = totalColor;\n"),Be("webgl1_frontLight_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\nfloat getBlinnShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\n        vec3 halfAngle = normalize(lightDir + viewDir);\n\n        float blinnTerm = dot(normal, halfAngle);\n\n        blinnTerm = clamp(blinnTerm, 0.0, 1.0);\n        blinnTerm = dotResultBetweenNormAndLight != 0.0 ? blinnTerm : 0.0;\n        blinnTerm = pow(blinnTerm, shininess);\n\n        return blinnTerm;\n}\n\n// float getPhongShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\n//         vec3 reflectDir = reflect(-lightDir, normal);\n//         float phongTerm = dot(viewDir, reflectDir);\n\n//         phongTerm = clamp(phongTerm, 0.0, 1.0);\n//         phongTerm = dotResultBetweenNormAndLight != 0.0 ? phongTerm : 0.0;\n//         phongTerm = pow(phongTerm, shininess);\n\n//         return phongTerm;\n// }\n\nvec3 calcLight(vec3 lightDir, vec3 color, float intensity, float attenuation, vec3 normal, vec3 viewDir, vec3 materialDiffuse)\n{\n        vec3 materialSpecular = u_specular;\n        vec3 materialEmission = getMaterialEmission();\n\n        float specularStrength = getSpecularStrength();\n\n        float dotResultBetweenNormAndLight = dot(normal, lightDir);\n        float diff = max(dotResultBetweenNormAndLight, 0.0);\n\n        vec3 emissionColor = materialEmission;\n\n\n\n        // if(u_lightModel == 3){\n        //     return emissionColor + ambientColor;\n        // }\n\n        vec3 diffuseColor = color * materialDiffuse.rgb * diff * intensity;\n\n        float spec = 0.0;\n\n        // if(u_lightModel == 2){\n        //         spec = getPhongShininess(u_shininess, normal, lightDir, viewDir, diff);\n        // }\n        // else if(u_lightModel == 1){\n        //         spec = getBlinnShininess(u_shininess, normal, lightDir, viewDir, diff);\n        // }\n\n        spec = getBlinnShininess(u_shininess, normal, lightDir, viewDir, diff);\n\n\n        vec3 specularColor = spec * materialSpecular * specularStrength * intensity;\n\n       return vec3(emissionColor + attenuation * (diffuseColor.rgb + specularColor));\n}\n\n\n\n\n#if POINT_LIGHTS_COUNT > 0\n        vec3 calcPointLight(vec3 lightDir, PointLight light, vec3 normal, vec3 viewDir, vec3 materialDiffuse)\n{\n        //lightDir is not normalize computing distance\n        float distance = length(lightDir);\n\n        float attenuation = 0.0;\n\n        if(distance < light.range)\n        {\n            attenuation = 1.0 / (light.constant + light.linear * distance + light.quadratic * (distance * distance));\n        }\n\n        lightDir = normalize(lightDir);\n\n        return calcLight(lightDir, light.color, light.intensity, attenuation, normal, viewDir, materialDiffuse);\n}\n#endif\n\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\n        vec3 calcDirectionLight(vec3 lightDir, DirectionLight light, vec3 normal, vec3 viewDir, vec3 materialDiffuse)\n{\n        float attenuation = 1.0;\n\n        // lightDir = normalize(lightDir);\n\n        return calcLight(lightDir, light.color, light.intensity, attenuation, normal, viewDir, materialDiffuse);\n}\n#endif\n\n\n\nvec4 calcTotalLight(vec3 norm, vec3 viewDir){\n    vec3 totalLight = vec3(0.0, 0.0, 0.0);\n\n    vec4 materialDiffuse = getMaterialDiffuse();\n\n    float alpha = materialDiffuse.a;\n    vec3 materialDiffuseRGB = materialDiffuse.rgb;\n\n\n    #if (DIRECTION_LIGHTS_COUNT == 0 && POINT_LIGHTS_COUNT == 0 )\n        return vec4(u_ambient * materialDiffuseRGB, alpha);\n    #endif\n\n\n    #if POINT_LIGHTS_COUNT > 0\n                for(int i = 0; i < POINT_LIGHTS_COUNT; i++){\n                totalLight += calcPointLight(getPointLightDir(i), u_pointLights[i], norm, viewDir, materialDiffuseRGB);\n        }\n    #endif\n\n    #if DIRECTION_LIGHTS_COUNT > 0\n                for(int i = 0; i < DIRECTION_LIGHTS_COUNT; i++){\n                totalLight += calcDirectionLight(getDirectionLightDir(i), u_directionLights[i], norm, viewDir, materialDiffuseRGB);\n        }\n    #endif\n\n        totalLight += u_ambient * materialDiffuseRGB;\n\n        return vec4(totalLight, alpha);\n}\n"],"\nvec3 normal = normalize(getNormal());\n\n// #ifdef BOTH_SIdE\n// normal = normal * (-1.0 + 2.0 * float(gl_FrontFacing));\n// #endif\n\nvec3 viewDir = normalize(getViewDir());\n\nvec4 totalColor = calcTotalLight(normal, viewDir);\n\n// totalColor.a *= u_opacity;\n\ntotalColor.rgb = totalColor.rgb * getShadowVisibility();\n"),Be("webgl1_frontLight_setWorldPosition_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nv_worldPosition = vec3(mMatrix * vec4(a_position, 1.0));\n"),Be("webgl1_frontLight_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * vec4(v_worldPosition, 1.0);\n"),Be("webgl1_outline_expand_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = vec4(u_outlineColor, 1.0);\n"),Be("webgl1_outline_expand_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nvec3 position = a_position.xyz + a_normal.xyz * 0.08;\n\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(position, 1.0);\n"),Be("webgl1_outline_origin_fragment",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = vec4(1.0);\n"),Be("webgl1_outline_origin_vertex",Kp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),Be("webgl1_skybox_fragment",Kp(["\n\n","\n\n"],"\nvarying vec3 v_texCoord;\n",["\n\n","\n\n"],"\ngl_FragColor = textureCube(u_skyboxCubeMapSampler, vec3(-v_texCoord.x, v_texCoord.y, v_texCoord.z));\n"),Be("webgl1_skybox_vertex",Kp(["\n\n","\n\n"],"\nvarying vec3 v_texCoord;\n",["\n\n","\n\n"],"\nv_texCoord = a_position;\n\nvec4 pos = u_pMatrix * u_skyboxVMatrix * vec4(a_position, 1.0);\ngl_Position = pos.xyww;\n"),Ue(0)))))))))))))))))))))))))))))))))))))))))))))))],[void 0,void 0,void 0,ro(0),ro(0),ro(0)],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[void 0,void 0,void 0],[ro(0),ro(0)],[ro(0),ro(0),ro(0),ro(0),ro(0),[],[],[]],[new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),new Float32Array([1,0,0,1,0,0,1,0,0]),[]],void 0,void 0,ic(0),[{label:kv,image:Pv,button:Mv,box:Nv,radioButton:Cv,checkbox:Iv,sliderInt:Bv,sliderFloat:Uv,beginGroup:Fv,endGroup:Ov,getCustomDataInRenderWorker:Ev,setCustomDataInRenderWorker:bv,getCustomDataFromMainWorkerToRenderWorker:Av,getCustomDataFromRenderWorkerToMainWorker:Tv,setCustomDataFromRenderWorkerToMainWorker:xv}],[-1,-1,-1],[[[1,1,1],[]],[void 0,!0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]]]),0}On(Rt(function(n){return Pt((Ig(),Ui(JSON.parse(n.data.pipelineJobs),JSON.parse(n.data.jobs),[Pg,Ng],Fi)))},Qt(function(n){return"SEND_JOB_DATA"===n.data.operateType},Tn("message",e.a(ge,0))))),r.d(t,"useThisToImportRenderWorkerSystem",function(){return Ug}),r.d(t,"defineOnError",function(){return Bg});var Bg=function(n){onerror=(n,t,r)=>{Cg(n,t,r)}};e.a(Bg,0);var Ug=Cg}])});