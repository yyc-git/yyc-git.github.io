"use strict";(self.webpackChunk_3dprgrampattern_website=self.webpackChunk_3dprgrampattern_website||[]).push([[105],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),m=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=m(e.components);return a.createElement(i.Provider,{value:t},e.children)},s="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,o=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),s=m(n),d=l,k=s["".concat(i,".").concat(d)]||s[d]||c[d]||o;return n?a.createElement(k,r(r({ref:t},u),{},{components:n})):a.createElement(k,r({ref:t},u))}));function k(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=n.length,r=new Array(o);r[0]=d;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[s]="string"==typeof e?e:l,r[1]=p;for(var m=2;m<o;m++)r[m]=n[m];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1112:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>r,default:()=>s,frontMatter:()=>o,metadata:()=>p,toc:()=>i});var a=n(7462),l=(n(7294),n(3905));const o={sidebar_position:4},r="\u7b2c5\u7ae0 ECS\u6a21\u5f0f",p={unversionedId:"ECS\u6a21\u5f0f/ECS\u6a21\u5f0f",id:"ECS\u6a21\u5f0f/ECS\u6a21\u5f0f",title:"\u7b2c5\u7ae0 ECS\u6a21\u5f0f",description:"\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4",source:"@site/docs/ECS\u6a21\u5f0f/ECS\u6a21\u5f0f.md",sourceDirName:"ECS\u6a21\u5f0f",slug:"/ECS\u6a21\u5f0f/",permalink:"/3dProgramPattern/docs/ECS\u6a21\u5f0f/",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ECS\u6a21\u5f0f/ECS\u6a21\u5f0f.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docs",previous:{title:"\u7b2c4\u7ae0 \u7ba1\u9053\u6a21\u5f0f",permalink:"/3dProgramPattern/docs/\u7ba1\u9053\u6a21\u5f0f/"},next:{title:"\u7b2c6\u7ae0 \u591a\u7ebf\u7a0b\u6a21\u5f0f",permalink:"/3dProgramPattern/docs/\u591a\u7ebf\u7a0b\u6a21\u5f0f/"}},i=[{value:"\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4",id:"\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4",children:[{value:"\u9700\u6c42",id:"\u9700\u6c42",children:[],level:3},{value:"\u5b9e\u73b0\u601d\u8def",id:"\u5b9e\u73b0\u601d\u8def",children:[],level:3},{value:"\u7ed9\u51faUML",id:"\u7ed9\u51fauml",children:[],level:3},{value:"\u7ed9\u51fa\u4ee3\u7801",id:"\u7ed9\u51fa\u4ee3\u7801",children:[{value:"Client\u7684\u4ee3\u7801",id:"client\u7684\u4ee3\u7801",children:[],level:4},{value:"\u521b\u5efaWorldState\u7684\u4ee3\u7801",id:"\u521b\u5efaworldstate\u7684\u4ee3\u7801",children:[],level:4},{value:"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801",id:"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801",children:[],level:4},{value:"\u666e\u901a\u82f1\u96c4\u79fb\u52a8\u7684\u4ee3\u7801",id:"\u666e\u901a\u82f1\u96c4\u79fb\u52a8\u7684\u4ee3\u7801",children:[],level:4},{value:"\u8d85\u7ea7\u82f1\u96c4\u79fb\u52a8\u548c\u98de\u884c\u7684\u4ee3\u7801",id:"\u8d85\u7ea7\u82f1\u96c4\u79fb\u52a8\u548c\u98de\u884c\u7684\u4ee3\u7801",children:[],level:4},{value:"\u521d\u59cb\u5316\u7684\u4ee3\u7801",id:"\u521d\u59cb\u5316\u7684\u4ee3\u7801",children:[],level:4},{value:"\u4e3b\u5faa\u73af\u7684\u4ee3\u7801",id:"\u4e3b\u5faa\u73af\u7684\u4ee3\u7801",children:[],level:4},{value:"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801",id:"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801",children:[],level:4},{value:"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801",id:"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801",children:[],level:4},{value:"\u8fd0\u884cClient\u7684\u4ee3\u7801",id:"\u8fd0\u884cclient\u7684\u4ee3\u7801",children:[],level:4}],level:3},{value:"\u63d0\u51fa\u95ee\u9898",id:"\u63d0\u51fa\u95ee\u9898",children:[],level:3}],level:2},{value:"\u57fa\u4e8e\u7ec4\u4ef6\u5316\u7684\u601d\u60f3\u6539\u8fdb",id:"\u57fa\u4e8e\u7ec4\u4ef6\u5316\u7684\u601d\u60f3\u6539\u8fdb",children:[{value:"\u6982\u8ff0\u89e3\u51b3\u65b9\u6848",id:"\u6982\u8ff0\u89e3\u51b3\u65b9\u6848",children:[],level:3},{value:"\u7ed9\u51faUML",id:"\u7ed9\u51fauml-1",children:[],level:3},{value:"\u7ed3\u5408UML\u56fe\uff0c\u63cf\u8ff0\u5982\u4f55\u5177\u4f53\u5730\u89e3\u51b3\u95ee\u9898",id:"\u7ed3\u5408uml\u56fe\u63cf\u8ff0\u5982\u4f55\u5177\u4f53\u5730\u89e3\u51b3\u95ee\u9898",children:[],level:3},{value:"\u7ed9\u51fa\u4ee3\u7801",id:"\u7ed9\u51fa\u4ee3\u7801-1",children:[{value:"Client\u7684\u4ee3\u7801",id:"client\u7684\u4ee3\u7801-1",children:[],level:4},{value:"\u521b\u5efaWorldState\u7684\u4ee3\u7801",id:"\u521b\u5efaworldstate\u7684\u4ee3\u7801-1",children:[],level:4},{value:"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801",id:"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801-1",children:[],level:4},{value:"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801",id:"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801",children:[],level:4},{value:"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801",id:"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801",children:[],level:4},{value:"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801",id:"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801",children:[],level:4},{value:"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801",id:"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801-1",children:[],level:4},{value:"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801",id:"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801-1",children:[],level:4},{value:"\u8fd0\u884cClient\u7684\u4ee3\u7801",id:"\u8fd0\u884cclient\u7684\u4ee3\u7801-1",children:[],level:4}],level:3},{value:"\u63d0\u51fa\u95ee\u9898",id:"\u63d0\u51fa\u95ee\u9898-1",children:[],level:3}],level:2},{value:"\u4f7f\u7528ECS\u6a21\u5f0f\u6765\u6539\u8fdb",id:"\u4f7f\u7528ecs\u6a21\u5f0f\u6765\u6539\u8fdb",children:[{value:"\u6982\u8ff0\u89e3\u51b3\u65b9\u6848",id:"\u6982\u8ff0\u89e3\u51b3\u65b9\u6848-1",children:[],level:3},{value:"\u7ed9\u51faUML",id:"\u7ed9\u51fauml-2",children:[],level:3},{value:"\u7ed3\u5408UML\u56fe\uff0c\u63cf\u8ff0\u5982\u4f55\u5177\u4f53\u5730\u89e3\u51b3\u95ee\u9898",id:"\u7ed3\u5408uml\u56fe\u63cf\u8ff0\u5982\u4f55\u5177\u4f53\u5730\u89e3\u51b3\u95ee\u9898-1",children:[],level:3},{value:"\u7ed9\u51fa\u4ee3\u7801",id:"\u7ed9\u51fa\u4ee3\u7801-2",children:[{value:"Client\u7684\u4ee3\u7801",id:"client\u7684\u4ee3\u7801-2",children:[],level:4},{value:"\u521b\u5efaWorldState\u7684\u4ee3\u7801",id:"\u521b\u5efaworldstate\u7684\u4ee3\u7801-2",children:[],level:4},{value:"\u521b\u5efaArrayBuffer\u7684\u4ee3\u7801",id:"\u521b\u5efaarraybuffer\u7684\u4ee3\u7801",children:[],level:4},{value:"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801",id:"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801-2",children:[],level:4},{value:"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801",id:"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801-1",children:[],level:4},{value:"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801",id:"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801-1",children:[],level:4},{value:"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801",id:"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801-1",children:[],level:4},{value:"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801",id:"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801-2",children:[],level:4},{value:"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801",id:"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801-2",children:[],level:4},{value:"\u8fd0\u884cClient\u7684\u4ee3\u7801",id:"\u8fd0\u884cclient\u7684\u4ee3\u7801-2",children:[],level:4}],level:3}],level:2},{value:"\u5b9a\u4e49",id:"\u5b9a\u4e49",children:[{value:"\u4e00\u53e5\u8bdd\u5b9a\u4e49",id:"\u4e00\u53e5\u8bdd\u5b9a\u4e49",children:[],level:3},{value:"\u8865\u5145\u8bf4\u660e",id:"\u8865\u5145\u8bf4\u660e",children:[],level:3},{value:"\u901a\u7528UML",id:"\u901a\u7528uml",children:[],level:3},{value:"\u89d2\u8272\u7684\u62bd\u8c61\u4ee3\u7801",id:"\u89d2\u8272\u7684\u62bd\u8c61\u4ee3\u7801",children:[{value:"\u7528\u6237\u7684\u62bd\u8c61\u4ee3\u7801",id:"\u7528\u6237\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4},{value:"World\u7684\u62bd\u8c61\u4ee3\u7801",id:"world\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4},{value:"CreateStateSystem\u7684\u62bd\u8c61\u4ee3\u7801",id:"createstatesystem\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4},{value:"OtherSystem\u7684\u62bd\u8c61\u4ee3\u7801",id:"othersystem\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4},{value:"GameObjectManager\u7684\u62bd\u8c61\u4ee3\u7801",id:"gameobjectmanager\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4},{value:"DataOrientedComponentManager\u7684\u62bd\u8c61\u4ee3\u7801",id:"dataorientedcomponentmanager\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4},{value:"OtherComponentManager\u7684\u62bd\u8c61\u4ee3\u7801",id:"othercomponentmanager\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4},{value:"GameObject\u7684\u62bd\u8c61\u4ee3\u7801",id:"gameobject\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4},{value:"DataOrientedComponent\u7684\u62bd\u8c61\u4ee3\u7801",id:"dataorientedcomponent\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4},{value:"OtherComponent\u7684\u62bd\u8c61\u4ee3\u7801",id:"othercomponent\u7684\u62bd\u8c61\u4ee3\u7801",children:[],level:4}],level:3},{value:"\u9075\u5faa\u7684\u8bbe\u8ba1\u539f\u5219\u5728UML\u4e2d\u7684\u4f53\u73b0",id:"\u9075\u5faa\u7684\u8bbe\u8ba1\u539f\u5219\u5728uml\u4e2d\u7684\u4f53\u73b0",children:[],level:3}],level:2},{value:"\u5e94\u7528",id:"\u5e94\u7528",children:[{value:"\u4f18\u70b9",id:"\u4f18\u70b9",children:[],level:3},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9",children:[],level:3},{value:"\u4f7f\u7528\u573a\u666f",id:"\u4f7f\u7528\u573a\u666f",children:[{value:"\u573a\u666f\u63cf\u8ff0",id:"\u573a\u666f\u63cf\u8ff0",children:[],level:4},{value:"\u5177\u4f53\u6848\u4f8b",id:"\u5177\u4f53\u6848\u4f8b",children:[],level:4}],level:3},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",children:[],level:3}],level:2},{value:"\u7ed3\u5408\u5176\u5b83\u6a21\u5f0f",id:"\u7ed3\u5408\u5176\u5b83\u6a21\u5f0f",children:[{value:"\u7ed3\u5408\u591a\u7ebf\u7a0b\u6a21\u5f0f",id:"\u7ed3\u5408\u591a\u7ebf\u7a0b\u6a21\u5f0f",children:[],level:3},{value:"\u7ed3\u5408\u7ba1\u9053\u6a21\u5f0f",id:"\u7ed3\u5408\u7ba1\u9053\u6a21\u5f0f",children:[],level:3}],level:2},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",children:[{value:"\u54ea\u4e9b\u573a\u666f\u4e0d\u9700\u8981\u4f7f\u7528\u6a21\u5f0f",id:"\u54ea\u4e9b\u573a\u666f\u4e0d\u9700\u8981\u4f7f\u7528\u6a21\u5f0f",children:[],level:3}],level:2},{value:"\u66f4\u591a\u8d44\u6599\u63a8\u8350",id:"\u66f4\u591a\u8d44\u6599\u63a8\u8350",children:[],level:2}],m={toc:i},u="wrapper";function s(e){let{components:t,...o}=e;return(0,l.kt)(u,(0,a.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u7b2c5\u7ae0-ecs\u6a21\u5f0f"},"\u7b2c5\u7ae0 ECS\u6a21\u5f0f"),(0,l.kt)("h2",{id:"\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4"},"\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4"),(0,l.kt)("h3",{id:"\u9700\u6c42"},"\u9700\u6c42"),(0,l.kt)("p",null,"\u6211\u4eec\u9700\u8981\u5f00\u53d1\u4e00\u4e2a\u6e38\u620f\uff0c\u6e38\u620f\u4e2d\u6709\u4e24\u79cd\u4eba\u7269\uff1a\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4\uff0c\u4ed6\u4eec\u5177\u6709\u4e0b\u9762\u7684\u884c\u4e3a\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u666e\u901a\u82f1\u96c4\u53ea\u80fd\u79fb\u52a8"),(0,l.kt)("li",{parentName:"ul"},"\u8d85\u7ea7\u82f1\u96c4\u4e0d\u4ec5\u80fd\u591f\u79fb\u52a8\uff0c\u8fd8\u80fd\u98de\u884c")),(0,l.kt)("p",null,"\u6211\u4eec\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u6765\u6e32\u67d3\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528Instance\u6280\u672f\u6765\u4e00\u6b21\u6027\u6279\u91cf\u6e32\u67d3\u6240\u6709\u7684\u666e\u901a\u82f1\u96c4"),(0,l.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u4e00\u4e2a\u5730\u6e32\u67d3\u6bcf\u4e2a\u8d85\u7ea7\u82f1\u96c4")),(0,l.kt)("h3",{id:"\u5b9e\u73b0\u601d\u8def"},"\u5b9e\u73b0\u601d\u8def"),(0,l.kt)("p",null,"\u5e94\u8be5\u6709\u4e00\u4e2a\u6e38\u620f\u4e16\u754c\uff0c\u5b83\u7531\u591a\u4e2a\u666e\u901a\u82f1\u96c4\u548c\u591a\u4e2a\u8d85\u7ea7\u82f1\u96c4\u7ec4\u6210"),(0,l.kt)("p",null,"\u4e00\u4e2a\u6a21\u5757\u5bf9\u5e94\u4e00\u4e2a\u666e\u901a\u82f1\u96c4\uff0c\u4e00\u4e2a\u6a21\u5757\u5bf9\u5e94\u4e00\u4e2a\u8d85\u7ea7\u82f1\u96c4\u3002\u6a21\u5757\u5e94\u8be5\u7ef4\u62a4\u8be5\u82f1\u96c4\u7684\u6570\u636e\u548c\u5b9e\u73b0\u8be5\u82f1\u96c4\u7684\u884c\u4e3a"),(0,l.kt)("h3",{id:"\u7ed9\u51fauml"},"\u7ed9\u51faUML"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9886\u57df\u6a21\u578b")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u9886\u57df\u6a21\u578b\u56fe",src:n(4081).Z})),(0,l.kt)("p",null,"\u603b\u4f53\u6765\u770b\uff0c\u9886\u57df\u6a21\u578b\u5206\u4e3a\u7528\u6237\u3001\u6e38\u620f\u4e16\u754c\u3001\u82f1\u96c4\u8fd9\u4e09\u4e2a\u90e8\u5206"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0b\u7528\u6237\u3001\u6e38\u620f\u4e16\u754c\u8fd9\u4e24\u4e2a\u90e8\u5206\uff1a"),(0,l.kt)("p",null,"Client\u662f\u7528\u6237"),(0,l.kt)("p",null,"World\u662f\u6e38\u620f\u4e16\u754c\uff0c\u7531\u591a\u4e2a\u666e\u901a\u82f1\u96c4\u548c\u591a\u4e2a\u8d85\u7ea7\u82f1\u96c4\u7ec4\u6210\u3002World\u8d1f\u8d23\u7ba1\u7406\u6240\u6709\u7684\u82f1\u96c4\uff0c\u5e76\u4e14\u5b9e\u73b0\u4e86\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u903b\u8f91"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0b\u82f1\u96c4\u8fd9\u4e2a\u90e8\u5206\uff1a"),(0,l.kt)("p",null,"\u4e00\u4e2aNormalHero\u5bf9\u5e94\u4e00\u4e2a\u666e\u901a\u82f1\u96c4\uff0c\u7ef4\u62a4\u4e86\u8be5\u82f1\u96c4\u7684\u6570\u636e\uff0c\u5b9e\u73b0\u4e86\u79fb\u52a8\u7684\u884c\u4e3a"),(0,l.kt)("p",null,"\u4e00\u4e2aSuperHero\u5bf9\u5e94\u4e00\u4e2a\u8d85\u7ea7\u82f1\u96c4\uff0c \u7ef4\u62a4\u4e86\u8be5\u82f1\u96c4\u7684\u6570\u636e\uff0c\u5b9e\u73b0\u4e86\u79fb\u52a8\u3001\u98de\u884c\u7684\u884c\u4e3a"),(0,l.kt)("h3",{id:"\u7ed9\u51fa\u4ee3\u7801"},"\u7ed9\u51fa\u4ee3\u7801"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u770b\u4e0bClient\u7684\u4ee3\u7801\uff1b",(0,l.kt)("br",{parentName:"p"}),"\n","\u7136\u540e\uff0c\u6211\u4eec\u4f9d\u6b21\u770b\u4e0bClient\u4ee3\u7801\u4e2d\u524d\u4e24\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efaWorldState\u7684\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u56e0\u4e3a\u521b\u5efa\u573a\u666f\u65f6\u64cd\u4f5c\u4e86\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4\uff0c\u6240\u4ee5\u6211\u4eec\u770b\u4e0b\u5b83\u4eec\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u666e\u901a\u82f1\u96c4\u79fb\u52a8\u7684\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"\u8d85\u7ea7\u82f1\u96c4\u79fb\u52a8\u548c\u98de\u884c\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u4f9d\u6b21\u770b\u4e0bClient\u4ee3\u7801\u4e2d\u5269\u4f59\u7684\u4e24\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u521d\u59cb\u5316\u7684\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"\u4e3b\u5faa\u73af\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u770b\u4e0b\u4e3b\u5faa\u73af\u7684\u4e00\u5e27\u4e2d\u6bcf\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u6700\u540e\uff0c\u6211\u4eec\u8fd0\u884cClient\u7684\u4ee3\u7801"),(0,l.kt)("h4",{id:"client\u7684\u4ee3\u7801"},"Client\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"Client"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let worldState = World.createState()\n\nworldState = _createScene(worldState)\n\nworldState = WorldUtils.init(worldState)\n\nWorldUtils.loop(worldState, [World.update, World.renderOneByOne, World.renderInstances])\n")),(0,l.kt)("p",null,"Client\u9996\u5148\u521b\u5efa\u4e86WorldState\uff0c\u7528\u6765\u4fdd\u5b58\u6e38\u620f\u4e16\u754c\u4e2d\u6240\u6709\u7684\u6570\u636e\uff1b\u7136\u540e\u521b\u5efa\u4e86\u573a\u666f\uff1b\u7136\u540e\u8fdb\u884c\u4e86\u521d\u59cb\u5316\uff1b\u6700\u540e\u5f00\u59cb\u4e86\u4e3b\u5faa\u73af"),(0,l.kt)("h4",{id:"\u521b\u5efaworldstate\u7684\u4ee3\u7801"},"\u521b\u5efaWorldState\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createState = (): worldState => {\n    return {\n        normalHeroes: Map(),\n        superHeroes: Map()\n    }\n}\n")),(0,l.kt)("p",null,"createState\u51fd\u6570\u521b\u5efa\u4e86WorldState\uff0c\u5b83\u5305\u62ec\u4e24\u4e2a\u5206\u522b\u7528\u6765\u4fdd\u5b58\u6240\u6709\u7684\u666e\u901a\u82f1\u96c4\u548c\u6240\u6709\u7684\u8d85\u7ea7\u82f1\u96c4\u7684\u5bb9\u5668"),(0,l.kt)("h4",{id:"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801"},"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"Client"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let _createScene = (worldState: worldState): worldState => {\n    \u521b\u5efa\u548c\u52a0\u5165normalHero1\u5230worldState.normalHeroes\n    \u521b\u5efa\u548c\u52a0\u5165normalHero2\u5230worldState.normalHeroes\n\n    normalHero1\u79fb\u52a8\n\n    \u521b\u5efa\u548c\u52a0\u5165superHero1\u5230worldState.superHeroes\n    \u521b\u5efa\u548c\u52a0\u5165superHero2\u5230worldState.superHeroes\n\n    superHero1\u79fb\u52a8\n    superHero1\u98de\u884c\n\n    return worldState\n}\n")),(0,l.kt)("p",null,"_createScene\u51fd\u6570\u521b\u5efa\u4e86\u573a\u666f\uff0c\u521b\u5efa\u548c\u52a0\u5165\u4e86\u4e24\u4e2a\u666e\u901a\u82f1\u96c4\u548c\u4e24\u4e2a\u8d85\u7ea7\u82f1\u96c4\u5230\u6e38\u620f\u4e16\u754c\u4e2d\u3002\u5176\u4e2d\u7b2c\u4e00\u4e2a\u666e\u901a\u82f1\u96c4\u8fdb\u884c\u4e86\u79fb\u52a8\uff0c\u7b2c\u4e00\u4e2a\u8d85\u7ea7\u82f1\u96c4\u8fdb\u884c\u4e86\u79fb\u52a8\u548c\u98de\u884c"),(0,l.kt)("p",null,"NormalHero"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u521b\u5efa\u4e00\u4e2a\u666e\u901a\u82f1\u96c4\nexport let create = (): [normalHeroState, normalHero] => {\n    \u521b\u5efa\u5b83\u7684state\u6570\u636e\uff1a\n        position\u8bbe\u7f6e\u4e3a[0,0,0]\n        velocity\u8bbe\u7f6e\u4e3a1.0\n\n        \u5176\u4e2d\uff1aposition\u4e3a\u4f4d\u7f6e\uff0cvelocity\u4e3a\u901f\u5ea6\n\n    \u8fd4\u56de\u8be5\u82f1\u96c4\n}\n")),(0,l.kt)("p",null,"NormalHero\u7684create\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2a\u666e\u901a\u82f1\u96c4\uff0c\u521d\u59cb\u5316\u4e86\u5b83\u7684\u6570\u636e"),(0,l.kt)("p",null,"SuperHero"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u521b\u5efa\u4e00\u4e2a\u8d85\u7ea7\u82f1\u96c4\nexport let create = (): [superHeroState, superHero] => {\n    \u521b\u5efa\u5b83\u7684state\u6570\u636e\uff1a\n        position\u8bbe\u7f6e\u4e3a[0,0,0]\n        velocity\u8bbe\u7f6e\u4e3a1.0\n        maxVelocity\u8bbe\u7f6e\u4e3a1.0\n\n        \u5176\u4e2d\uff1aposition\u4e3a\u4f4d\u7f6e\uff0cvelocity\u4e3a\u901f\u5ea6\uff0cmaxVelocity\u4e3a\u6700\u5927\u901f\u5ea6\n\n    \u8fd4\u56de\u8be5\u82f1\u96c4\n}\n")),(0,l.kt)("p",null,"SuperHero\u7684create\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2a\u8d85\u7ea7\u82f1\u96c4\uff0c\u521d\u59cb\u5316\u4e86\u5b83\u7684\u6570\u636e"),(0,l.kt)("h4",{id:"\u666e\u901a\u82f1\u96c4\u79fb\u52a8\u7684\u4ee3\u7801"},"\u666e\u901a\u82f1\u96c4\u79fb\u52a8\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"NormalHero"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u4e00\u4e2a\u666e\u901a\u82f1\u96c4\u7684\u79fb\u52a8\nexport let move = (worldState: worldState, normalHero: normalHero): worldState => {\n    \u4eceworldState\u4e2d\u83b7\u5f97\u8be5\u82f1\u96c4\u7684position\u548cvelocity\n\n    \u6839\u636evelocity\uff0c\u66f4\u65b0position\n\n    \u66f4\u65b0worldState\u4e2d\u8be5\u82f1\u96c4\u7684\u6570\u636e\n}\n")),(0,l.kt)("p",null,"move\u51fd\u6570\u5b9e\u73b0\u4e86\u79fb\u52a8\u7684\u884c\u4e3a\u903b\u8f91\uff0c\u66f4\u65b0\u4e86\u4f4d\u7f6e"),(0,l.kt)("h4",{id:"\u8d85\u7ea7\u82f1\u96c4\u79fb\u52a8\u548c\u98de\u884c\u7684\u4ee3\u7801"},"\u8d85\u7ea7\u82f1\u96c4\u79fb\u52a8\u548c\u98de\u884c\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"SuperHero"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u4e00\u4e2a\u8d85\u7ea7\u82f1\u96c4\u7684\u79fb\u52a8\nexport let move = (worldState: worldState, superHero: superHero): worldState => {\n    \u4eceworldState\u4e2d\u83b7\u5f97\u8be5\u82f1\u96c4\u7684position\u548cvelocity\n\n    \u6839\u636evelocity\uff0c\u66f4\u65b0position\n\n    \u66f4\u65b0worldState\u4e2d\u8be5\u82f1\u96c4\u7684\u6570\u636e\n}\n\n//\u4e00\u4e2a\u8d85\u7ea7\u82f1\u96c4\u7684\u98de\u884c\nexport let fly = (worldState: worldState, superHero: superHero): worldState => {\n    \u4eceworldState\u4e2d\u83b7\u5f97\u8be5\u82f1\u96c4\u7684position\u548cvelocity\u3001maxVelocity\n\n    \u6839\u636emaxVelocity\u3001velocity\uff0c\u66f4\u65b0position\n\n    \u66f4\u65b0worldState\u4e2d\u8be5\u82f1\u96c4\u7684\u6570\u636e\n}\n")),(0,l.kt)("p",null,"SuperHero\u7684move\u51fd\u6570\u7684\u903b\u8f91\u8ddfNormalHero\u7684move\u51fd\u6570\u7684\u903b\u8f91\u662f\u4e00\u6837\u7684"),(0,l.kt)("p",null,"fly\u51fd\u6570\u5b9e\u73b0\u4e86\u98de\u884c\u7684\u884c\u4e3a\u903b\u8f91\u3002\u5b83\u8ddfmove\u51fd\u6570\u4e00\u6837\uff0c\u4e5f\u662f\u66f4\u65b0\u82f1\u96c4\u7684position\u3002\u53ea\u662f\u56e0\u4e3a\u4e24\u8005\u5728\u8ba1\u7b97\u65f6\u4f7f\u7528\u7684\u901f\u5ea6\u7684\u7b97\u6cd5\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u66f4\u65b0position\u7684\u5e45\u5ea6\u4e0d\u540c"),(0,l.kt)("h4",{id:"\u521d\u59cb\u5316\u7684\u4ee3\u7801"},"\u521d\u59cb\u5316\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"WorldUtils"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'export let init = (worldState) => {\n    console.log("\u521d\u59cb\u5316...")\n\n    return worldState\n}\n')),(0,l.kt)("p",null,"init\u51fd\u6570\u5b9e\u73b0\u4e86\u521d\u59cb\u5316\u3002\u8fd9\u91cc\u6ca1\u6709\u4efb\u4f55\u903b\u8f91\uff0c\u53ea\u662f\u8fdb\u884c\u4e86\u6253\u5370"),(0,l.kt)("h4",{id:"\u4e3b\u5faa\u73af\u7684\u4ee3\u7801"},"\u4e3b\u5faa\u73af\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"WorldUtils"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let loop = (worldState, [update, renderOneByOne, renderInstances]) => {\n    worldState = update(worldState)\n    renderOneByOne(worldState)\n    renderInstances(worldState)\n\n    ...\n\n    requestAnimationFrame(\n        (time) => {\n            loop(worldState, [update, renderOneByOne, renderInstances])\n        }\n    )\n}\n")),(0,l.kt)("p",null,"loop\u51fd\u6570\u5b9e\u73b0\u4e86\u4e3b\u5faa\u73af\u3002\u5728\u4e3b\u5faa\u73af\u7684\u4e00\u5e27\u4e2d\uff0c\u9996\u5148\u8fdb\u884c\u4e86\u66f4\u65b0\uff1b\u7136\u540e\u4e00\u4e2a\u4e00\u4e2a\u5730\u6e32\u67d3\u4e86\u6240\u6709\u7684\u8d85\u7ea7\u82f1\u96c4\uff1b\u7136\u540e\u4e00\u6b21\u6027\u6279\u91cf\u6e32\u67d3\u4e86\u6240\u6709\u7684\u666e\u901a\u82f1\u96c4\uff1b\u6700\u540e\u6267\u884c\u4e0b\u4e00\u5e27"),(0,l.kt)("h4",{id:"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801"},"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let update = (worldState: worldState): worldState => {\n    \u904d\u5386worldState.normalHeroes\uff1a\n        \u66f4\u65b0\u6bcf\u4e2anormalHero\n    \u904d\u5386worldState.superHeroes\uff1a\n        \u66f4\u65b0\u6bcf\u4e2asuperHero\n}\n")),(0,l.kt)("p",null,"update\u51fd\u6570\u5b9e\u73b0\u4e86\u66f4\u65b0\uff0c\u5b83\u4f1a\u904d\u5386\u6240\u6709\u7684normalHero\u548csuperHero\uff0c\u8c03\u7528\u5b83\u4eec\u7684update\u51fd\u6570\u6765\u66f4\u65b0\u81ea\u5df1"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bNormalHero\u7684update\u51fd\u6570\u7684\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u66f4\u65b0\u4e00\u4e2a\u666e\u901a\u82f1\u96c4\nexport let update = (normalHeroState: normalHeroState): normalHeroState => {\n    \u66f4\u65b0\u8be5\u82f1\u96c4\u7684position\n}\n")),(0,l.kt)("p",null,"\u5b83\u66f4\u65b0\u4e86\u81ea\u5df1\u7684position"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bSuperHero\u7684update\u51fd\u6570\u7684\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u66f4\u65b0\u4e00\u4e2a\u8d85\u7ea7\u82f1\u96c4\nexport let update = (superHeroState: superHeroState): superHeroState => {\n    \u66f4\u65b0\u8be5\u82f1\u96c4\u7684position\n}\n")),(0,l.kt)("p",null,"\u5b83\u7684\u903b\u8f91\u8ddfNormalHero\u7684update\u662f\u4e00\u6837\u7684\uff0c\u8fd9\u662f\u56e0\u4e3a\u4e24\u8005\u90fd\u4f7f\u7528\u540c\u6837\u7684\u7b97\u6cd5\u6765\u66f4\u65b0\u81ea\u5df1\u7684position"),(0,l.kt)("h4",{id:"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801"},"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'export let renderOneByOne = (worldState: worldState): void => {\n    worldState.superHeroes.forEach(superHeroState => {\n        console.log("OneByOne\u6e32\u67d3 SuperHero...")\n    })\n}\n\nexport let renderInstances = (worldState: worldState): void => {\n    let normalHeroStates = worldState.normalHeroes\n\n    console.log("\u6279\u91cfInstance\u6e32\u67d3 NormalHeroes...")\n}\n')),(0,l.kt)("p",null,"renderOneByOne\u51fd\u6570\u5b9e\u73b0\u4e86\u8d85\u7ea7\u82f1\u96c4\u7684\u6e32\u67d3\uff0c\u5b83\u904d\u5386\u6bcf\u4e2a\u8d85\u7ea7\u82f1\u96c4\uff0c\u4e00\u4e2a\u4e00\u4e2a\u5730\u6e32\u67d3",(0,l.kt)("br",{parentName:"p"}),"\n","renderInstances\u51fd\u6570\u5b9e\u73b0\u4e86\u666e\u901a\u82f1\u96c4\u7684\u6e32\u67d3\uff0c\u5b83\u4e00\u6b21\u6027\u83b7\u5f97\u6240\u6709\u7684\u666e\u901a\u82f1\u96c4\uff0c\u6279\u91cf\u6e32\u67d3"),(0,l.kt)("h4",{id:"\u8fd0\u884cclient\u7684\u4ee3\u7801"},"\u8fd0\u884cClient\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"\u4e0b\u9762\uff0c\u6211\u4eec\u8fd0\u884cClient\u7684\u4ee3\u7801\uff0c\u6253\u5370\u7684\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'\u521d\u59cb\u5316...\n\u66f4\u65b0NormalHero\n\u66f4\u65b0NormalHero\n\u66f4\u65b0SuperHero\n\u66f4\u65b0SuperHero\nOneByOne\u6e32\u67d3 SuperHero...\nOneByOne\u6e32\u67d3 SuperHero...\n\u6279\u91cfInstance\u6e32\u67d3 NormalHeroes...\n{"normalHeroes":{"144891":{"position":[0,0,0],"velocity":1},"648575":{"position":[2,2,2],"velocity":1}},"superHeroes":{"497069":{"position":[6,6,6],"velocity":1,"maxFlyVelocity":10},"783438":{"position":[0,0,0],"velocity":1,"maxFlyVelocity":10}}}\n')),(0,l.kt)("p",null,"\u901a\u8fc7\u6253\u5370\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u770b\u5230\u8fd0\u884c\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n","1.\u8fdb\u884c\u4e86\u521d\u59cb\u5316",(0,l.kt)("br",{parentName:"p"}),"\n","2.\u66f4\u65b0\u4e86\u6240\u6709\u7684\u4eba\u7269\uff0c\u5305\u62ec\u4e24\u4e2a\u666e\u901a\u82f1\u96c4\u548c\u4e24\u4e2a\u8d85\u7ea7\u82f1\u96c4",(0,l.kt)("br",{parentName:"p"}),"\n","3.\u6e32\u67d3\u4e862\u4e2a\u8d85\u7ea7\u82f1\u96c4",(0,l.kt)("br",{parentName:"p"}),"\n","4.\u4e00\u6b21\u6027\u6279\u91cf\u6e32\u67d3\u4e86\u6240\u6709\u7684\u666e\u901a\u82f1\u96c4",(0,l.kt)("br",{parentName:"p"}),"\n","5.\u6253\u5370\u4e86WorldState"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0b\u6253\u5370\u7684WorldState\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"WorldState\u7684normalHeroes\u4e2d\u4e00\u5171\u6709\u4e24\u4e2a\u666e\u901a\u82f1\u96c4\u7684\u6570\u636e\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u666e\u901a\u82f1\u96c4\u6570\u636e\u7684position\u4e3a","[2,2,2]","\u800c\u4e0d\u662f\u521d\u59cb\u7684","[0,0,0]","\uff0c\u8bf4\u660e\u8be5\u666e\u901a\u82f1\u96c4\u8fdb\u884c\u4e86\u79fb\u52a8\u64cd\u4f5c\uff1b"),(0,l.kt)("li",{parentName:"ul"},"WorldState\u7684superHeroes\u4e2d\u4e00\u5171\u6709\u4e24\u4e2a\u8d85\u7ea7\u82f1\u96c4\u7684\u6570\u636e\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u8d85\u7ea7\u82f1\u96c4\u6570\u636e\u7684position\u4e3a","[6,6,6]","\uff0c\u8bf4\u660e\u8be5\u8d85\u7ea7\u82f1\u96c4\u8fdb\u884c\u4e86\u79fb\u52a8\u548c\u98de\u884c\u64cd\u4f5c")),(0,l.kt)("p",null,"\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n","\u56e0\u4e3aWorldState\u7684normalHeroes\u548csuperHeroes\u4e2d\u7684Key\u662f\u968f\u673a\u751f\u6210\u7684id\u503c\uff0c\u6240\u4ee5\u6bcf\u6b21\u6253\u5370\u65f6Key\u90fd\u4e0d\u4e00\u6837"),(0,l.kt)("h3",{id:"\u63d0\u51fa\u95ee\u9898"},"\u63d0\u51fa\u95ee\u9898"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"NormalHero\u548cSuperHero\u4e2d\u7684update\u3001move\u51fd\u6570\u7684\u903b\u8f91\u662f\u91cd\u590d\u7684")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5982\u679c\u82f1\u96c4\u589e\u52a0\u66f4\u591a\u7684\u884c\u4e3a\uff0cNormalHero\u548cSuperHero\u6a21\u5757\u4f1a\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u4e0d\u5bb9\u6613\u7ef4\u62a4"))),(0,l.kt)("p",null,"\u867d\u7136\u8fd9\u4e24\u4e2a\u95ee\u9898\u90fd\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627f\u6765\u89e3\u51b3\uff0c\u5373\u6700\u4e0a\u9762\u662fHero\u57fa\u7c7b\uff0c\u7136\u540e\u4e0d\u540c\u79cd\u7c7b\u7684Hero\u5c42\u5c42\u7ee7\u627f\uff0c\u4f46\u662f\u7ee7\u627f\u7684\u65b9\u5f0f\u5f88\u6b7b\u677f\uff0c\u4e0d\u591f\u7075\u6d3b"),(0,l.kt)("h2",{id:"\u57fa\u4e8e\u7ec4\u4ef6\u5316\u7684\u601d\u60f3\u6539\u8fdb"},"\u57fa\u4e8e\u7ec4\u4ef6\u5316\u7684\u601d\u60f3\u6539\u8fdb"),(0,l.kt)("h3",{id:"\u6982\u8ff0\u89e3\u51b3\u65b9\u6848"},"\u6982\u8ff0\u89e3\u51b3\u65b9\u6848"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u57fa\u4e8e\u7ec4\u4ef6\u5316\u7684\u601d\u60f3\uff0c\u7528\u7ec4\u5408\u4ee3\u66ff\u7ee7\u627f\u3002\u5177\u4f53\u4fee\u6539\u5982\u4e0b\uff1a"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5c06\u4eba\u7269\u62bd\u8c61\u4e3aGameObject\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u5c06\u4eba\u7269\u7684\u884c\u4e3a\u62bd\u8c61\u4e3a\u7ec4\u4ef6\uff0c\u5e76\u628a\u4eba\u7269\u7684\u76f8\u5173\u6570\u636e\u4e5f\u79fb\u5230\u7ec4\u4ef6\u4e2d\uff1b"),(0,l.kt)("li",{parentName:"ul"},"GameObject\u901a\u8fc7\u6302\u8f7d\u4e0d\u540c\u7684\u7ec4\u4ef6\uff0c\u6765\u5b9e\u73b0\u4e0d\u540c\u7684\u884c\u4e3a")))),(0,l.kt)("p",null,"\u8fd9\u6837\u5c31\u901a\u8fc7GameObject\u7ec4\u5408\u4e0d\u540c\u7684\u7ec4\u4ef6\u6765\u4ee3\u66ff\u4eba\u7269\u5c42\u5c42\u7ee7\u627f\uff0c\u4ece\u800c\u66f4\u52a0\u7075\u6d3b"),(0,l.kt)("h3",{id:"\u7ed9\u51fauml-1"},"\u7ed9\u51faUML"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9886\u57df\u6a21\u578b")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u9886\u57df\u6a21\u578b\u56fe",src:n(674).Z})),(0,l.kt)("p",null,"\u603b\u4f53\u6765\u770b\uff0c\u9886\u57df\u6a21\u578b\u5206\u4e3a\u7528\u6237\u3001\u6e38\u620f\u4e16\u754c\u3001GameObject\u3001\u7ec4\u4ef6\u8fd9\u56db\u4e2a\u90e8\u5206"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0b\u7528\u6237\u3001\u6e38\u620f\u4e16\u754c\u8fd9\u4e24\u4e2a\u90e8\u5206\uff1a"),(0,l.kt)("p",null,"Client\u662f\u7528\u6237"),(0,l.kt)("p",null,"World\u662f\u6e38\u620f\u4e16\u754c\uff0c\u7531\u591a\u4e2aGameObject\u7ec4\u6210\u3002World\u8d1f\u8d23\u7ba1\u7406\u6240\u6709\u7684GameObject\uff0c\u5e76\u4e14\u5b9e\u73b0\u4e86\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u903b\u8f91"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bGameObject\u8fd9\u4e2a\u90e8\u5206\uff1a"),(0,l.kt)("p",null,"\u4e00\u4e2aGameObject\u5bf9\u5e94\u4e00\u4e2a\u4eba\u7269\u3002GameObject\u8d1f\u8d23\u7ba1\u7406\u6302\u8f7d\u7684\u7ec4\u4ef6\uff0c\u5b83\u53ef\u4ee5\u6302\u8f7dPositionComponent\u3001VelocityComponent\u3001FlyComponent\u3001InstanceComponent\u8fd9\u56db\u79cd\u7ec4\u4ef6\uff0c\u6bcf\u79cd\u7ec4\u4ef6\u6700\u591a\u6302\u8f7d\u4e00\u4e2a"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0b\u7ec4\u4ef6\u8fd9\u4e2a\u90e8\u5206\uff1a"),(0,l.kt)("p",null,"\u7ec4\u4ef6\u8d1f\u8d23\u7ef4\u62a4\u81ea\u5df1\u7684\u6570\u636e\uff0c\u5b9e\u73b0\u81ea\u5df1\u7684\u884c\u4e3a\u903b\u8f91\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u662f\u5c06NormalHero\u3001SuperHero\u7684position\u6570\u636e\u548cmove\u51fd\u6570\u3001update\u51fd\u6570\u79fb\u5230\u4e86PositionComponent\u4e2d\uff1b\u5c06NormalHero\u3001SuperHero\u7684velocity\u6570\u636e\u79fb\u5230\u4e86VelocityComponent\u4e2d\uff1b\u5c06SuperHero\u7684maxVelocity\u6570\u636e\u548cfly\u51fd\u6570\u79fb\u5230\u4e86FlyComponent\u4e2d"),(0,l.kt)("p",null,"InstanceComponent\u6ca1\u6709\u6570\u636e\u548c\u903b\u8f91\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u6807\u8bb0\uff0c\u7528\u6765\u8868\u793a\u6302\u8f7d\u8be5\u7ec4\u4ef6\u7684GameObject\u4f7f\u7528\u4e00\u6b21\u6027\u6279\u91cf\u6e32\u67d3\u7684\u7b97\u6cd5\u6765\u6e32\u67d3"),(0,l.kt)("h3",{id:"\u7ed3\u5408uml\u56fe\u63cf\u8ff0\u5982\u4f55\u5177\u4f53\u5730\u89e3\u51b3\u95ee\u9898"},"\u7ed3\u5408UML\u56fe\uff0c\u63cf\u8ff0\u5982\u4f55\u5177\u4f53\u5730\u89e3\u51b3\u95ee\u9898"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u73b0\u5728\u53ea\u9700\u8981\u5b9e\u73b0\u4e00\u6b21Position\u7ec4\u4ef6\u4e2d\u7684update\u3001move\u51fd\u6570\uff0c\u7136\u540e\u5c06\u5b83\u6302\u8f7d\u5230\u4e0d\u540c\u7684GameObject\u4e2d\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4\u7684\u66f4\u65b0\u3001\u79fb\u52a8\u7684\u903b\u8f91\uff0c\u4ece\u800c\u6d88\u9664\u4e86\u4e4b\u524d\u5728NormalHero\u3001SuperHero\u4e2d\u56e0\u5171\u5b9e\u73b0\u4e86\u4e24\u6b21\u7684update\u3001move\u51fd\u6570\u800c\u9020\u6210\u7684\u91cd\u590d\u4ee3\u7801")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u56e0\u4e3aNormalHero\u3001SuperHero\u90fd\u662fGameObject\uff0c\u800cGameObject\u672c\u8eab\u53ea\u8d1f\u8d23\u7ba1\u7406\u7ec4\u4ef6\uff0c\u6ca1\u6709\u884c\u4e3a\u903b\u8f91\uff0c\u6240\u4ee5\u968f\u7740\u4eba\u7269\u7684\u884c\u4e3a\u7684\u589e\u52a0\uff0cGameObject\u5e76\u4e0d\u4f1a\u589e\u52a0\u903b\u8f91\uff0c\u800c\u53ea\u9700\u8981\u589e\u52a0\u5bf9\u5e94\u884c\u4e3a\u7684\u7ec4\u4ef6\uff0c\u8ba9GameObject\u6302\u8f7d\u8be5\u7ec4\u4ef6\u5373\u53ef",(0,l.kt)("br",{parentName:"li"}),"\u901a\u8fc7\u8fd9\u6837\u7684\u8bbe\u8ba1\uff0c\u5c06\u884c\u4e3a\u7684\u903b\u8f91\u548c\u6570\u636e\u4ece\u4eba\u7269\u79fb\u5230\u4e86\u7ec4\u4ef6\u4e2d\uff0c\u4ece\u800c\u53ef\u4ee5\u901a\u8fc7\u7ec4\u5408\u7684\u65b9\u5f0f\u4f7f\u4eba\u7269\u5177\u6709\u591a\u4e2a\u884c\u4e3a\uff0c\u907f\u514d\u4e86\u5e9e\u5927\u7684\u4eba\u7269\u6a21\u5757\u7684\u51fa\u73b0")),(0,l.kt)("h3",{id:"\u7ed9\u51fa\u4ee3\u7801-1"},"\u7ed9\u51fa\u4ee3\u7801"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u770b\u4e0bClient\u7684\u4ee3\u7801\uff1b",(0,l.kt)("br",{parentName:"p"}),"\n","\u7136\u540e\uff0c\u6211\u4eec\u4f9d\u6b21\u770b\u4e0bClient\u4ee3\u7801\u4e2d\u524d\u4e24\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efaWorldState\u7684\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u56e0\u4e3a\u521b\u5efa\u573a\u666f\u65f6\u64cd\u4f5c\u4e86\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4\uff0c\u6240\u4ee5\u6211\u4eec\u770b\u4e0b\u5b83\u4eec\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u4f9d\u6b21\u770b\u4e0bClient\u4ee3\u7801\u4e2d\u5269\u4f59\u7684\u4e24\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u770b\u4e0b\u4e3b\u5faa\u73af\u7684\u4e00\u5e27\u4e2d\u6bcf\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u6700\u540e\uff0c\u6211\u4eec\u8fd0\u884cClient\u7684\u4ee3\u7801"),(0,l.kt)("h4",{id:"client\u7684\u4ee3\u7801-1"},"Client\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"Client\u7684\u4ee3\u7801\u8ddf\u4e4b\u524d\u7684Client\u7684\u4ee3\u7801\u57fa\u672c\u4e0a\u4e00\u6837\uff0c\u6545\u7701\u7565\u3002\u4e0d\u4e00\u6837\u7684\u5730\u65b9\u662f_createScene\u51fd\u6570\u4e2d\u521b\u5efa\u573a\u666f\u7684\u65b9\u5f0f\u4e0d\u4e00\u6837\uff0c\u8fd9\u4e2a\u7b49\u4f1a\u518d\u8ba8\u8bba"),(0,l.kt)("h4",{id:"\u521b\u5efaworldstate\u7684\u4ee3\u7801-1"},"\u521b\u5efaWorldState\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createState = (): worldState => {\n    return {\n        gameObjects: Map()\n    }\n}\n")),(0,l.kt)("p",null,"createState\u51fd\u6570\u521b\u5efa\u4e86WorldState\uff0c\u5b83\u4fdd\u5b58\u4e86\u4e00\u4e2a\u7528\u6765\u4fdd\u5b58\u6240\u6709\u7684gameObject\u7684\u5bb9\u5668"),(0,l.kt)("h4",{id:"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801-1"},"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"Client"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let _createScene = (worldState: worldState): worldState => {\n    \u521b\u5efa\u548c\u52a0\u5165normalHero1\u5230worldState.gameObjects\uff1a\n        \u521b\u5efagameObject\n        \u521b\u5efapositionComponent\n        \u521b\u5efavelocityComponent\n        \u521b\u5efainstanceComponent\n        \u6302\u8f7dpositionComponent\u3001velocityComponent\u3001instanceComponent\u5230gameObject\n        \u52a0\u5165gameObject\u5230worldState.gameObjects\n\n    \u521b\u5efa\u548c\u52a0\u5165normalHero2\u5230worldState.gameObjects\n\n    normalHero1\u79fb\u52a8\uff1a\n        \u8c03\u7528normalHero1\u6302\u8f7d\u7684positionComponent\u7684move\u51fd\u6570\n\n    \u521b\u5efa\u548c\u52a0\u5165superHero1\u5230worldState.gameObjects\uff1a\n        \u521b\u5efagameObject\n        \u521b\u5efapositionComponent\n        \u521b\u5efavelocityComponent\n        \u521b\u5efaflyComponent\n        \u6302\u8f7dpositionComponent\u3001velocityComponent\u3001flyComponent\u5230gameObject\n        \u52a0\u5165gameObject\u5230worldState.gameObjects\n\n    \u521b\u5efa\u548c\u52a0\u5165superHero2\u5230worldState.gameObjects\n\n    superHero1\u79fb\u52a8\uff1a\n        \u8c03\u7528superHero1\u6302\u8f7d\u7684positionComponent\u7684move\u51fd\u6570\n    superHero1\u98de\u884c\uff1a\n        \u8c03\u7528superHero1\u6302\u8f7d\u7684flyComponent\u7684fly\u51fd\u6570\n\n    return worldState\n}\n\n")),(0,l.kt)("p",null,"_createScene\u51fd\u6570\u521b\u5efa\u4e86\u573a\u666f\uff0c\u573a\u666f\u7684\u5185\u5bb9\u8ddf\u4e4b\u524d\u4e00\u6837\uff0c\u90fd\u5305\u62ec\u4e862\u4e2a\u666e\u901a\u82f1\u96c4\u548c2\u4e2a\u8d85\u7ea7\u82f1\u96c4\uff0c\u53ea\u662f\u73b0\u5728\u521b\u5efa\u4e00\u4e2a\u82f1\u96c4\u7684\u65b9\u5f0f\u6539\u53d8\u4e86\uff0c\u5177\u4f53\u53d8\u4e3a\uff1a\u9996\u5148\u521b\u5efa\u4e00\u4e2aGameObject\u548c\u76f8\u5173\u7684\u7ec4\u4ef6\uff1b\u7136\u540e\u6302\u8f7d\u7ec4\u4ef6\u5230GameObject\uff1b\u6700\u540e\u52a0\u5165\u8be5GameObject\u5230World\u4e2d"),(0,l.kt)("p",null,"\u666e\u901a\u82f1\u96c4\u5bf9\u5e94\u7684GameObject\u6302\u8f7d\u7684\u7ec4\u4ef6\u8ddf\u8d85\u7ea7\u82f1\u96c4\u5bf9\u5e94\u7684GameObject\u6302\u8f7d\u7684\u7ec4\u4ef6\u4e5f\u4e0d\u4e00\u6837\uff0c\u5176\u4e2d\u524d\u8005\u6302\u8f7d\u4e86InstanceComponent\uff08\u56e0\u4e3a\u666e\u901a\u82f1\u96c4\u9700\u8981\u4e00\u6b21\u6027\u6279\u91cf\u6e32\u67d3\uff09\uff0c\u540e\u8005\u5219\u6302\u8f7d\u4e86FlyComponent\uff08\u56e0\u4e3a\u8d85\u7ea7\u82f1\u96c4\u591a\u51fa\u4e86\u98de\u884c\u7684\u884c\u4e3a\uff09"),(0,l.kt)("p",null,"\u53e6\u5916\uff0c\u73b0\u5728\u6539\u4e3a\u901a\u8fc7\u8c03\u7528\u5bf9\u5e94\u7ec4\u4ef6\u7684\u51fd\u6570\u800c\u4e0d\u662f\u76f4\u63a5\u64cd\u4f5c\u82f1\u96c4\u6a21\u5757\uff0c\u4ece\u800c\u5b9e\u73b0\u82f1\u96c4\u7684\u201c\u79fb\u52a8\u201d\u3001\u201c\u98de\u884c\u201d"),(0,l.kt)("p",null,"GameObject"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u521b\u5efa\u4e00\u4e2agameObject\nexport let create = (): [gameObjectState, gameObject] => {\n    \u521b\u5efa\u5b83\u7684state\u6570\u636e\uff1a\n        \u6ca1\u6709\u6302\u8f7d\u4efb\u4f55\u7684\u7ec4\u4ef6\n\n    \u8fd4\u56de\u8be5gameObject\n}\n")),(0,l.kt)("p",null,"GameObject\u7684create\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2agameObject\uff0c\u521d\u59cb\u5316\u4e86\u5b83\u7684\u6570\u636e"),(0,l.kt)("p",null,"PositionComponent"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u521b\u5efa\u4e00\u4e2apositionComponent\nexport let create = (): positionComponentState => {\n    \u521b\u5efa\u5b83\u7684state\u6570\u636e\uff1a\n        gameObject\u8bbe\u7f6e\u4e3anull\n        position\u8bbe\u7f6e\u4e3a[0,0,0]\n\n        \u5176\u4e2d\uff1aposition\u4e3a\u4f4d\u7f6e\uff0cgameObject\u4e3a\u6302\u8f7d\u5230\u7684gameObject\n\n    \u8fd4\u56de\u8be5\u7ec4\u4ef6\n}\n")),(0,l.kt)("p",null,"PositionComponent\u7684create\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2apositionComponent\uff0c\u521d\u59cb\u5316\u4e86\u5b83\u7684\u6570\u636e"),(0,l.kt)("p",null,"VelocityComponent"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u521b\u5efa\u4e00\u4e2avelocityComponent\nexport let create = (): velocityComponentState => {\n    \u521b\u5efa\u5b83\u7684state\u6570\u636e\uff1a\n        gameObject\u8bbe\u7f6e\u4e3anull\n        velocity\u8bbe\u7f6e\u4e3a1.0\n\n        \u5176\u4e2d\uff1avelocity\u4e3a\u901f\u5ea6\uff0cgameObject\u4e3a\u6302\u8f7d\u5230\u7684gameObject\n\n    \u8fd4\u56de\u8be5\u7ec4\u4ef6\n}\n")),(0,l.kt)("p",null,"FlyComponent"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u521b\u5efa\u4e00\u4e2aflyComponent\nexport let create = (): flyComponentState => {\n    \u521b\u5efa\u5b83\u7684state\u6570\u636e\uff1a\n        gameObject\u8bbe\u7f6e\u4e3anull\n        maxVelocity\u8bbe\u7f6e\u4e3a1.0\n\n        \u5176\u4e2d\uff1amaxVelocity\u4e3a\u6700\u5927\u901f\u5ea6\uff0cgameObject\u4e3a\u6302\u8f7d\u5230\u7684gameObject\n\n    \u8fd4\u56de\u8be5\u7ec4\u4ef6\n}\n")),(0,l.kt)("p",null,"InstanceComponent"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u521b\u5efa\u4e00\u4e2ainstanceComponent\nexport let create = (): instanceComponentState => {\n    \u521b\u5efa\u5b83\u7684state\u6570\u636e\uff1a\n        gameObject\u8bbe\u7f6e\u4e3anull\n\n        \u5176\u4e2d\uff1agameObject\u4e3a\u6302\u8f7d\u5230\u7684gameObject\n\n    \u8fd4\u56de\u8be5\u7ec4\u4ef6\n}\n")),(0,l.kt)("p",null,"\u8fd9\u4e09\u79cd\u7ec4\u4ef6\u7684create\u51fd\u6570\u7684\u804c\u8d23\u8ddfPositionComponent\u7684create\u51fd\u6570\u7684\u804c\u8d23\u4e00\u6837\uff0c\u4e0d\u4e00\u6837\u7684\u662fInstanceComponent\u7684state\u6570\u636e\u4e2d\u53ea\u6709\u6302\u8f7d\u5230\u7684gameObject\uff0c\u6ca1\u6709\u81ea\u5df1\u7684\u6570\u636e"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u7ec4\u4ef6\u7684state\u6570\u636e\u4e2d\u90fd\u4fdd\u5b58\u4e86\u6302\u8f7d\u5230\u7684gameObject\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u53ef\u4ee5\u901a\u8fc7\u5b83\u6765\u83b7\u5f97\u6302\u8f7d\u5230\u5b83\u4e0a\u7684\u5176\u5b83\u7ec4\u4ef6\uff0c\u4ece\u800c\u4e00\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u64cd\u4f5c\u5176\u5b83\u6302\u8f7d\u7684\u7ec4\u4ef6"),(0,l.kt)("h4",{id:"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801"},"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801"),(0,l.kt)("p",null,"PositionComponent"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"...\n\n//\u83b7\u5f97\u4e00\u4e2a\u7ec4\u4ef6\u7684position\nexport let getPosition = (positionComponentState: positionComponentState) => {\n    return positionComponentState.position\n}\n\n//\u8bbe\u7f6e\u4e00\u4e2a\u7ec4\u4ef6\u7684position\nexport let setPosition = (positionComponentState: positionComponentState, position) => {\n    return {\n        ...positionComponentState,\n        position: position\n    }\n}\n\n...\n\n//\u4e00\u4e2agameObject\u7684\u79fb\u52a8\nexport let move = (worldState: worldState, positionComponentState: positionComponentState): worldState => {\n    //\u83b7\u5f97\u8be5\u7ec4\u4ef6\u7684position\u3001gameObject\n    let [x, y, z] = getPosition(positionComponentState)\n\n    //\u901a\u8fc7\u8be5\u7ec4\u4ef6\u7684gameObject\uff0c\u83b7\u5f97\u6302\u8f7d\u5230\u8be5gameObject\u7684velocityComponent\u7ec4\u4ef6\n    //\u83b7\u5f97\u5b83\u7684velocity\n    let gameObject = getExnFromStrictNull(positionComponentState.gameObject)\n    let velocity = VelocityComponent.getVelocity(GameObject.getVelocityComponentExn(getGameObjectStateExn(worldState, gameObject)))\n\n    //\u6839\u636evelocity\uff0c\u66f4\u65b0\u8be5\u7ec4\u4ef6\u7684position\n    positionComponentState = setPosition(positionComponentState, [x + velocity, y + velocity, z + velocity])\n\n    \u66f4\u65b0worldState\u4e2d\u8be5\u7ec4\u4ef6\u6302\u8f7d\u7684gameObject\u4e2d\u7684\u8be5\u7ec4\u4ef6\u7684\u6570\u636e\n}\n")),(0,l.kt)("p",null,"VelocityComponent"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u83b7\u5f97\u4e00\u4e2a\u7ec4\u4ef6\u7684velocity\nexport let getVelocity = (velocityComponentState: velocityComponentState) => {\n    return velocityComponentState.velocity\n}\n")),(0,l.kt)("p",null,"PositionComponent\u7ef4\u62a4\u4e86position\u6570\u636e\uff0c\u63d0\u4f9b\u4e86\u5b83\u7684get\u3001set\u51fd\u6570\u3002VelocityComponent\u7ef4\u62a4\u4e86velocity\u6570\u636e\uff0c\uff0c\u63d0\u4f9b\u4e86\u5b83\u7684get\u51fd\u6570"),(0,l.kt)("p",null,"\u53e6\u5916\uff0cPositionComponent\u7684move\u51fd\u6570\u5b9e\u73b0\u4e86\u79fb\u52a8\u7684\u884c\u4e3a\u903b\u8f91"),(0,l.kt)("h4",{id:"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801"},"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801"),(0,l.kt)("p",null,"FlyComponent"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u83b7\u5f97\u4e00\u4e2a\u7ec4\u4ef6\u7684maxVelocity\nexport let getMaxVelocity = (flyComponentState: flyComponentState) => {\n    return flyComponentState.maxVelocity\n}\n\n//\u8bbe\u7f6e\u4e00\u4e2a\u7ec4\u4ef6\u7684maxVelocity\nexport let setMaxVelocity = (flyComponentState: flyComponentState, maxVelocity) => {\n    return {\n        ...flyComponentState,\n        maxVelocity: maxVelocity\n    }\n}\n\n//\u4e00\u4e2agameObject\u7684\u98de\u884c\nexport let fly = (worldState: worldState, flyComponentState: flyComponentState): worldState => {\n    //\u83b7\u5f97\u8be5\u7ec4\u4ef6\u7684maxVelocity\u3001gameObject\n    let maxVelocity = getMaxVelocity(flyComponentState)\n    let gameObject = getExnFromStrictNull(flyComponentState.gameObject)\n\n    //\u901a\u8fc7\u8be5\u7ec4\u4ef6\u7684gameObject\uff0c\u83b7\u5f97\u6302\u8f7d\u5230\u8be5gameObject\u7684positionComponent\u7ec4\u4ef6\n    //\u83b7\u5f97\u5b83\u7684position\n    let [x, y, z] = PositionComponent.getPosition(GameObject.getPositionComponentExn(getGameObjectStateExn(worldState, gameObject)))\n\n    //\u901a\u8fc7\u8be5\u7ec4\u4ef6\u7684gameObject\uff0c\u83b7\u5f97\u6302\u8f7d\u5230\u8be5gameObject\u7684velocityComponent\u7ec4\u4ef6\n    //\u83b7\u5f97\u5b83\u7684velocity\n    let velocity = VelocityComponent.getVelocity(GameObject.getVelocityComponentExn(getGameObjectStateExn(worldState, gameObject)))\n\n    //\u6839\u636emaxVelocity\u3001velocity\uff0c\u66f4\u65b0positionComponent\u7ec4\u4ef6\u7684position\n    velocity = velocity < maxVelocity ? (velocity * 2.0) : maxVelocity\n    let positionComponentState = PositionComponent.setPosition(GameObject.getPositionComponentExn(getGameObjectStateExn(worldState, gameObject)), [x + velocity, y + velocity, z + velocity])\n\n    \u66f4\u65b0worldState\u4e2d\u8be5\u7ec4\u4ef6\u6302\u8f7d\u7684gameObject\u4e2d\u7684\u8be5\u7ec4\u4ef6\u7684\u6570\u636e\n}\n")),(0,l.kt)("p",null,"FlyComponent\u7ef4\u62a4\u4e86maxVelocity\u6570\u636e\uff0c\uff0c\u63d0\u4f9b\u4e86\u5b83\u7684get\u3001set\u51fd\u6570\u3002\u53e6\u5916\uff0cFlyComponent\u7684fly\u51fd\u6570\u5b9e\u73b0\u4e86\u98de\u884c\u7684\u884c\u4e3a\u903b\u8f91"),(0,l.kt)("h4",{id:"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801"},"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u903b\u8f91\u8ddf\u4e4b\u524d\u4e00\u6837\uff0c\u6545\u7701\u7565\u4ee3\u7801"),(0,l.kt)("h4",{id:"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801-1"},"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let update = (worldState: worldState): worldState => {\n    \u904d\u5386worldState.gameObjects\uff1a\n        if(gameObject\u6302\u8f7d\u4e86positionComponent){\n            \u66f4\u65b0positionComponent\n        }\n}\n")),(0,l.kt)("p",null,"update\u51fd\u6570\u5b9e\u73b0\u4e86\u66f4\u65b0\uff0c\u5b83\u4f1a\u904d\u5386\u6240\u6709\u7684gameObject\uff0c\u8c03\u7528\u5b83\u6302\u8f7d\u7684PositionComponent\u7ec4\u4ef6\u7684update\u51fd\u6570\u6765\u66f4\u65b0\u8be5\u7ec4\u4ef6\u3002\u6211\u4eec\u770b\u4e0bPositionComponent\u7684update\u51fd\u6570\u7684\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u66f4\u65b0\u4e00\u4e2a\u7ec4\u4ef6\nexport let update = (positionComponentState: positionComponentState): positionComponentState => {\n    \u66f4\u65b0\u8be5\u7ec4\u4ef6\u7684position\n}\n")),(0,l.kt)("p",null,"\u5b83\u7684\u903b\u8f91\u8ddf\u4e4b\u524d\u7684NormalHero\u548cSuperHero\u4e2d\u7684update\u51fd\u6570\u7684\u903b\u8f91\u662f\u4e00\u6837\u7684"),(0,l.kt)("h4",{id:"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801-1"},"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'export let renderOneByOne = (worldState: worldState): void => {\n    let superHeroGameObjects = worldState.gameObjects.filter(gameObjectState => {\n        //\u5224\u65adgameObject\u662f\u4e0d\u662f\u6ca1\u6709\u6302\u8f7dInstanceComponent\n        return !GameObject.hasInstanceComponent(gameObjectState)\n    })\n\n    superHeroGameObjects.forEach(gameObjectState => {\n        console.log("OneByOne\u6e32\u67d3 SuperHero...")\n    })\n}\n\nexport let renderInstances = (worldState: worldState): void => {\n    let normalHeroGameObejcts = worldState.gameObjects.filter(gameObjectState => {\n        //\u5224\u65adgameObject\u662f\u4e0d\u662f\u6302\u8f7d\u4e86InstanceComponent\n        return GameObject.hasInstanceComponent(gameObjectState)\n    })\n\n    console.log("\u6279\u91cfInstance\u6e32\u67d3 NormalHeroes...")\n}\n')),(0,l.kt)("p",null,"renderOneByOne\u51fd\u6570\u5b9e\u73b0\u4e86\u8d85\u7ea7\u82f1\u96c4\u7684\u6e32\u67d3\uff0c\u5b83\u9996\u5148\u5f97\u5230\u4e86\u6240\u6709\u6ca1\u6709\u6302\u8f7dInstanceComponent\u7ec4\u4ef6\u7684gameObject\uff1b\u6700\u540e\u904d\u5386\u5b83\u4eec\uff0c\u4e00\u4e2a\u4e00\u4e2a\u5730\u6e32\u67d3"),(0,l.kt)("p",null,"renderInstances\u51fd\u6570\u5b9e\u73b0\u4e86\u666e\u901a\u82f1\u96c4\u7684\u6e32\u67d3\uff0c\u5b83\u9996\u5148\u5f97\u5230\u4e86\u6240\u6709\u6302\u8f7d\u4e86InstanceComponent\u7ec4\u4ef6\u7684gameObject\uff1b\u6700\u540e\u6279\u91cf\u6e32\u67d3"),(0,l.kt)("h4",{id:"\u8fd0\u884cclient\u7684\u4ee3\u7801-1"},"\u8fd0\u884cClient\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"\u4e0b\u9762\uff0c\u6211\u4eec\u8fd0\u884cClient\u7684\u4ee3\u7801\uff0c\u6253\u5370\u7684\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'\u521d\u59cb\u5316...\n\u66f4\u65b0PositionComponent\n\u66f4\u65b0PositionComponent\n\u66f4\u65b0PositionComponent\n\u66f4\u65b0PositionComponent\nOneByOne\u6e32\u67d3 SuperHero...\nOneByOne\u6e32\u67d3 SuperHero...\n\u6279\u91cfInstance\u6e32\u67d3 NormalHeroes...\n{"gameObjects":{"304480":{"positionComponent":{"gameObject":304480,"position":[0,0,0]},"velocityComponent":{"gameObject":304480,"velocity":1},"flyComponent":{"gameObject":304480,"maxVelocity":10},"instanceComponent":null},"666533":{"positionComponent":{"gameObject":666533,"position":[2,2,2]},"velocityComponent":{"gameObject":666533,"velocity":1},"flyComponent":null,"instanceComponent":{"gameObject":666533}},"838392":{"positionComponent":{"gameObject":838392,"position":[0,0,0]},"velocityComponent":{"gameObject":838392,"velocity":1},"flyComponent":null,"instanceComponent":{"gameObject":838392}},"936933":{"positionComponent":{"gameObject":936933,"position":[6,6,6]},"velocityComponent":{"gameObject":936933,"velocity":1},"flyComponent":{"gameObject":936933,"maxVelocity":10},"instanceComponent":null}}}\n')),(0,l.kt)("p",null,"\u901a\u8fc7\u6253\u5370\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u770b\u5230\u8fd0\u884c\u7684\u6b65\u9aa4\u4e0e\u4e4b\u524d\u4e00\u6837\n\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u66f4\u65b04\u4e2a\u82f1\u96c4\u73b0\u5728\u53d8\u4e3a\u66f4\u65b04\u4e2apositionComponent"),(0,l.kt)("li",{parentName:"ul"},"\u6253\u5370\u7684WorldState\u4e0d\u4e00\u6837")),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0b\u6253\u5370\u7684WorldState\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"WorldState\u7684gameObjects\u5305\u62ec\u4e864\u4e2agameObject\u7684\u6570\u636e\uff0c\u5176\u4e2d\u6709\u4e00\u4e2agameObject\u6570\u636e\u7684positionComponent\u7684position\u4e3a","[2,2,2]","\uff0c\u8bf4\u660e\u5b83\u8fdb\u884c\u4e86\u79fb\u52a8\u64cd\u4f5c\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u6709\u4e00\u4e2agameObject\u6570\u636e\u7684positionComponent\u7684position\u4e3a","[6,6,6]","\uff0c\u8bf4\u660e\u5b83\u8fdb\u884c\u4e86\u79fb\u52a8\u548c\u98de\u884c\u64cd\u4f5c")),(0,l.kt)("p",null,"\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n","\u56e0\u4e3aWorldState\u7684gameObjects\u4e2d\u7684Key\u662f\u968f\u673a\u751f\u6210\u7684id\u503c\uff0c\u6240\u4ee5\u6bcf\u6b21\u6253\u5370\u65f6Key\u90fd\u4e0d\u4e00\u6837"),(0,l.kt)("h3",{id:"\u63d0\u51fa\u95ee\u9898-1"},"\u63d0\u51fa\u95ee\u9898"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u7684\u6570\u636e\u5206\u6563\u5728\u5404\u4e2a\u7ec4\u4ef6\u4e2d\uff0c\u6027\u80fd\u4e0d\u597d",(0,l.kt)("br",{parentName:"li"}),"\u5982position\u6570\u636e\u73b0\u5728\u662f\u4e00\u5bf9\u4e00\u5730\u5206\u6563\u4fdd\u5b58\u5728\u5404\u4e2apositionComponent\u7ec4\u4ef6\u4e2d\uff08\u5373\u4e00\u4e2apositionComponent\u7ec4\u4ef6\u4fdd\u5b58\u81ea\u5df1\u7684position\uff09\uff0c\u90a3\u4e48\u5982\u679c\u9700\u8981\u904d\u5386\u6240\u6709\u7ec4\u4ef6\u7684position\u6570\u636e\uff0c\u5219\u9700\u8981\u904d\u5386\u6240\u6709\u7684positionComponent\u7ec4\u4ef6\uff0c\u5206\u522b\u83b7\u5f97\u5b83\u4eec\u7684position\u3002\u56e0\u4e3a\u6bcf\u4e2apositionComponent\u7ec4\u4ef6\u7684\u6570\u636e\u5e76\u6ca1\u6709\u8fde\u7eed\u5730\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u6240\u4ee5\u4f1a\u9020\u6210\u7f13\u5b58\u547d\u4e2d\u4e22\u5931\uff0c\u5e26\u6765\u6027\u80fd\u635f\u5931")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6d89\u53ca\u591a\u79cd\u7ec4\u4ef6\u7684\u884c\u4e3a\u4e0d\u77e5\u9053\u653e\u5728\u54ea\u91cc",(0,l.kt)("br",{parentName:"li"}),"\u5982\u679c\u8d85\u7ea7\u82f1\u96c4\u589e\u52a0\u4e00\u4e2a\u201c\u8df3\u201d\u7684\u884c\u4e3a\uff0c\u8be5\u884c\u4e3a\u4e0d\u4ec5\u9700\u8981\u4fee\u6539position\u6570\u636e\uff0c\u8fd8\u9700\u8981\u4fee\u6539velocity\u6570\u636e\uff0c\u90a3\u4e48\u5b9e\u73b0\u8be5\u884c\u4e3a\u7684jump\u51fd\u6570\u5e94\u8be5\u653e\u5728\u54ea\u4e2a\u7ec4\u4ef6\u4e2d\u5462\uff1f",(0,l.kt)("br",{parentName:"li"}),"\u56e0\u4e3ajump\u51fd\u6570\u9700\u8981\u540c\u65f6\u4fee\u6539PositionComponent\u7ec4\u4ef6\u7684position\u6570\u636e\u548cVelocityComponent\u7ec4\u4ef6\u7684velocity\u6570\u636e\uff0c\u6240\u4ee5\u5c06\u5b83\u653e\u5728\u4e24\u8005\u4e2d\u4efb\u4f55\u4e00\u79cd\u7ec4\u4ef6\u4e2d\u90fd\u4e0d\u5408\u9002\u3002\u56e0\u6b64\u9700\u8981\u589e\u52a0\u4e00\u79cd\u65b0\u7684\u7ec4\u4ef6-JumpComponent\uff0c\u5bf9\u5e94\u201c\u8df3\u201d\u8fd9\u4e2a\u884c\u4e3a\uff0c\u5e76\u5b9e\u73b0jump\u51fd\u6570\u3002\u8be5\u51fd\u6570\u4f1a\u901a\u8fc7JumpComponent\u6302\u8f7d\u5230\u7684gameObject\u6765\u83b7\u5f97\u6302\u8f7d\u5230\u5b83\u4e0a\u7684PositionComponent\u548cVelocityComponent\u7ec4\u4ef6\uff0c\u4ece\u800c\u4fee\u6539\u5b83\u4eec\u7684\u6570\u636e\u3002",(0,l.kt)("br",{parentName:"li"}),"\u5982\u679c\u589e\u52a0\u66f4\u591a\u7684\u8fd9\u79cd\u6d89\u53ca\u591a\u79cd\u7ec4\u4ef6\u7684\u884c\u4e3a\uff0c\u5c31\u9700\u8981\u4e3a\u6bcf\u4e2a\u8fd9\u6837\u7684\u884c\u4e3a\u589e\u52a0\u4e00\u79cd\u7ec4\u4ef6\u3002\u56e0\u4e3a\u7ec4\u4ef6\u6bd4\u8f83\u91cd\uff0c\u65e2\u6709\u6570\u636e\u53c8\u6709\u903b\u8f91\uff0c\u6240\u4ee5\u589e\u52a0\u7ec4\u4ef6\u7684\u6210\u672c\u8f83\u9ad8\uff1b\u53e6\u5916\uff0c\u56e0\u4e3a\u7ec4\u4ef6\u4e0eGameObject\u662f\u805a\u5408\u5173\u7cfb\uff0c\u800cGameObject\u548cWorld\u4e5f\u662f\u805a\u5408\u5173\u7cfb\uff0c\u5b83\u4eec\u90fd\u5c5e\u4e8e\u5f3a\u5173\u8054\u5173\u7cfb\uff0c\u6240\u4ee5\u589e\u52a0\u7ec4\u4ef6\u4f1a\u8f83\u5f3a\u5730\u5f71\u54cdGameObject\u548cWorld\uff0c\u8fd9\u4e5f\u589e\u52a0\u4e86\u6210\u672c")),(0,l.kt)("h2",{id:"\u4f7f\u7528ecs\u6a21\u5f0f\u6765\u6539\u8fdb"},"\u4f7f\u7528ECS\u6a21\u5f0f\u6765\u6539\u8fdb"),(0,l.kt)("h3",{id:"\u6982\u8ff0\u89e3\u51b3\u65b9\u6848-1"},"\u6982\u8ff0\u89e3\u51b3\u65b9\u6848"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u57fa\u4e8eData Oriented\u7684\u601d\u60f3\u8fdb\u884c\u6539\u8fdb",(0,l.kt)("br",{parentName:"p"}),"\n","\u7ec4\u4ef6\u53ef\u4ee5\u6309\u89d2\u8272\u5206\u4e3aData Oriented\u7ec4\u4ef6\u548c\u5176\u5b83\u7ec4\u4ef6\uff0c\u5176\u4e2d\u524d\u8005\u7684\u7279\u70b9\u662f\u5c5e\u4e8e\u8be5\u89d2\u8272\u7684\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u6709\u6570\u636e\uff0c\u4e14\u7ec4\u4ef6\u7684\u6570\u91cf\u8f83\u591a\uff1b\u540e\u8005\u7684\u7279\u70b9\u662f\u5c5e\u4e8e\u8be5\u89d2\u8272\u7684\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u6ca1\u6709\u6570\u636e\uff0c\u6216\u8005\u7ec4\u4ef6\u7684\u6570\u91cf\u5f88\u5c11\u3002\u8fd9\u91cc\u5177\u4f53\u8bf4\u660e\u4e00\u4e0b\u5404\u79cd\u7ec4\u4ef6\u7684\u89d2\u8272\uff1a\u76ee\u524d\u4e00\u5171\u6709\u56db\u79cd\u7ec4\u4ef6\uff0c\u5b83\u4eec\u662fPositionComponent\u3001VelocityComponent\u3001FlyComponent\u3001InstanceComponent\u3002\u5176\u4e2d\uff0cInstanceComponent\u7ec4\u4ef6\u56e0\u4e3a\u6ca1\u6709\u7ec4\u4ef6\u6570\u636e\uff0c\u6240\u4ee5\u5c5e\u4e8e\u201c\u5176\u5b83\u7ec4\u4ef6\u201d\uff1b\u53e6\u5916\u4e09\u79cd\u7ec4\u4ef6\u5219\u90fd\u5c5e\u4e8e\u201cData Oriented\u7ec4\u4ef6\u201d\u3002",(0,l.kt)("br",{parentName:"p"}),"\n","\u5c5e\u4e8eData Oriented\u7ec4\u4ef6\u7684\u4e09\u79cd\u7ec4\u4ef6\u7684\u6240\u6709\u7ec4\u4ef6\u6570\u636e\u5c06\u4f1a\u5206\u522b\u96c6\u4e2d\u8d77\u6765\uff0c\u4fdd\u5b58\u5728\u5404\u81ea\u7684\u4e00\u5757\u8fde\u7eed\u7684\u5730\u5740\u7a7a\u95f4\u4e2d\uff0c\u5177\u4f53\u5c31\u662f\u5206\u522b\u4fdd\u5b58\u5728\u4e09\u4e2aArrayBuffer\u4e2d")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5c06GameObject\u548c\u5404\u4e2a\u7ec4\u4ef6\u6241\u5e73\u5316",(0,l.kt)("br",{parentName:"p"}),"\n","GameObject\u4e0d\u518d\u6709\u6570\u636e\u548c\u903b\u8f91\u4e86\uff0c\u800c\u53ea\u662f\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684id\u3002\u7ec4\u4ef6\u4e5f\u4e0d\u518d\u6709\u6570\u636e\u548c\u903b\u8f91\u4e86\uff0c\u5176\u4e2d\u5c5e\u4e8e\u201cData Oriented\u7ec4\u4ef6\u201d\u7684\u7ec4\u4ef6\u53ea\u662f\u4e00\u4e2aArrayBuffer\u4e0a\u7684\u7d22\u5f15\uff1b\u5c5e\u4e8e\u201c\u5176\u5b83\u7ec4\u4ef6\u201d\u7684\u7ec4\u4ef6\u53ea\u662f\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684id")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u589e\u52a0Component+GameObject\u8fd9\u4e00\u5c42\uff0c\u5c06\u6241\u5e73\u7684GameObject\u548c\u7ec4\u4ef6\u653e\u5728\u8be5\u5c42\u4e2d"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u589e\u52a0Manager\u8fd9\u4e00\u5c42\uff0c\u6765\u7ba1\u7406GameObject\u548c\u7ec4\u4ef6\u7684\u6570\u636e",(0,l.kt)("br",{parentName:"li"}),"\u8fd9\u4e00\u5c42\u6709GameObjectManager\u548c\u56db\u79cd\u7ec4\u4ef6\u7684Manager\uff0c\u5176\u4e2dGameObjectManager\u8d1f\u8d23\u7ba1\u7406\u6240\u6709\u7684gameObject\uff1b\u56db\u79cd\u7ec4\u4ef6\u7684Manager\u8d1f\u8d23\u7ba1\u7406\u81ea\u5df1\u7684ArrayBuffer\uff0c\u64cd\u4f5c\u5c5e\u4e8e\u8be5\u79cd\u7c7b\u7684\u6240\u6709\u7ec4\u4ef6")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u589e\u52a0System\u8fd9\u4e00\u5c42\uff0c\u6765\u5b9e\u73b0\u884c\u4e3a\u7684\u903b\u8f91",(0,l.kt)("br",{parentName:"li"}),"\u4e00\u4e2aSystem\u5b9e\u73b0\u4e00\u4e2a\u884c\u4e3a\uff0c\u6bd4\u5982\u8fd9\u4e00\u5c42\u4e2d\u7684MoveSystem\u3001FlySystem\u5206\u522b\u5b9e\u73b0\u4e86\u79fb\u52a8\u548c\u98de\u884c\u7684\u884c\u4e3a\u903b\u8f91")),(0,l.kt)("p",null,"\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff1a  "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"GameObject\u548c\u7ec4\u4ef6\u7684\u6570\u636e\u88ab\u79fb\u5230\u4e86Manager\u4e2d\uff0c\u903b\u8f91\u5219\u88ab\u79fb\u5230\u4e86Manager\u548cSystem\u4e2d\u3002\u5176\u4e2d\u53ea\u64cd\u4f5c\u81ea\u5df1\u6570\u636e\u7684\u903b\u8f91\uff08\u5982getPosition\u3001setPosition\uff09\u88ab\u79fb\u5230\u4e86Manager\u4e2d\uff0c\u5176\u5b83\u903b\u8f91\uff08\u901a\u5e38\u4e3a\u884c\u4e3a\u903b\u8f91\uff0c\u9700\u8981\u64cd\u4f5c\u591a\u79cd\u7ec4\u4ef6\uff09\u88ab\u79fb\u5230\u4e86System\u4e2d"),(0,l.kt)("li",{parentName:"ul"},"\u4e00\u79cd\u7ec4\u4ef6\u7684Manager\u53ea\u5bf9\u8be5\u79cd\u7ec4\u4ef6\u8fdb\u884c\u64cd\u4f5c\uff0c\u800c\u4e00\u4e2aSystem\u53ef\u4ee5\u5bf9\u591a\u79cd\u7ec4\u4ef6\u8fdb\u884c\u64cd\u4f5c")),(0,l.kt)("h3",{id:"\u7ed9\u51fauml-2"},"\u7ed9\u51faUML"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9886\u57df\u6a21\u578b")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u9886\u57df\u6a21\u578b\u56fe",src:n(3019).Z})),(0,l.kt)("p",null,"\u603b\u4f53\u6765\u770b\uff0c\u9886\u57df\u6a21\u578b\u5206\u4e3a\u4e94\u4e2a\u90e8\u5206\uff1a\u7528\u6237\u3001World\u3001System\u5c42\u3001Manager\u5c42\u3001Component+GameObject\u5c42\uff0c\u5b83\u4eec\u7684\u4f9d\u8d56\u5173\u7cfb\u662f\u524d\u8005\u4f9d\u8d56\u540e\u8005"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0b\u7528\u6237\u3001World\u8fd9\u4e24\u4e2a\u90e8\u5206\uff1a\nClient\u662f\u7528\u6237"),(0,l.kt)("p",null,"World\u662f\u6e38\u620f\u4e16\u754c\uff0c\u867d\u7136\u4ecd\u7136\u5b9e\u73b0\u4e86\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u903b\u8f91\uff0c\u4e0d\u8fc7\u4e0d\u518d\u7ba1\u7406\u6240\u6709\u7684GameObject\u4e86"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bSystem\u8fd9\u4e00\u5c42\uff1a"),(0,l.kt)("p",null,"\u6709\u591a\u4e2aSystem\uff0c\u6bcf\u4e2aSystem\u5b9e\u73b0\u4e00\u4e2a\u884c\u4e3a\u903b\u8f91\u3002\u6bcf\u4e2aSystem\u7684\u804c\u8d23\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"CreateStateSystem\u5b9e\u73b0\u521b\u5efaWorldState\u7684\u903b\u8f91\uff0c\u521b\u5efa\u7684WorldState\u5305\u62ec\u4e86\u6240\u6709\u7684Manager\u7684state\u6570\u636e\uff1b"),(0,l.kt)("li",{parentName:"ul"},"UpdateSystem\u5b9e\u73b0\u66f4\u65b0\u6240\u6709\u4eba\u7269\u7684position\u7684\u903b\u8f91\uff0c\u5177\u4f53\u662f\u66f4\u65b0\u6240\u6709PositionComponent\u7684position\uff1b"),(0,l.kt)("li",{parentName:"ul"},"MoveSystem\u5b9e\u73b0\u4e00\u4e2a\u4eba\u7269\u7684\u79fb\u52a8\u7684\u903b\u8f91\uff0c\u5177\u4f53\u662f\u6839\u636e\u6302\u8f7d\u5230\u8be5\u4eba\u7269gameObject\u4e0a\u7684\u4e00\u4e2apositionComponent\u548c\u4e00\u4e2avelocityComponent\uff0c\u66f4\u65b0\u8be5positionComponent\u7684position\uff1b"),(0,l.kt)("li",{parentName:"ul"},"FlySystem\u5b9e\u73b0\u4e00\u4e2a\u4eba\u7269\u7684\u98de\u884c\u7684\u903b\u8f91\uff0c\u5177\u4f53\u662f\u6839\u636e\u6302\u8f7d\u5230\u8be5\u4eba\u7269gameObject\u4e0a\u7684\u4e00\u4e2apositionComponent\u3001\u4e00\u4e2avelocityComponent\u3001\u4e00\u4e2aflyComponent\uff0c\u66f4\u65b0\u8be5positionComponent\u7684position\uff1b"),(0,l.kt)("li",{parentName:"ul"},"RenderOneByOneSystem\u5b9e\u73b0\u6e32\u67d3\u6240\u6709\u8d85\u7ea7\u82f1\u96c4\u7684\u903b\u8f91\uff1b"),(0,l.kt)("li",{parentName:"ul"},"RenderInstancesSystem\u5b9e\u73b0\u6e32\u67d3\u6240\u6709\u666e\u901a\u82f1\u96c4\u7684\u903b\u8f91")),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bManager\u8fd9\u4e00\u5c42\uff1a"),(0,l.kt)("p",null,"\u6bcf\u4e2aManager\u90fd\u6709\u4e00\u4e2astate\u6570\u636e"),(0,l.kt)("p",null,"GameObjectManager\u8d1f\u8d23\u7ba1\u7406\u6240\u6709\u7684gameObject"),(0,l.kt)("p",null,"PositionComponentManager\u3001VelocityComponentManager\u3001FlyComponentManager\u3001InstanceComponentManager\u8d1f\u8d23\u7ba1\u7406\u5c5e\u4e8e\u5404\u81ea\u79cd\u7c7b\u7684\u6240\u6709\u7684\u7ec4\u4ef6"),(0,l.kt)("p",null,"PositionComponentManager\u7684state\u6570\u636e\u5305\u62ec\u4e00\u4e2abuffer\u5b57\u6bb5\u548c\u4e00\u4e2apositions\u5b57\u6bb5\uff0c\u5176\u4e2d\u524d\u8005\u662f\u4e00\u4e2aArrayBuffer\uff0c\u4fdd\u5b58\u4e86\u8be5\u79cd\u7ec4\u4ef6\u7684\u6240\u6709\u7ec4\u4ef6\u6570\u636e\uff1b\u540e\u8005\u662fbuffer\u7684\u89c6\u56fe\uff0c\u7528\u4e8e\u8bfb\u5199buffer\u4e2d\u7684position\u6570\u636e"),(0,l.kt)("p",null,"PositionComponentManager\u7684batchUpdate\u51fd\u6570\u8d1f\u8d23\u6279\u91cf\u66f4\u65b0\u6240\u6709\u7684positionComponent\u7ec4\u4ef6\u7684position"),(0,l.kt)("p",null,"\u56e0\u4e3aVelocityComponentManager\u3001FlyComponentManager\u4e0ePositionComponentManager\u4e00\u6837\uff0c\u90fd\u5c5e\u4e8eData Oriented\u7ec4\u4ef6\u7684Manager\uff0c\u6240\u4ee5\u5b83\u4eec\u7684\u6570\u636e\u548c\u51fd\u6570\u7c7b\u4f3c\uff08\u53ea\u662f\u6ca1\u6709batchUpdate\u51fd\u6570\uff09\uff0c\u6545\u5728\u56fe\u4e2d\u7701\u7565\u5b83\u4eec\u7684\u6570\u636e\u548c\u51fd\u6570"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bComponent+GameObject\u8fd9\u4e00\u5c42\uff1a"),(0,l.kt)("p",null,"\u56e0\u4e3aPositionComponent\u3001VelocityComponent\u3001FlyComponent\u5c5e\u4e8eData Oriented\u7ec4\u4ef6\uff0c\u6240\u4ee5\u5b83\u4eec\u662f\u4e00\u4e2aindex\uff0c\u4e5f\u5c31\u662f\u5404\u81eaManager\u7684state\u7684buffer\u4e2d\u7684\u7d22\u5f15\u503c"),(0,l.kt)("p",null,"\u56e0\u4e3aInstanceComponent\u5c5e\u4e8e\u5176\u5b83\u7ec4\u4ef6\uff0c\u6240\u4ee5\u5b83\u662f\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684id"),(0,l.kt)("p",null,"GameObject\u662f\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684id"),(0,l.kt)("p",null,"\u6211\u4eec\u6765\u770b\u4e0b\u4f9d\u8d56\u5173\u7cfb\uff1a"),(0,l.kt)("p",null,"System\u5c42\uff1a"),(0,l.kt)("p",null,"\u56e0\u4e3aCreateSystem\u9700\u8981\u8c03\u7528\u5404\u4e2aManager\u7684createState\u51fd\u6570\u6765\u521b\u5efa\u5b83\u4eec\u7684state\uff0c\u6240\u4ee5\u4f9d\u8d56\u4e86\u6574\u4e2aManager\u5c42"),(0,l.kt)("p",null,"\u56e0\u4e3aUpdateSystem\u9700\u8981\u8c03\u7528PositionComponentManager\u7684batchUpdate\u51fd\u6570\u6765\u66f4\u65b0\uff0c\u6240\u4ee5\u4f9d\u8d56\u4e86PositionComponentManager"),(0,l.kt)("p",null,"\u56e0\u4e3aMoveSystem\u9700\u8981\u8c03\u7528PositionComponentManager\u6765\u83b7\u5f97\u548c\u8bbe\u7f6eposition\uff0c\u5e76\u4e14\u8c03\u7528VelocityComponentManager\u6765\u83b7\u5f97velocity\uff0c\u6240\u4ee5\u4f9d\u8d56\u4e86PositionComponentManager\u3001VelocityComponentManager"),(0,l.kt)("p",null,"\u56e0\u4e3aFlySystem\u9700\u8981\u8c03\u7528PositionComponentManager\u6765\u83b7\u5f97\u548c\u8bbe\u7f6eposition\uff0c\u5e76\u4e14\u8c03\u7528VelocityComponentManager\u3001FlyComponentManager\u6765\u5206\u522b\u83b7\u5f97velocity\u548cmaxVelocity\uff0c\u6240\u4ee5\u4f9d\u8d56\u4e86PositionComponentManager\u3001VelocityComponentManager\u3001FlyComponentManager"),(0,l.kt)("p",null,"\u56e0\u4e3aRenderOneByOneSystem\u548cRenderInstancesSystem\u9700\u8981\u8c03\u7528GameObjectManager\u6765\u83b7\u5f97\u6240\u6709\u7684gameObject\uff0c\u5e76\u8c03\u7528\u5404\u79cd\u7ec4\u4ef6\u7684Manager\u6765\u83b7\u5f97\u7ec4\u4ef6\u6570\u636e\uff0c\u6240\u4ee5\u4f9d\u8d56\u4e86\u6574\u4e2aManager\u5c42"),(0,l.kt)("p",null,"Manager\u5c42\uff1a"),(0,l.kt)("p",null,"\u56e0\u4e3aGameObjectManager\u9700\u8981\u64cd\u4f5cGameObject\uff0c\u6240\u4ee5\u4f9d\u8d56\u4e86GameObject"),(0,l.kt)("p",null,"\u56e0\u4e3a\u5404\u79cd\u7ec4\u4ef6\u7684Manager\u9700\u8981\u64cd\u4f5c\u6240\u6709\u7684\u8be5\u79cd\u7ec4\u4ef6\uff0c\u6240\u4ee5\u4f9d\u8d56\u4e86\u5bf9\u5e94\u7684\u7ec4\u4ef6"),(0,l.kt)("h3",{id:"\u7ed3\u5408uml\u56fe\u63cf\u8ff0\u5982\u4f55\u5177\u4f53\u5730\u89e3\u51b3\u95ee\u9898-1"},"\u7ed3\u5408UML\u56fe\uff0c\u63cf\u8ff0\u5982\u4f55\u5177\u4f53\u5730\u89e3\u51b3\u95ee\u9898"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u73b0\u5728\u5404\u79cd\u7ec4\u4ef6\u7684\u6570\u636e\u90fd\u96c6\u4e2d\u4fdd\u5b58\u5728\u5404\u81eaManager\u7684state\u7684buffer\uff08ArrayBuffer\uff09\u4e2d\uff0c\u904d\u5386\u540c\u4e00\u79cd\u7ec4\u4ef6\u7684\u6240\u6709\u7ec4\u4ef6\u6570\u636e\u5373\u662f\u904d\u5386\u4e00\u4e2aArrayBuffer\u3002\u56e0\u4e3aArrayBuffer\u7684\u6570\u636e\u662f\u8fde\u7eed\u5730\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\u7684\uff0c\u6240\u4ee5\u7f13\u5b58\u547d\u4e2d\u4e0d\u4f1a\u4e22\u5931\uff0c\u4ece\u800c\u63d0\u9ad8\u4e86\u6027\u80fd")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u73b0\u5728\u5c06\u6d89\u53ca\u591a\u79cd\u7ec4\u4ef6\u7684\u884c\u4e3a\u653e\u5728\u5bf9\u5e94\u7684System\u4e2d\u3002\u56e0\u4e3aSystem\u5f88\u8f7b\uff0c\u6ca1\u6709\u6570\u636e\uff0c\u53ea\u6709\u903b\u8f91\uff0c\u6240\u4ee5\u589e\u52a0\u548c\u7ef4\u62a4System\u7684\u6210\u672c\u8f83\u4f4e\uff1b\u53e6\u5916\uff0c\u56e0\u4e3aSystem\u4f4d\u4e8e\u6700\u4e0a\u5c42\uff0c\u6240\u4ee5\u4fee\u6539System\u4e5f\u4e0d\u4f1a\u5f71\u54cdManager\u5c42\u548cComponent+GameObject\u5c42"))),(0,l.kt)("h3",{id:"\u7ed9\u51fa\u4ee3\u7801-2"},"\u7ed9\u51fa\u4ee3\u7801"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u770b\u4e0bClient\u7684\u4ee3\u7801\uff1b",(0,l.kt)("br",{parentName:"p"}),"\n","\u7136\u540e\uff0c\u6211\u4eec\u770b\u4e0bClient\u4ee3\u7801\u4e2d\u7b2c\u4e00\u6b65\u7684\u4ee3\u7801\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efaWorldState\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u56e0\u4e3a\u521b\u5efaWorldState\u65f6\u4f1a\u521b\u5efaData Oriented\u7ec4\u4ef6\u7684Manager\u7684state\uff0c\u5176\u4e2d\u7684\u5173\u5065\u662f\u521b\u5efa\u5404\u81ea\u7684ArrayBuffer\uff0c\u6240\u4ee5\u6211\u4eec\u770b\u4e0b\u521b\u5efa\u5b83\u7684\u4ee3\u7801\uff1b",(0,l.kt)("br",{parentName:"p"}),"\n","\u7136\u540e\uff0c\u6211\u4eec\u770b\u4e0bClient\u4ee3\u7801\u4e2d\u7b2c\u4e8c\u6b65\u7684\u4ee3\u7801\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u56e0\u4e3a\u521b\u5efa\u573a\u666f\u65f6\u64cd\u4f5c\u4e86\u666e\u901a\u82f1\u96c4\u548c\u8d85\u7ea7\u82f1\u96c4\uff0c\u6240\u4ee5\u6211\u4eec\u770b\u4e0b\u5b83\u4eec\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u4f9d\u6b21\u770b\u4e0bClient\u4ee3\u7801\u4e2d\u5269\u4f59\u7684\u4e24\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u770b\u4e0b\u4e3b\u5faa\u73af\u7684\u4e00\u5e27\u4e2d\u6bcf\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801")),(0,l.kt)("p",null,"\u6700\u540e\uff0c\u6211\u4eec\u8fd0\u884cClient\u7684\u4ee3\u7801"),(0,l.kt)("h4",{id:"client\u7684\u4ee3\u7801-2"},"Client\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"Client"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let worldState = World.createState({ positionComponentCount: 10, velocityComponentCount: 10, flyComponentCount: 10 })\n\n\u8ddf\u4e4b\u524d\u4e00\u6837...\n")),(0,l.kt)("p",null,"Client\u7684\u4ee3\u7801\u8ddf\u4e4b\u524d\u7684Client\u7684\u4ee3\u7801\u57fa\u672c\u4e00\u6837\uff0c\u9664\u4e86createState\u51fd\u6570\u7684\u53c2\u6570\u548c_createScene\u51fd\u6570\u4e2d\u521b\u5efa\u573a\u666f\u7684\u65b9\u5f0f\u4e0d\u4e00\u6837\uff0c\u8fd9\u4e2a\u7b49\u4f1a\u518d\u8ba8\u8bba"),(0,l.kt)("h4",{id:"\u521b\u5efaworldstate\u7684\u4ee3\u7801-2"},"\u521b\u5efaWorldState\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createState = CreateStateSystem.createState\n")),(0,l.kt)("p",null,"CreateStateSystem"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createState = ({ positionComponentCount, velocityComponentCount, flyComponentCount }): worldState => {\n    return {\n        gameObjectManagerState: GameObjectManager.createState(),\n        positionComponentManagerState: PositionComponentManager.createState(positionComponentCount),\n        velocityComponentManagerState: VelocityComponentManager.createState(velocityComponentCount),\n        flyComponentManagerState: FlyComponentManager.createState(flyComponentCount),\n        instanceComponentManagerState: InstanceComponentManager.createState()\n    }\n}\n")),(0,l.kt)("p",null,"CreateStateSystem\u7684createState\u51fd\u6570\u521b\u5efa\u4e86WorldState\uff0c\u5b83\u4fdd\u5b58\u4e86\u5404\u4e2aManager\u7684state"),(0,l.kt)("p",null,"\u56e0\u4e3aData Oriented\u7ec4\u4ef6\u7684Manager\u7684state\u5728\u521b\u5efa\u65f6\u8981\u521b\u5efa\u5305\u62ec\u8be5\u79cd\u7ec4\u4ef6\u7684\u6240\u6709\u7ec4\u4ef6\u6570\u636e\u7684ArrayBuffer\uff0c\u9700\u8981\u77e5\u9053\u8be5\u79cd\u7ec4\u4ef6\u7684\u6700\u5927\u4e2a\u6570\uff0c\u6240\u4ee5\u8fd9\u91cc\u7684createState\u51fd\u6570\u63a5\u6536\u4e86\u4e09\u79cdData Oriented\u7ec4\u4ef6\u7684\u6700\u5927\u4e2a\u6570"),(0,l.kt)("h4",{id:"\u521b\u5efaarraybuffer\u7684\u4ee3\u7801"},"\u521b\u5efaArrayBuffer\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"\u6211\u4eec\u4ee5PositionComponentManager\u4e3a\u4f8b\uff0c\u6765\u770b\u4e0b\u5b83\u7684createState\u51fd\u6570\u7684\u76f8\u5173\u4ee3\u7801\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n","position_component/ManagerStateType"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export type state = {\n    maxIndex: number,\n    buffer: ArrayBuffer,\n    positions: Float32Array,\n    ...\n}\n")),(0,l.kt)("p",null,"\u8fd9\u662fPositionComponentManager\u7684state\u7684\u7c7b\u578b\u5b9a\u4e49\uff0c\u5b83\u7684\u5b57\u6bb5\u89e3\u91ca\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"buffer\u5b57\u6bb5\u4fdd\u5b58\u4e86\u4e00\u4e2aArrayBuffer\uff0c\u5b83\u7528\u6765\u4fdd\u5b58\u6240\u6709\u7684positionComponent\u7684\u6570\u636e\u3002\u76ee\u524d\u6bcf\u4e2apositionComponent\u7684\u6570\u636e\u53ea\u6709position\uff0c\u5b83\u7684\u7c7b\u578b\u662f\u4e09\u4e2afloat"),(0,l.kt)("li",{parentName:"ul"},"positions\u5b57\u6bb5\u4fdd\u5b58\u4e86ArrayBuffer\u7684\u4e00\u4e2a\u89c6\u56fe\uff0c\u901a\u8fc7\u5b83\u53ef\u4ee5\u8bfb\u5199\u6240\u6709\u7684positionComponent\u7684position"),(0,l.kt)("li",{parentName:"ul"},"maxIndex\u5b57\u6bb5\u662fArrayBuffer\u4e0a\u6700\u5927\u7684\u7d22\u5f15\u503c\uff0c\u7528\u4e8e\u5728\u521b\u5efa\u4e00\u4e2apositionComponent\u65f6\u751f\u6210\u5b83\u7684index\u503c")),(0,l.kt)("p",null,"position_component/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let _setAllTypeArrDataToDefault = ([positions]: Array<Float32Array>, count, [defaultPosition]) => {\n    range(0, count - 1).forEach(index => {\n        OperateTypeArrayUtils.setPosition(index, defaultPosition, positions)\n    })\n\n    return [positions]\n}\n\nlet _initBufferData = (count, defaultDataTuple): [ArrayBuffer, Array<Float32Array>] => {\n    let buffer = BufferUtils.createBuffer(count)\n\n    let typeArrData = _setAllTypeArrDataToDefault(CreateTypeArrayUtils.createTypeArrays(buffer, count), count, defaultDataTuple)\n\n    return [buffer, typeArrData]\n}\n\nexport let createState = (positionComponentCount: number): state => {\n    let defaultPosition = [0, 0, 0]\n\n    let [buffer, [positions]] = _initBufferData(positionComponentCount, [defaultPosition])\n\n    return {\n        maxIndex: 0,\n        buffer,\n        positions,\n        ...\n    }\n}\n")),(0,l.kt)("p",null,"\u8fd9\u662fPositionComponentManager\u7684createState\u51fd\u6570\u7684\u4ee3\u7801\uff0c\u5176\u4e2d\u8c03\u7528\u7684_initBufferData\u51fd\u6570\u521b\u5efa\u4e86buffer\u548cpositions\uff0c\u5b83\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n","1.\u8c03\u7528BufferUtils\u7684createBuffer\u51fd\u6570\u6765\u521b\u5efa\u5305\u62ec\u6700\u5927\u7ec4\u4ef6\u4e2a\u6570\u7684\u6570\u636e\u7684ArrayBuffer",(0,l.kt)("br",{parentName:"p"}),"\n","2.\u8c03\u7528CreateTypeArrayUtils\u7684createTypeArrays\u51fd\u6570\u6765\u521b\u5efa\u6240\u6709\u7684TypeArray\uff0c\u5b83\u4eec\u662f\u64cd\u4f5cArrayBuffer\u7684\u89c6\u56fe\u3002\u8fd9\u91cc\u5177\u4f53\u662f\u53ea\u521b\u5efa\u4e86\u4e00\u4e2a\u89c6\u56fe\uff1apositions",(0,l.kt)("br",{parentName:"p"}),"\n","3.\u8c03\u7528_setAllTypeArrDataToDefault\u51fd\u6570\u6765\u5c06positions\u7684\u6240\u6709\u7684\u503c\u5199\u4e3a\u9ed8\u8ba4\u503c\uff1a","[0,0,0]"),(0,l.kt)("p",null,"\u4e0b\u9762\u662fBufferUtils\u7684createBuffer\u51fd\u6570\u548cCreateTypeArrayUtils\u7684createTypeArrays\u51fd\u6570\u7684\u76f8\u5173\u4ee3\u7801\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n","position_component/BufferUtils"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let _getPositionSize = () => 3\n\nexport let getPositionOffset = (count) => 0\n\nexport let getPositionLength = (count) => count * _getPositionSize()\n\nexport let getPositionIndex = index => index * _getPositionSize()\n\nlet _getTotalByteLength = (count) => {\n    return count * Float32Array.BYTES_PER_ELEMENT * _getPositionSize()\n}\n\nexport let createBuffer = (count) => {\n    return new ArrayBuffer(_getTotalByteLength(count))\n}\n")),(0,l.kt)("p",null,"position_component/CreateTypeArrayUtils"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createTypeArrays = (buffer, count) => {\n    return [\n        new Float32Array(buffer, BufferUtils.getPositionOffset(count), BufferUtils.getPositionLength(count))\n    ]\n}\n")),(0,l.kt)("p",null,"\u53e6\u5916\u4e24\u79cdData Oriented\u7ec4\u4ef6\u7684Manager\uff08VelocityComponentManager\u3001FlyComponentManager\uff09\u7684createState\u51fd\u6570\u7684\u903b\u8f91\u8ddfPositionComponentManager\u7684createState\u51fd\u6570\u7684\u903b\u8f91\u4e00\u6837\uff0c\u6545\u7701\u7565\u76f8\u5173\u4ee3\u7801"),(0,l.kt)("h4",{id:"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801-2"},"\u521b\u5efa\u573a\u666f\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"Client"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let _createScene = (worldState: worldState): worldState => {\n    \u521b\u5efanormalHero1\uff1a\n        \u521b\u5efagameObject\n        \u521b\u5efapositionComponent\n        \u521b\u5efavelocityComponent\n        \u521b\u5efainstanceComponent\n        \u6302\u8f7dpositionComponent\u3001velocityComponent\u3001instanceComponent\u5230gameObject\n\n    \u521b\u5efanormalHero2\n\n    normalHero1\u79fb\u52a8\uff1a\n        \u8c03\u7528MoveSystem\u7684move\u51fd\u6570\uff0c\u4f20\u5165normalHero1\u7684positionComponent\u3001velocityComponent\n\n    \u521b\u5efasuperHero1\n        \u521b\u5efagameObject\n        \u521b\u5efapositionComponent\n        \u521b\u5efavelocityComponent\n        \u521b\u5efaflyComponent\n        \u6302\u8f7dpositionComponent\u3001velocityComponent\u3001flyComponent\u5230gameObject\n\n    \u521b\u5efasuperHero2\n\n    superHero1\u79fb\u52a8\uff1a\n        \u8c03\u7528MoveSystem\u7684move\u51fd\u6570\uff0c\u4f20\u5165superHero1\u7684positionComponent\u3001velocityComponent\n    superHero1\u98de\u884c\uff1a\n        \u8c03\u7528FlySystem\u7684fly\u51fd\u6570\uff0c\u4f20\u5165superHero1\u7684positionComponent\u3001velocityComponent\u3001flyComponent\n\n    return worldState\n}\n")),(0,l.kt)("p",null,"_createScene\u51fd\u6570\u521b\u5efa\u4e86\u573a\u666f\uff0c\u573a\u666f\u7684\u5185\u5bb9\u8ddf\u4e4b\u524d\u4e00\u6837\uff0c\u90fd\u5305\u62ec\u4e862\u4e2a\u666e\u901a\u82f1\u96c4\u548c2\u4e2a\u8d85\u7ea7\u82f1\u96c4\uff0c\u53ea\u662f\u73b0\u5728\u521b\u5efa\u4e00\u4e2a\u82f1\u96c4\u7684\u65b9\u5f0f\u53c8\u6539\u53d8\u4e86\uff0c\u5177\u4f53\u53d8\u4e3a\uff1a\u73b0\u5728\u4e0d\u9700\u8981\u52a0\u5165GameObject\u5230World\u4e2d"),(0,l.kt)("p",null,"\u53e6\u5916\uff0c\u73b0\u5728\u6539\u4e3a\u901a\u8fc7\u8c03\u7528MoveSystem\u548cFlySystem\u7684\u51fd\u6570\u6765\u64cd\u4f5c\u5bf9\u5e94\u7684\u7ec4\u4ef6\uff0c\u4ece\u800c\u5b9e\u73b0\u82f1\u96c4\u7684\u201c\u79fb\u52a8\u201d\u3001\u201c\u98de\u884c\u201d"),(0,l.kt)("p",null,"gameObject/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createState = (): state => {\n    return {\n        maxUID: 0\n    }\n}\n\n//\u521b\u5efa\u4e00\u4e2agameObject\n//\u4e00\u4e2agameObject\u5c31\u662f\u4e00\u4e2auid\nexport let createGameObject = (state: state): [state, gameObject] => {\n    let uid = state.maxUID\n\n    //\u751f\u6210\u4e00\u4e2auid\n    //uid\u7684\u610f\u601d\u662funique id\uff0c\u5373\u5168\u5c40\u552f\u4e00\u7684id\n    let newUID = uid + 1\n\n    state = {\n        ...state,\n        maxUID: newUID\n    }\n\n    return [state, uid]\n}\n")),(0,l.kt)("p",null,"GameObjectManager\u7684createGameObject\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2agameObject\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684id"),(0,l.kt)("p",null,"position_component/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u521b\u5efa\u4e00\u4e2apositionComponent\n//\u4e00\u4e2apositionComponent\u5c31\u662f\u4e00\u4e2aindex\nexport let createComponent = (state: state): [state, component] => {\n    let index = state.maxIndex\n        \n    //\u751f\u6210\u4e00\u4e2aindex\n    let newIndex = index + 1\n\n    state = {\n        ...state,\n        maxIndex: newIndex\n    }\n\n    return [state, index]\n}\n")),(0,l.kt)("p",null,"PositionComponentManager\u7684createComponent\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2apositionComponent\uff0c\u5b83\u5c31\u662f\u4e00\u4e2aPositionComponentManager\u7684state\u7684buffer\u4e0a\u7684\u7d22\u5f15"),(0,l.kt)("p",null,"VelocityComponentManager\u3001FlyComponentManager\u7684\u76f8\u5173\u4ee3\u7801\u8ddfPositionComponentManager\u7c7b\u4f3c\uff0c\u6545\u7701\u7565\u76f8\u5173\u4ee3\u7801"),(0,l.kt)("p",null,"instance_component/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u521b\u5efa\u4e00\u4e2ainstanceComponent\n//\u4e00\u4e2ainstanceComponent\u5c31\u662f\u4e00\u4e2auid\nexport let createComponent = (state: state): [state, component] => {\n    let uid = state.maxUID\n\n    //\u751f\u6210\u4e00\u4e2aid\n    let newUID = uid + 1\n\n    state = {\n        ...state,\n        maxUID: newUID\n    }\n\n    return [state, uid]\n}\n")),(0,l.kt)("p",null,"InstanceComponentManager\u7684createComponent\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2ainstanceComponent\uff0c\u56e0\u4e3aInstanceComponent\u7ec4\u4ef6\u5c5e\u4e8e\u201c\u5176\u5b83\u7ec4\u4ef6\u201d\uff0c\u6240\u4ee5\u5b83\u8ddfGameObject\u4e00\u6837\u90fd\u662f\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684id\u800c\u4e0d\u662f\u4e00\u4e2aindex"),(0,l.kt)("h4",{id:"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801-1"},"\u79fb\u52a8\u7684\u76f8\u5173\u4ee3\u7801"),(0,l.kt)("p",null,"MoveSystem"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u4e00\u4e2agameObject\u7684\u79fb\u52a8\nexport let move = (worldState: worldState, positionComponent, velocityComponent): worldState => {\n    let [x, y, z] = PositionComponentManager.getPosition(worldState.positionComponentManagerState, positionComponent)\n\n    let velocity = VelocityComponentManager.getVelocity(worldState.velocityComponentManagerState, velocityComponent)\n\n    //\u6839\u636evelocity\uff0c\u66f4\u65b0positionComponent\u7684position\n    let positionComponentManagerState = PositionComponentManager.setPosition(worldState.positionComponentManagerState, positionComponent, [x + velocity, y + velocity, z + velocity])\n\n    return {\n        ...worldState,\n        positionComponentManagerState: positionComponentManagerState\n    }\n}\n")),(0,l.kt)("p",null,"MoveSystem\u7684move\u51fd\u6570\u5b9e\u73b0\u79fb\u52a8\u7684\u884c\u4e3a\u903b\u8f91\u3002\u8fd9\u91cc\u6d89\u53ca\u5230\u8bfb\u5199Data Oriented\u7ec4\u4ef6\u7684ArrayBuffer\u4e0a\u7684\u6570\u636e\u3002\u6211\u4eec\u6765\u770b\u4e0b\u8bfb\u5199PositionComponentManager\u7684positions\u7684\u76f8\u5173\u4ee3\u7801\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n","position_component/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let getPosition = (state: state, component: component) => {\n    return OperateTypeArrayUtils.getPosition(component, state.positions)\n}\n\nexport let setPosition = (state: state, component: component, position) => {\n    OperateTypeArrayUtils.setPosition(component, position, state.positions)\n\n    return state\n}\n")),(0,l.kt)("p",null,"position_component/OperateTypeArrayUtils"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let getPosition = (index, typeArr) => {\n    return TypeArrayUtils.getFloat3Tuple(BufferUtils.getPositionIndex(index), typeArr)\n}\n\nexport let setPosition = (index, data, typeArr) => {\n    TypeArrayUtils.setFloat3(BufferUtils.getPositionIndex(index), data, typeArr)\n}\n")),(0,l.kt)("p",null,"TypeArrayUtils"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let getFloat3Tuple = (index, typeArray) => {\n    return [\n        typeArray[index],\n        typeArray[index + 1],\n        typeArray[index + 2]\n    ]\n}\n\nexport let setFloat3 = (index, param, typeArray) => {\n    typeArray[index] = param[0]\n    typeArray[index + 1] = param[1]\n    typeArray[index + 2] = param[2]\n}\n")),(0,l.kt)("p",null,"position_component/BufferUtils"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let _getPositionSize = () => 3\n\n...\n\nexport let getPositionIndex = index => index * _getPositionSize()\n")),(0,l.kt)("p",null,"\u901a\u8fc7\u4ee3\u7801\u53ef\u77e5\uff0c\u5b9e\u73b0\u201c\u8bfb\u5199PositionComponentManager\u7684ArrayBuffer\u4e0a\u7684\u6570\u636e\u201d\u7684\u601d\u8def\u662f\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n","\u56e0\u4e3a\u4e00\u4e2apositionComponent\u7684\u503c\u662fArrayBuffer\u7684\u7d22\u5f15\uff0c\u6240\u4ee5\u4f7f\u7528\u5b83\u6765\u8bfb\u5199ArrayBuffer\u7684\u89c6\u56fepositions\u4e2d\u7684\u5bf9\u5e94\u6570\u636e"),(0,l.kt)("h4",{id:"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801-1"},"\u98de\u884c\u7684\u76f8\u5173\u4ee3\u7801"),(0,l.kt)("p",null,"FlySystem"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"//\u4e00\u4e2agameObject\u7684\u98de\u884c\nexport let fly = (worldState: worldState, positionComponent, velocityComponent, flyComponent): worldState => {\n    let [x, y, z] = PositionComponentManager.getPosition(worldState.positionComponentManagerState, positionComponent)\n\n    let velocity = VelocityComponentManager.getVelocity(worldState.velocityComponentManagerState, velocityComponent)\n\n    let maxVelocity = FlyComponentManager.getMaxVelocity(worldState.flyComponentManagerState, flyComponent)\n\n    //\u6839\u636emaxVelociy\u3001velocity\uff0c\u66f4\u65b0positionComponent\u7684position\n    velocity = velocity < maxVelocity ? (velocity * 2.0) : maxVelocity\n    let positionComponentManagerState = PositionComponentManager.setPosition(worldState.positionComponentManagerState, positionComponent, [x + velocity, y + velocity, z + velocity])\n\n    return {\n        ...worldState,\n        positionComponentManagerState: positionComponentManagerState\n    }\n\n}\n")),(0,l.kt)("p",null,"FlySystem\u7684fly\u51fd\u6570\u5b9e\u73b0\u4e86\u98de\u884c\u7684\u884c\u4e3a\u903b\u8f91"),(0,l.kt)("h4",{id:"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801-1"},"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u903b\u8f91\u8ddf\u4e4b\u524d\u4e00\u6837\uff0c\u6545\u7701\u7565\u4ee3\u7801"),(0,l.kt)("h4",{id:"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801-2"},"\u4e3b\u5faa\u73af\u4e2d\u66f4\u65b0\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let update = UpdateSystem.update\n")),(0,l.kt)("p",null,"UpdateSystem"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let update = (worldState: worldState): worldState => {\n    let positionComponentManagerState = PositionComponentManager.batchUpdate(worldState.positionComponentManagerState)\n\n    return {\n        ...worldState,\n        positionComponentManagerState: positionComponentManagerState\n    }\n}\n")),(0,l.kt)("p",null,"UpdateSystem\u7684update\u51fd\u6570\u5b9e\u73b0\u4e86\u66f4\u65b0\uff0c\u5b83\u8c03\u7528\u4e86PositionComponentManager\u7684batchUpdate\u51fd\u6570\u6765\u6279\u91cf\u66f4\u65b0\u6240\u6709\u7684positionComponent\u7ec4\u4ef6\u3002\u6211\u4eec\u770b\u4e0bPositionComponentManager\u7684\u76f8\u5173\u4ee3\u7801\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n","position_component/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let getAllComponents = (state: state): Array<component> => {\n    \u4ecestate\u4e2d\u83b7\u5f97\u6240\u6709\u7684positionComponents\n}\n\nexport let batchUpdate = (state: state) => {\n    return getAllComponents(state).reduce((state, component) => {\n        \u66f4\u65b0position\n    }, state)\n}\n")),(0,l.kt)("p",null,"batchUpdate\u51fd\u6570\u904d\u5386\u6240\u6709\u7684positionComponent\uff0c\u66f4\u65b0\u5b83\u4eec\u7684position\u3002\u66f4\u65b0\u7684\u903b\u8f91\u8ddf\u4e4b\u524d\u4e00\u6837"),(0,l.kt)("h4",{id:"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801-2"},"\u4e3b\u5faa\u73af\u4e2d\u6e32\u67d3\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let renderOneByOne = RenderOneByOneSystem.render\n")),(0,l.kt)("p",null,"RenderOneByOneSystem"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'export let render = (worldState: worldState): void => {\n    let superHeroGameObjects = GameObjectManager.getAllGameObjects(worldState.gameObjectManagerState).filter(gameObject => {\n        //\u5224\u65adgameObject\u662f\u4e0d\u662f\u6ca1\u6709\u6302\u8f7dInstanceComponent\n        return !InstanceComponentManager.hasComponent(worldState.instanceComponentManagerState, gameObject)\n    })\n\n    superHeroGameObjects.forEach(gameObjectState => {\n        console.log("OneByOne\u6e32\u67d3 SuperHero...")\n    })\n}\n')),(0,l.kt)("p",null,"gameObject/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let getAllGameObjects = (state: state): Array<gameObject> => {\n    let { maxUID } = state\n\n    //\u8fd4\u56de[0, 1, ...,  maxUID-1]\u7684\u6570\u7ec4\n    return range(0, maxUID - 1)\n}\n")),(0,l.kt)("p",null,"RenderOneByOneSystem\u7684render\u51fd\u6570\u5b9e\u73b0\u4e86\u8d85\u7ea7\u82f1\u96c4\u7684\u6e32\u67d3\uff0c\u5b83\u9996\u5148\u5f97\u5230\u4e86\u6240\u6709\u6ca1\u6709\u6302\u8f7dInstanceComponent\u7ec4\u4ef6\u7684gameObject\uff1b\u6700\u540e\u4e00\u4e2a\u4e00\u4e2a\u5730\u6e32\u67d3"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let renderInstances = RenderInstancesSystem.render\n")),(0,l.kt)("p",null,"RenderInstancesSystem"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'export let render = (worldState: worldState): void => {\n    let normalHeroGameObejcts = GameObjectManager.getAllGameObjects(worldState.gameObjectManagerState).filter(gameObject => {\n        //\u5224\u65adgameObject\u662f\u4e0d\u662f\u6302\u8f7d\u4e86InstanceComponent\n        return InstanceComponentManager.hasComponent(worldState.instanceComponentManagerState, gameObject)\n    })\n\n    console.log("\u6279\u91cfInstance\u6e32\u67d3 NormalHeroes...")\n}\n')),(0,l.kt)("p",null,"RenderInstancesSystem\u7684render\u51fd\u6570\u5b9e\u73b0\u4e86\u666e\u901a\u82f1\u96c4\u7684\u6e32\u67d3\uff0c\u5b83\u9996\u5148\u5f97\u5230\u4e86\u6240\u6709\u6302\u8f7d\u4e86InstanceComponent\u7ec4\u4ef6\u7684gameObject\uff1b\u6700\u540e\u4e00\u6b21\u6027\u6279\u91cf\u6e32\u67d3"),(0,l.kt)("h4",{id:"\u8fd0\u884cclient\u7684\u4ee3\u7801-2"},"\u8fd0\u884cClient\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"\u4e0b\u9762\uff0c\u6211\u4eec\u8fd0\u884cClient\u7684\u4ee3\u7801\uff0c\u6253\u5370\u7684\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'\u521d\u59cb\u5316...\n\u66f4\u65b0PositionComponent: 0\n\u66f4\u65b0PositionComponent: 1\n\u66f4\u65b0PositionComponent: 2\n\u66f4\u65b0PositionComponent: 3\nOneByOne\u6e32\u67d3 SuperHero...\nOneByOne\u6e32\u67d3 SuperHero...\n\u6279\u91cfInstance\u6e32\u67d3 NormalHeroes...\n{"gameObjectManagerState":{"maxUID":4},"positionComponentManagerState":{"maxIndex":4,"buffer":{},"positions":{"0":2,"1":2,"2":2,"3":0,"4":0,"5":0,"6":6,"7":6,"8":6,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"gameObjectMap":{"0":0,"1":1,"2":2,"3":3},"gameObjectPositionMap":{"0":0,"1":1,"2":2,"3":3}},"velocityComponentManagerState":{"maxIndex":4,"buffer":{},"velocitys":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"gameObjectMap":{"0":0,"1":1,"2":2,"3":3},"gameObjectVelocityMap":{"0":0,"1":1,"2":2,"3":3}},"flyComponentManagerState":{"maxIndex":1,"buffer":{},"maxVelocitys":{"0":10,"1":10,"2":10,"3":10,"4":10,"5":10,"6":10,"7":10,"8":10,"9":10},"gameObjectMap":{"0":2,"1":3},"gameObjectFlyMap":{"2":0,"3":1}},"instanceComponentManagerState":{"maxUID":1,"gameObjectMap":{"0":0,"1":1},"gameObjectInstanceMap":{"0":0,"1":1}}}\n')),(0,l.kt)("p",null,"\u901a\u8fc7\u6253\u5370\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u770b\u5230\u8fd0\u884c\u7684\u6b65\u9aa4\u4e0e\u4e4b\u524d\u4e00\u6837\n\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a  "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6253\u5370\u7684WorldState\u4e0d\u4e00\u6837")),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0b\u6253\u5370\u7684WorldState\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"WorldState\u7684gameObjectManagetState\u7684maxUID\u4e3a4\uff0c\u8bf4\u660e\u521b\u5efa\u4e864\u4e2agameObject\uff1b"),(0,l.kt)("li",{parentName:"ul"},"WorldState\u7684positionComponentManagerState\u7684maxIndex\u4e3a4\uff0c\u8bf4\u660e\u521b\u5efa\u4e864\u4e2apositionComponent\uff1b"),(0,l.kt)("li",{parentName:"ul"},"WorldState\u7684positionComponentManagerState\u7684positions\u67093\u4e2a\u8fde\u7eed\u7684\u503c\u662f2\u30012\u30012\uff0c\u8bf4\u660e\u6709\u4e00\u4e2apositionComponent\u7ec4\u4ef6\u8fdb\u884c\u4e86\u79fb\u52a8\u64cd\u4f5c\uff1b\u6709\u53e6\u59163\u4e2a\u8fde\u7eed\u7684\u503c\u662f6\u30016\u30016\uff0c\u8bf4\u660e\u6709\u53e6\u5916\u4e00\u4e2apositionComponent\u7ec4\u4ef6\u8fdb\u884c\u4e86\u79fb\u52a8\u64cd\u4f5c\u548c\u98de\u884c\u64cd\u4f5c\uff1b")),(0,l.kt)("h2",{id:"\u5b9a\u4e49"},"\u5b9a\u4e49"),(0,l.kt)("h3",{id:"\u4e00\u53e5\u8bdd\u5b9a\u4e49"},"\u4e00\u53e5\u8bdd\u5b9a\u4e49"),(0,l.kt)("p",null,"\u7ec4\u5408\u4ee3\u66ff\u7ee7\u627f\uff1b\u8fde\u7eed\u5730\u4fdd\u5b58\u7ec4\u4ef6\u6570\u636e\uff1b\u5206\u79bb\u903b\u8f91\u548c\u6570\u636e"),(0,l.kt)("h3",{id:"\u8865\u5145\u8bf4\u660e"},"\u8865\u5145\u8bf4\u660e"),(0,l.kt)("p",null,"\u201c\u7ec4\u5408\u4ee3\u66ff\u7ee7\u627f\u201d\u662f\u6307\u57fa\u4e8e\u7ec4\u4ef6\u5316\u601d\u60f3\uff0c\u901a\u8fc7GameObject\u7ec4\u5408\u4e0d\u540c\u7684\u7ec4\u4ef6\u4ee3\u66ffGameObject\u5c42\u5c42\u7ee7\u627f"),(0,l.kt)("p",null,"\u201c\u8fde\u7eed\u5730\u4fdd\u5b58\u7ec4\u4ef6\u6570\u636e\u201d\u662f\u6307\u57fa\u4e8eData Oriented\u601d\u60f3\uff0c\u5c06Data Oriented\u7ec4\u4ef6\u7684\u7ec4\u4ef6\u6570\u636e\u96c6\u4e2d\u8d77\u6765\uff0c\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\u8fde\u7eed\u7684\u5730\u5740\u7a7a\u95f4"),(0,l.kt)("p",null,"\u201c\u5206\u79bb\u903b\u8f91\u548c\u6570\u636e\u201d\u662f\u6307\u5c06GameObject\u548c\u7ec4\u4ef6\u6241\u5e73\u5316\uff0c\u5c06\u5b83\u4eec\u7684\u6570\u636e\u653e\u5230Manager\u5c42\uff0c\u5c06\u5b83\u4eec\u7684\u903b\u8f91\u653e\u5230System\u5c42\u548cManager\u5c42\u3002\u5176\u4e2d\uff0c\u53ea\u64cd\u4f5c\u81ea\u5df1\u6570\u636e\u7684\u903b\u8f91\uff08\u5982getPosition\u3001setPosition\uff09\u88ab\u79fb\u5230\u4e86Manager\u4e2d\uff0c\u5176\u5b83\u903b\u8f91\uff08\u901a\u5e38\u4e3a\u884c\u4e3a\u903b\u8f91\uff0c\u9700\u8981\u64cd\u4f5c\u591a\u79cd\u7ec4\u4ef6\uff09\u88ab\u79fb\u5230\u4e86System\u4e2d"),(0,l.kt)("h3",{id:"\u901a\u7528uml"},"\u901a\u7528UML"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9886\u57df\u6a21\u578b")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u9886\u57df\u6a21\u578b\u56fe",src:n(3072).Z})),(0,l.kt)("p",null,"\u603b\u4f53\u6765\u770b\uff0c\u9886\u57df\u6a21\u578b\u5206\u4e3a\u7528\u6237\u3001World\u3001System\u5c42\u3001Manager\u5c42\u3001Component+GameObject\u5c42\u4e94\u4e2a\u90e8\u5206\uff0c\u5b83\u4eec\u7684\u4f9d\u8d56\u5173\u7cfb\u662f\u524d\u8005\u4f9d\u8d56\u540e\u8005\u3002\u5176\u4e2d\uff0cSystem\u5c42\u8d1f\u8d23\u5b9e\u73b0\u884c\u4e3a\u7684\u903b\u8f91\uff1bManager\u5c42\u8d1f\u8d23\u7ba1\u7406\u573a\u666f\u6570\u636e\uff0c\u5373\u7ba1\u7406GameObject\u548c\u7ec4\u4ef6\u7684\u6570\u636e\uff1bComponent+GameObject\u5c42\u4e3a\u7ec4\u4ef6\u548cGameObject\uff0c\u5b83\u4eec\u73b0\u5728\u53ea\u662f\u6709\u4e00\u4e2anumber\u7c7b\u578b\u7684\u6570\u636e\u7684\u503c\u5bf9\u8c61"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0b\u7528\u6237\u8fd9\u4e2a\u90e8\u5206\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Client",(0,l.kt)("br",{parentName:"li"}),"\u8be5\u89d2\u8272\u662f\u7528\u6237")),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bWorld\u8fd9\u4e2a\u90e8\u5206\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"World",(0,l.kt)("br",{parentName:"li"}),"\u8be5\u89d2\u8272\u662f\u95e8\u6237\uff0c\u63d0\u4f9b\u4e86API\uff0c\u5b9e\u73b0\u4e86\u521d\u59cb\u5316\u548c\u4e3b\u5faa\u73af\u7684\u903b\u8f91")),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bSystem\u8fd9\u4e00\u5c42\uff1a"),(0,l.kt)("p",null,"\u4e00\u4e2aSystem\u5b9e\u73b0\u4e00\u4e2a\u884c\u4e3a\u7684\u903b\u8f91"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"CreateStateSystem",(0,l.kt)("br",{parentName:"p"}),"\n","\u8be5\u89d2\u8272\u8d1f\u8d23\u521b\u5efaWorldState")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"OtherSystem",(0,l.kt)("br",{parentName:"p"}),"\n","\u8be5\u89d2\u8272\u662f\u9664\u4e86CreateStateSystem\u4ee5\u5916\u7684\u6240\u6709System\uff0c\u5b83\u4eec\u5404\u81ea\u6709\u4e00\u4e2a\u51fd\u6570action\uff0c\u7528\u4e8e\u5b9e\u73b0\u67d0\u4e2a\u884c\u4e3a"))),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bManager\u8fd9\u4e00\u5c42\uff1a"),(0,l.kt)("p",null,"\u6bcf\u4e2aManager\u90fd\u6709\u4e00\u4e2astate\u6570\u636e"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"GameObjectManager",(0,l.kt)("br",{parentName:"p"}),"\n","\u8be5\u89d2\u8272\u8d1f\u8d23\u7ba1\u7406\u6240\u6709\u7684gameObject")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"DataOrientedComponentManager",(0,l.kt)("br",{parentName:"p"}),"\n","\u8be5\u89d2\u8272\u662f\u4e00\u79cdData Oriented\u7ec4\u4ef6\u7684Manager\uff0c\u8d1f\u8d23\u7ef4\u62a4\u548c\u7ba1\u7406\u8be5\u79cd\u7ec4\u4ef6\u7684\u6240\u6709\u7ec4\u4ef6\u6570\u636e\uff0c\u5c06\u5176\u96c6\u4e2d\u5730\u4fdd\u5b58\u5728\u5404\u81ea\u7684state\u7684buffer\u4e2d",(0,l.kt)("br",{parentName:"p"}),"\n","DataOrientedComponentManager\u7684state\u6570\u636e\u5305\u62ec\u4e00\u4e2abuffer\u5b57\u6bb5\u548c\u591a\u4e2a\u201ctypeArray of buffer\u201d\u5b57\u6bb5\uff0c\u5176\u4e2d\u524d\u8005\u662f\u4e00\u4e2aArrayBuffer\uff0c\u4fdd\u5b58\u4e86\u8be5\u79cd\u7ec4\u4ef6\u7684\u6240\u6709\u7ec4\u4ef6\u6570\u636e\uff1b\u540e\u8005\u662fbuffer\u7684\u591a\u4e2a\u89c6\u56fe\uff0c\u7528\u4e8e\u8bfb\u5199buffer\u4e2d\u5bf9\u5e94\u7684\u6570\u636e  ")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"OtherComponentManager",(0,l.kt)("br",{parentName:"p"}),"\n","\u8be5\u89d2\u8272\u662f\u4e00\u79cd\u5176\u5b83\u7ec4\u4ef6\u7684Manager\uff0c\u8d1f\u8d23\u7ef4\u62a4\u548c\u7ba1\u7406\u8be5\u79cd\u7ec4\u4ef6\u7684\u6240\u6709\u7ec4\u4ef6\u6570\u636e",(0,l.kt)("br",{parentName:"p"}),"\n","OtherComponentManager\u7684state\u6570\u636e\u5305\u62ec\u591a\u4e2a\u201cvalue map\u201d\u5b57\u6bb5\uff0c\u5b83\u4eec\u662f\u591a\u4e2aHash Map\uff0c\u6bcf\u4e2aHash Map\u4fdd\u5b58\u4e00\u7c7b\u7ec4\u4ef6\u6570\u636e"))),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u4e0bComponent+GameObject\u8fd9\u4e00\u5c42\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"DataOrientedComponent",(0,l.kt)("br",{parentName:"p"}),"\n","\u8be5\u89d2\u8272\u662f\u4e00\u79cdData Oriented\u7ec4\u4ef6\u4e2d\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5b83\u662f\u4e00\u4e2aArrayBuffer\u4e0a\u7684\u7d22\u5f15")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"OtherComponent",(0,l.kt)("br",{parentName:"p"}),"\n","\u8be5\u89d2\u8272\u662f\u4e00\u79cd\u5176\u5b83\u7ec4\u4ef6\u4e2d\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5b83\u662f\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684id"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"GameObject",(0,l.kt)("br",{parentName:"li"}),"\u8be5\u89d2\u8272\u662f\u4e00\u4e2agameObject\uff0c\u5b83\u662f\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684id")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u89d2\u8272\u4e4b\u95f4\u7684\u5173\u7cfb")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u53ea\u6709\u4e00\u4e2aCreateStateSystem")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u6709\u591a\u4e2aOtherSystem\uff0c\u6bcf\u4e2aOtherSystem\u5b9e\u73b0\u4e00\u4e2a\u884c\u4e3a")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u53ea\u6709\u4e00\u4e2aGameObjectManager")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u6709\u591a\u4e2aDataOrientedComponentManager\uff0c\u6bcf\u4e2a\u5bf9\u5e94\u4e00\u79cdData Oriented\u7ec4\u4ef6"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u6709\u591a\u4e2aDataOrientedComponent\uff0c\u6bcf\u4e2a\u5bf9\u5e94\u4e00\u79cdData Oriented\u7ec4\u4ef6")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u6709\u591a\u4e2aOtherComponentManager\uff0c\u6bcf\u4e2a\u5bf9\u5e94\u4e00\u79cd\u5176\u5b83\u7ec4\u4ef6"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u6709\u591a\u4e2aOtherComponent\uff0c\u6bcf\u4e2a\u5bf9\u5e94\u4e00\u79cd\u5176\u5b83\u7ec4\u4ef6")),(0,l.kt)("p",null,"System\u5c42\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u56e0\u4e3aCreateSystem\u9700\u8981\u8c03\u7528\u5404\u4e2aManager\u7684createState\u51fd\u6570\u6765\u521b\u5efa\u5b83\u4eec\u7684state\uff0c\u6240\u4ee5\u4f9d\u8d56\u4e86\u6574\u4e2aManager\u5c42")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u56e0\u4e3aOtherSystem\u53ef\u80fd\u9700\u8981\u8c03\u75281\u4e2aGameObjectManager\u6765\u5904\u7406gameObject\u3001\u8c03\u7528\u591a\u4e2aDataOrientedComponentManager\u548cOtherComponentManager\u6765\u5904\u7406\u5404\u81ea\u79cd\u7c7b\u7684\u7ec4\u4ef6\uff0c\u6240\u4ee5\u5b83\u4e0eGameObjectManager\u662f\u4e00\u5bf9\u4e00\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4e0eDataOrientedComponentManager\u548cOtherComponentManager\u90fd\u662f\u4e00\u5bf9\u591a\u7684\u4f9d\u8d56\u5173\u7cfb")),(0,l.kt)("p",null,"Manager\u5c42\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u56e0\u4e3aGameObjectManager\u9700\u8981\u64cd\u4f5c\u591a\u4e2aGameObject\uff0c\u6240\u4ee5\u5b83\u4e0eGameObject\u662f\u4e00\u5bf9\u591a\u7684\u4f9d\u8d56\u5173\u7cfb")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u56e0\u4e3aDataOrientedComponentManager\u548cDataOrientedComponent\u5bf9\u5e94\u540c\u4e00\u79cdData Oriented\u7ec4\u4ef6\uff0c\u4e14\u524d\u8005\u7ba1\u7406\u6240\u6709\u7684\u540e\u8005\uff0c\u6240\u4ee5\u524d\u8005\u548c\u540e\u8005\u662f\u4e00\u5bf9\u591a\u7684\u4f9d\u8d56\u5173\u7cfb")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u56e0\u4e3aOtherComponentManager\u548cOtherComponent\u5bf9\u5e94\u540c\u4e00\u79cd\u5176\u5b83\u7ec4\u4ef6\uff0c\u4e14\u524d\u8005\u7ba1\u7406\u6240\u6709\u7684\u540e\u8005\uff0c\u6240\u4ee5\u524d\u8005\u548c\u540e\u8005\u662f\u4e00\u5bf9\u591a\u7684\u4f9d\u8d56\u5173\u7cfb"))),(0,l.kt)("p",null,"Component+GameObject\u5c42\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u56e0\u4e3a\u4e00\u4e2aGameObject\u53ef\u4ee5\u6302\u8f7d\u5404\u79cd\u7ec4\u4ef6\uff0c\u5176\u4e2d\u6bcf\u79cd\u7ec4\u4ef6\u53ea\u80fd\u6302\u8f7d\u4e00\u4e2a\uff0c\u6240\u4ee5GameObject\u4e0eDataOrientedComponent\u3001OtherComponent\u90fd\u662f\u4e00\u5bf9\u4e00\u7684\u7ec4\u5408\u5173\u7cfb")),(0,l.kt)("h3",{id:"\u89d2\u8272\u7684\u62bd\u8c61\u4ee3\u7801"},"\u89d2\u8272\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"\u4e0b\u9762\u6211\u4eec\u6765\u770b\u770b\u5404\u4e2a\u89d2\u8272\u7684\u62bd\u8c61\u4ee3\u7801\uff1a"),(0,l.kt)("p",null,"\u6211\u4eec\u6309\u7167\u4f9d\u8d56\u5173\u7cfb\uff0c\u4ece\u4e0a\u5f80\u4e0b\u4f9d\u6b21\u770b\u4e0b\u9886\u57df\u6a21\u578b\u4e2d\u7528\u6237\u3001World\u3001System\u5c42\u3001Manager\u5c42\u3001Component+GameObject\u5c42\u8fd9\u4e94\u4e2a\u90e8\u5206\u7684\u62bd\u8c61\u4ee3\u7801\uff1a"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u770b\u4e0b\u5c5e\u4e8e\u7528\u6237\u7684\u62bd\u8c61\u4ee3\u7801",(0,l.kt)("br",{parentName:"p"}),"\n","\u7136\u540e\uff0c\u6211\u4eec\u770b\u4e0bWorld\u7684\u62bd\u8c61\u4ee3\u7801",(0,l.kt)("br",{parentName:"p"}),"\n","\u7136\u540e\uff0c\u6211\u4eec\u770b\u4e0bSystem\u5c42\u7684\u62bd\u8c61\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"CreateStateSystem\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"OtherSystem\u7684\u62bd\u8c61\u4ee3\u7801")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u770b\u4e0bManager\u5c42\u7684\u62bd\u8c61\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"GameObjectManager\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"DataOrientedComponentManager\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"OtherComponentManager\u7684\u62bd\u8c61\u4ee3\u7801")),(0,l.kt)("p",null,"\u6700\u540e\uff0c\u6211\u4eec\u770b\u4e0bComponent+GameObject\u5c42\u7684\u62bd\u8c61\u4ee3\u7801\uff0c\u5b83\u4eec\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"GameObject\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"DataOrientedComponent\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("li",{parentName:"ul"},"OtherComponent\u7684\u62bd\u8c61\u4ee3\u7801")),(0,l.kt)("h4",{id:"\u7528\u6237\u7684\u62bd\u8c61\u4ee3\u7801"},"\u7528\u6237\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"Client"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let _createScene = (worldState: worldState): worldState => {\n    \u521b\u5efagameObject1\n    \u521b\u5efa\u7ec4\u4ef6\n    \u6302\u8f7d\u7ec4\u4ef6\n\n    \u89e6\u53d1gameObject1\u7684\u884c\u4e3a\n\n    \u521b\u5efa\u66f4\u591a\u7684gameObjects...\n\n    return worldState\n}\n\nlet worldState = World.createState({ dataOrientedComponent1Count: xx })\n\nworldState = _createScene(worldState)\n\nworldState = World.init(worldState)\n\nWorld.loop(worldState)\n")),(0,l.kt)("h4",{id:"world\u7684\u62bd\u8c61\u4ee3\u7801"},"World\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"World"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createState = CreateStateSystem.createState\n\nexport let action1 = OtherSystem1.action\n\nexport let init = (worldState: worldState): worldState => {\n    \u521d\u59cb\u5316...\n\n    return worldState\n}\n\n\n//\u5047\u5b9e\u73b0\nlet requestAnimationFrame = (func) => {\n}\n\n\nexport let loop = (worldState: worldState) => {\n    \u8c03\u7528OtherSystem\u6765\u66f4\u65b0\n\n    \u8c03\u7528OtherSystem\u6765\u6e32\u67d3\n\n    requestAnimationFrame(\n        (time) => {\n            loop(worldState)\n        }\n    )\n}\n")),(0,l.kt)("h4",{id:"createstatesystem\u7684\u62bd\u8c61\u4ee3\u7801"},"CreateStateSystem\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"CreateStateSystem"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createState = ({ dataOrientedComponent1Count }): worldState => {\n    return {\n        gameObjectManagerState: GameObjectManager.createState(),\n        dataOrientedComponent1ManagerState: DataOrientedComponent1Manager.createState(dataOrientedComponent1Count),\n        otherComponent1ManagerState: OtherComponent1Manager.createState(),\n\n        \u521b\u5efa\u66f4\u591a\u7684DataOrientedManagerState\u548cOtherComponentManagerState...\n    }\n}\n")),(0,l.kt)("h4",{id:"othersystem\u7684\u62bd\u8c61\u4ee3\u7801"},"OtherSystem\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"OtherSystem1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let action = (worldState: worldState, gameObject?: gameObject, dataOrientedComponentX?: dataOrientedComponentX, otherComponentX?: otherComponentX) => {\n    \u884c\u4e3a\u7684\u903b\u8f91...\n\n    return worldState\n}\n")),(0,l.kt)("p",null,"\u6709\u591a\u4e2aOtherSystem\uff0c\u8fd9\u91cc\u53ea\u7ed9\u51fa\u4e00\u4e2aOtherSystem\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("h4",{id:"gameobjectmanager\u7684\u62bd\u8c61\u4ee3\u7801"},"GameObjectManager\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"gameObject/ManagerStateType"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export type state = {\n    maxUID: number\n}\n")),(0,l.kt)("p",null,"gameObject/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createState = (): state => {\n    return {\n        maxUID: 0\n    }\n}\n\nexport let createGameObject = (state: state): [state, gameObject] => {\n    let uid = state.maxUID\n\n    let newUID = uid + 1\n\n    state = {\n        ...state,\n        maxUID: newUID\n    }\n\n    return [state, uid]\n}\n\nexport let getAllGameObjects = (state: state): Array<gameObject> => {\n    let { maxUID } = state\n\n    return range(0, maxUID - 1)\n}\n")),(0,l.kt)("h4",{id:"dataorientedcomponentmanager\u7684\u62bd\u8c61\u4ee3\u7801"},"DataOrientedComponentManager\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"dataoriented_component1/ManagerStateType"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export type TypeArrayType = Float32Array | Uint8Array | Uint16Array | Uint32Array\n\nexport type state = {\n    maxIndex: number,\n    //buffer\u4fdd\u5b58\u4e86\u8be5\u79cd\u7ec4\u4ef6\u6240\u6709\u7684value1\u3001value2\u3001...\u3001valueX\u6570\u636e\n    buffer: ArrayBuffer,\n    //\u8be5\u79cd\u7ec4\u4ef6\u6240\u6709\u7684value1\u6570\u636e\u7684\u89c6\u56fe\n    value1s: TypeArrayType,\n    //\u8be5\u79cd\u7ec4\u4ef6\u6240\u6709\u7684value2\u6570\u636e\u7684\u89c6\u56fe\n    value2s: TypeArrayType,\n    \u66f4\u591avalueXs...,\n\n    ...\n}\n")),(0,l.kt)("p",null,"dataoriented_component1/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'let _setAllTypeArrDataToDefault = ([value1s, value2s]: Array<Float32Array>, count, [defaultValue1, defaultValue2]) => {\n    range(0, count - 1).forEach(index => {\n        OperateTypeArrayUtils.setValue1(index, defaultValue1, value1s)\n        OperateTypeArrayUtils.setValue2(index, defaultValue2, value2s)\n    })\n\n    return [value1s, value2s]\n}\n\nlet _initBufferData = (count, defaultDataTuple): [ArrayBuffer, Array<TypeArrayType>] => {\n    let buffer = BufferUtils.createBuffer(count)\n\n    let typeArrData = _setAllTypeArrDataToDefault(CreateTypeArrayUtils.createTypeArrays(buffer, count), count, defaultDataTuple)\n\n    return [buffer, typeArrData]\n}\n\nexport let createState = (dataorientedComponentCount: number): state => {\n    let defaultValue1 = default value1\n    let defaultValue2 = default value2\n\n    let [buffer, [value1s, value2s]] = _initBufferData(dataorientedComponentCount, [defaultValue1, defaultValue2])\n\n    return {\n        maxIndex: 0,\n        buffer,\n        value1s,\n        value2s,\n        ...\n    }\n}\n\nexport let createComponent = (state: state): [state, component] => {\n    let index = state.maxIndex\n\n    let newIndex = index + 1\n\n    state = {\n        ...state,\n        maxIndex: newIndex\n    }\n\n    return [state, index]\n}\n\n...\n\nexport let getAllComponents = (state: state): Array<component> => {\n    \u4ecestate\u4e2d\u83b7\u5f97\u6240\u6709\u7684dataorientedComponent1s\n}\n\nexport let getValue1 = (state: state, component: component) => {\n    return OperateTypeArrayUtils.getValue1(component, state.value1s)\n}\n\nexport let setValue1 = (state: state, component: component, position) => {\n    OperateTypeArrayUtils.setValue1(component, position, state.value1s)\n\n    return state\n}\n\nget/set value2...\n\nexport let batchOperate = (state: state) => {\n    let allComponents = getAllComponents(state)\n\n    console.log("\u6279\u91cf\u64cd\u4f5c")\n\n    return state\n}\n')),(0,l.kt)("p",null,"dataoriented_component1/BufferUtils"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u8fd9\u91cc\u53ea\u7ed9\u51fa\u4e86\u4e24\u4e2avalue\u7684\u60c5\u51b5\n// \u66f4\u591a\u7684value\u4e5f\u4ee5\u6b64\u7c7b\u63a8...\n\nlet _getValue1Size = () => value1 size\n\nlet _getValue2Size = () => value2 size\n\nexport let getValue1Offset = () => 0\n\nexport let getValue2Offset = (count) => getValue1Offset() + getValue1Length(count) * TypeArray2.BYTES_PER_ELEMENT\n\nexport let getValue1Length = (count) => count * _getValue1Size()\n\nexport let getValue2Length = (count) => count * _getValue2Size()\n\nexport let getValue1Index = index => index * _getValue1Size()\n\nexport let getValue2Index = index => index * _getValue2Size()\n\nlet _getTotalByteLength = (count) => {\n    return count * (TypeArray1.BYTES_PER_ELEMENT * (_getValue1Size() + TypeArray2.BYTES_PER_ELEMENT * (_getValue2Size())))\n}\n\nexport let createBuffer = (count) => {\n    return new ArrayBuffer(_getTotalByteLength(count))\n}\n")),(0,l.kt)("p",null,"dataoriented_component1/CreateTypeArrayUtils"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export let createTypeArrays = (buffer, count) => {\n    return [\n        new Float32Array(buffer, BufferUtils.getValue1Offset(), BufferUtils.getValue1Length(count)),\n        new Float32Array(buffer, BufferUtils.getValue2Offset(count), BufferUtils.getValue2Length(count)),\n    ]\n}\n")),(0,l.kt)("p",null,"\u6709\u591a\u4e2aDataOrientedComponentManager\uff0c\u8fd9\u91cc\u53ea\u7ed9\u51fa\u4e00\u4e2aDataOrientedComponentManager\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("h4",{id:"othercomponentmanager\u7684\u62bd\u8c61\u4ee3\u7801"},"OtherComponentManager\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"other_component1/ManagerStateType"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export type state = {\n    maxUID: number,\n    //value1Map\u7528\u6765\u4fdd\u5b58\u8be5\u79cd\u7ec4\u4ef6\u6240\u6709\u7684value1\u6570\u636e\n    value1Map: Map<component, value1 type>,\n    \u66f4\u591avalueXMap...,\n\n    ...\n}\n")),(0,l.kt)("p",null,"other_component1/Manager"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'export let createState = (): state => {\n    return {\n        maxUID: 0,\n        value1Map: Map(),\n        ...\n    }\n}\n\nexport let createComponent = (state: state): [state, component] => {\n    let uid = state.maxUID\n\n    let newUID = uid + 1\n\n    state = {\n        ...state,\n        maxUID: newUID\n    }\n\n    return [state, uid]\n}\n\n...\n\nexport let getAllComponents = (state: state): Array<component> => {\n    \u4ecestate\u4e2d\u83b7\u5f97\u6240\u6709\u7684otherComponent1s\n}\n\nexport let getValue1 = (state: state, component: component) => {\n    return getExnFromStrictUndefined(state.value1Map.get(component))\n}\n\nexport let setValue1 = (state: state, component: component, value1) => {\n    return {\n        ...state,\n        value1Map: state.value1Map.set(component, value1)\n    }\n}\n\nexport let batchOperate = (state: state) => {\n    let allComponents = getAllComponents(state)\n\n    console.log("\u6279\u91cf\u64cd\u4f5c")\n\n    return state\n}\n')),(0,l.kt)("p",null,"\u6709\u591a\u4e2aOtherComponentManager\uff0c\u8fd9\u91cc\u53ea\u7ed9\u51fa\u4e00\u4e2aOtherComponentManager\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("h4",{id:"gameobject\u7684\u62bd\u8c61\u4ee3\u7801"},"GameObject\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"GameObjectType"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"type id = number\n\nexport type gameObject = id\n")),(0,l.kt)("h4",{id:"dataorientedcomponent\u7684\u62bd\u8c61\u4ee3\u7801"},"DataOrientedComponent\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"DataOrientedComponent1Type"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"type index = number\n\nexport type component = index\n")),(0,l.kt)("p",null,"\u6709\u591a\u4e2aDataOrientedComponent\uff0c\u8fd9\u91cc\u53ea\u7ed9\u51fa\u4e00\u4e2aDataOrientedComponent\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("h4",{id:"othercomponent\u7684\u62bd\u8c61\u4ee3\u7801"},"OtherComponent\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("p",null,"OtherComponent1Type"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"type id = number\n\nexport type component = id\n")),(0,l.kt)("p",null,"\u6709\u591a\u4e2aOtherComponent\uff0c\u8fd9\u91cc\u53ea\u7ed9\u51fa\u4e00\u4e2aOtherComponent\u7684\u62bd\u8c61\u4ee3\u7801"),(0,l.kt)("h3",{id:"\u9075\u5faa\u7684\u8bbe\u8ba1\u539f\u5219\u5728uml\u4e2d\u7684\u4f53\u73b0"},"\u9075\u5faa\u7684\u8bbe\u8ba1\u539f\u5219\u5728UML\u4e2d\u7684\u4f53\u73b0"),(0,l.kt)("p",null,"ECS\u6a21\u5f0f\u4e3b\u8981\u9075\u5faa\u4e0b\u9762\u7684\u8bbe\u8ba1\u539f\u5219\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5355\u4e00\u804c\u8d23\u539f\u5219",(0,l.kt)("br",{parentName:"li"}),"\u6bcf\u4e2aSystem\u53ea\u5b9e\u73b0\u4e00\u4e2a\u884c\u4e3a\uff1b\u6bcf\u4e2a\u7ec4\u4ef6\u7684Manager\u53ea\u7ba1\u7406\u4e00\u79cd\u7ec4\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"\u5408\u6210\u590d\u7528\u539f\u5219",(0,l.kt)("br",{parentName:"li"}),"GameObject\u7ec4\u5408\u4e86\u591a\u4e2a\u7ec4\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"\u63a5\u53e3\u9694\u79bb\u539f\u5219",(0,l.kt)("br",{parentName:"li"}),"GameObject\u548c\u7ec4\u4ef6\u7ecf\u8fc7\u4e86\u6241\u5e73\u5316\u5904\u7406\uff0c\u79fb\u9664\u4e86\u6570\u636e\u548c\u903b\u8f91\uff0c\u6539\u4e3a\u53ea\u662f\u6709\u4e00\u4e2anumber\u7c7b\u578b\u6570\u636e\u7684\u503c\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"\u6700\u5c11\u77e5\u8bc6\u539f\u5219",(0,l.kt)("br",{parentName:"li"}),"World\u3001System\u3001Manager\u3001Component+GameObject\u8fd9\u51e0\u4e2a\u5c42\u53ea\u80fd\u4e0a\u5c42\u4f9d\u8d56\u4e0b\u5c42\uff0c\u4e0d\u80fd\u8de8\u5c42\u4f9d\u8d56"),(0,l.kt)("li",{parentName:"ul"},"\u5f00\u95ed\u539f\u5219",(0,l.kt)("br",{parentName:"li"}),"\u8981\u589e\u52a0\u4e00\u79cd\u884c\u4e3a\uff0c\u53ea\u9700\u8981\u589e\u52a0\u4e00\u4e2aSystem\uff0c\u4e0d\u4f1a\u5f71\u54cdManager")),(0,l.kt)("h2",{id:"\u5e94\u7528"},"\u5e94\u7528"),(0,l.kt)("h3",{id:"\u4f18\u70b9"},"\u4f18\u70b9"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u7ec4\u4ef6\u7684\u6570\u636e\u96c6\u4e2d\u8fde\u7eed\u5730\u4fdd\u5b58\u5728ArrayBuffer\u4e2d\uff0c\u589e\u52a0\u4e86\u7f13\u5b58\u547d\u4e2d\uff0c\u63d0\u9ad8\u4e86\u8bfb\u5199\u7684\u6027\u80fd")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u521b\u5efa\u548c\u5220\u9664\u7ec4\u4ef6\u7684\u6027\u80fd\u4e5f\u5f88\u597d\uff0c\u56e0\u4e3a\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u5206\u914d\u6216\u8005\u9500\u6bc1\u5185\u5b58\uff0c\u6240\u4ee5\u6ca1\u6709\u5783\u573e\u56de\u6536\u7684\u5f00\u9500",(0,l.kt)("br",{parentName:"p"}),"\n","\u8fd9\u662f\u56e0\u4e3a\u5728\u521b\u5efaArrayBuffer\u65f6\u5c31\u9884\u5148\u6309\u7167\u6700\u5927\u7ec4\u4ef6\u4e2a\u6570\u5206\u914d\u4e86\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\uff0c\u6240\u4ee5\u5728\u521b\u5efa\u7ec4\u4ef6\u65f6\uff0c\u53ea\u662f\u8fd4\u56de\u4e00\u4e2a\u5f53\u524d\u6700\u5927\u7d22\u5f15(maxIndex)\u7684\u503c\u800c\u5df2\uff1b\u5728\u5220\u9664\u7ec4\u4ef6\u65f6\uff0c\u53ea\u662f\u5c06ArrayBuffer\u4e2d\u8be5\u7ec4\u4ef6\u5bf9\u5e94\u7684\u6570\u636e\u8fd8\u539f\u4e3a\u9ed8\u8ba4\u503c\u800c\u5df2"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u804c\u8d23\u5212\u5206\u660e\u786e\uff0c\u884c\u4e3a\u7684\u903b\u8f91\u5e94\u8be5\u653e\u5728\u54ea\u91cc\u5f88\u6e05\u695a",(0,l.kt)("br",{parentName:"p"}),"\n","\u5bf9\u4e8e\u53ea\u6d89\u53ca\u5230\u64cd\u4f5c\u4e00\u79cd\u7ec4\u4ef6\u7684\u884c\u4e3a\u903b\u8f91\uff0c\u5219\u5c06\u5176\u653e\u5728\u8be5\u7ec4\u4ef6\u5bf9\u5e94\u7684Manager\uff08\u5982\u5c06batchUpdate position\u7684\u903b\u8f91\u653e\u5230PositionComponentManager\u7684batchUpdate\u51fd\u6570\u4e2d\uff09\uff1b\u6d89\u53ca\u5230\u591a\u79cd\u7ec4\u4ef6\u7684\u884c\u4e3a\u903b\u8f91\u5219\u653e\u5728\u5bf9\u5e94\u7684System\u4e2d\uff08\u5982\u5c06\u98de\u884c\u884c\u4e3a\u653e\u5230FlySystem\u4e2d\uff09\uff1b")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u589e\u52a0\u884c\u4e3a\u5f88\u5bb9\u6613",(0,l.kt)("br",{parentName:"p"}),"\n","\u56e0\u4e3a\u4e00\u4e2a\u884c\u4e3a\u5bf9\u5e94\u4e00\u4e2aSystem\uff0c\u6240\u4ee5\u8981\u589e\u52a0\u4e00\u4e2a\u884c\u4e3a\uff0c\u5219\u53ea\u9700\u589e\u52a0\u4e00\u4e2a\u5bf9\u5e94\u7684System\u5373\u53ef\uff0c\u8fd9\u4e0d\u4f1a\u5f71\u54cd\u5230Manager\u3002\u53e6\u5916\uff0c\u56e0\u4e3aSystem\u53ea\u6709\u903b\u8f91\u6ca1\u6709\u6570\u636e\uff0c\u6240\u4ee5\u589e\u52a0\u548c\u7ef4\u62a4System\u5f88\u5bb9\u6613"))),(0,l.kt)("h3",{id:"\u7f3a\u70b9"},"\u7f3a\u70b9"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u9700\u8981\u8f6c\u6362\u4e3a\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u601d\u7ef4",(0,l.kt)("br",{parentName:"li"}),"\u4e60\u60ef\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u540c\u5b66\u503e\u5411\u4e8e\u8bbe\u8ba1\u4e00\u4e2a\u5305\u62ec\u6570\u636e\u548c\u903b\u8f91\u7684\u7ec4\u4ef6\u7c7b\uff0c\u800cECS\u6a21\u5f0f\u5219\u5c06\u5176\u6241\u5e73\u5316\u4e3a\u4e00\u4e2a\u503c\u5bf9\u8c61\uff0c\u8fd9\u7b26\u5408\u51fd\u6570\u5f0f\u7f16\u7a0b\u4e2d\u4e00\u5207\u90fd\u662f\u6570\u636e\u7684\u601d\u7ef4\u6a21\u5f0f\u3002",(0,l.kt)("br",{parentName:"li"}),"\u53e6\u5916\uff0cECS\u4e2d\u7684System\u5176\u5b9e\u5c31\u53ea\u662f\u4e00\u4e2a\u51fd\u6570\u800c\u5df2\uff0c\u672c\u8eab\u6ca1\u6709\u6570\u636e\uff0c\u8fd9\u4e5f\u7b26\u5408\u51fd\u6570\u5f0f\u7f16\u7a0b\u4e2d\u51fd\u6570\u662f\u7b2c\u4e00\u516c\u6c11\u7684\u601d\u7ef4\u6a21\u5f0f\u3002",(0,l.kt)("br",{parentName:"li"}),"\u7ec8\u4e0a\u6240\u8ff0\uff0c\u5982\u679c\u4f7f\u7528\u51fd\u6570\u5f0f\u7f16\u7a0b\u8303\u5f0f\u7684\u540c\u5b66\u80fd\u591f\u66f4\u5bb9\u6613\u5730\u4f7f\u7528ECS\u6a21\u5f0f")),(0,l.kt)("h3",{id:"\u4f7f\u7528\u573a\u666f"},"\u4f7f\u7528\u573a\u666f"),(0,l.kt)("h4",{id:"\u573a\u666f\u63cf\u8ff0"},"\u573a\u666f\u63cf\u8ff0"),(0,l.kt)("p",null,"\u6e38\u620f\u7684\u573a\u666f\u4e2d\u6709\u5f88\u591a\u79cd\u7c7b\u7684\u4eba\u7269\uff0c\u4eba\u7269\u7684\u884c\u4e3a\u5f88\u591a\u6216\u8005\u5f88\u590d\u6742"),(0,l.kt)("h4",{id:"\u5177\u4f53\u6848\u4f8b"},"\u5177\u4f53\u6848\u4f8b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6709\u5f88\u591a\u79cd\u7c7b\u7684\u6e38\u620f\u4eba\u7269",(0,l.kt)("br",{parentName:"p"}),"\n","\u901a\u8fc7\u6302\u8f7d\u4e0d\u540c\u7684\u7ec4\u4ef6\u5230GameObject\uff0c\u6765\u5b9e\u73b0\u4e0d\u540c\u79cd\u7c7b\u7684\u6e38\u620f\u4eba\u7269\uff0c\u4ee3\u66ff\u7ee7\u627f")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6e38\u620f\u4eba\u7269\u6709\u5f88\u591a\u7684\u884c\u4e3a\uff0c\u800c\u4e14\u8fd8\u7ecf\u5e38\u4f1a\u589e\u52a0\u65b0\u7684\u884c\u4e3a",(0,l.kt)("br",{parentName:"p"}),"\n","\u56e0\u4e3a\u6bcf\u4e2a\u884c\u4e3a\u5bf9\u5e94\u4e00\u4e2aSystem\uff0c\u6240\u4ee5\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u884c\u4e3a\u5c31\u662f\u589e\u52a0\u4e00\u4e2aSystem\u3002\u4e0d\u7ba1\u884c\u4e3a\u5982\u4f55\u53d8\u5316\uff0c\u53ea\u5f71\u54cdSystem\u5c42\uff0c\u4e0d\u4f1a\u5f71\u54cd\u4f5c\u4e3a\u4e0b\u5c42\u7684Manager\u5c42\u548cGameObject\u3001Component\u5c42")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5bf9\u4e8e\u5f15\u64ce\u800c\u8a00\uff0cECS\u6a21\u5f0f\u4e3b\u8981\u7528\u5728\u573a\u666f\u7ba1\u7406\u8fd9\u5757"))),(0,l.kt)("h3",{id:"\u6ce8\u610f\u4e8b\u9879"},"\u6ce8\u610f\u4e8b\u9879"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u56e0\u4e3a\u7ec4\u4ef6\u7684ArrayBuffer\u4e00\u65e6\u5728\u521b\u5efa\u540e\uff0c\u5b83\u7684\u5927\u5c0f\u5c31\u4e0d\u4f1a\u6539\u52a8\uff0c\u6240\u4ee5\u6700\u597d\u5728\u521b\u5efa\u65f6\u6307\u5b9a\u8db3\u591f\u5927\u7684\u6700\u5927\u7ec4\u4ef6\u4e2a\u6570")),(0,l.kt)("h2",{id:"\u7ed3\u5408\u5176\u5b83\u6a21\u5f0f"},"\u7ed3\u5408\u5176\u5b83\u6a21\u5f0f"),(0,l.kt)("h3",{id:"\u7ed3\u5408\u591a\u7ebf\u7a0b\u6a21\u5f0f"},"\u7ed3\u5408\u591a\u7ebf\u7a0b\u6a21\u5f0f"),(0,l.kt)("p",null,"\u5982\u679c\u5f15\u64ce\u5f00\u4e86\u591a\u4e2a\u7ebf\u7a0b\uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06\u7ec4\u4ef6\u7684ArrayBuffer\u6539\u4e3aSharedArrayBuffer\u3002\u8fd9\u6837\u7684\u8bdd\u5c31\u53ef\u4ee5\u5c06\u5176\u76f4\u63a5\u5171\u4eab\u5230\u5404\u4e2a\u7ebf\u7a0b\u4e2d\u800c\u4e0d\u9700\u8981\u62f7\u8d1d\uff0c\u4ece\u800c\u63d0\u9ad8\u4e86\u6027\u80fd"),(0,l.kt)("h3",{id:"\u7ed3\u5408\u7ba1\u9053\u6a21\u5f0f"},"\u7ed3\u5408\u7ba1\u9053\u6a21\u5f0f"),(0,l.kt)("p",null,"\u5982\u679c\u5f15\u64ce\u4f7f\u7528\u4e86\u7ba1\u9053\u6a21\u5f0f\uff0c\u90a3\u4e48\u53ef\u4ee5\u53bb\u6389System\uff0c\u800c\u4f7f\u7528\u7ba1\u9053\u7684Job\u6765\u4ee3\u66ff\u3002\u5176\u4e2d\u4e00\u4e2aJob\u5c31\u662f\u4e00\u4e2aSystem"),(0,l.kt)("p",null,"\u53e6\u5916\uff0c\u53ef\u4ee5\u53bb\u6389WorldState\uff0c\u800c\u4f7f\u7528PipelineManagerState\u6765\u4ee3\u66ff"),(0,l.kt)("h2",{id:"\u6700\u4f73\u5b9e\u8df5"},"\u6700\u4f73\u5b9e\u8df5"),(0,l.kt)("h3",{id:"\u54ea\u4e9b\u573a\u666f\u4e0d\u9700\u8981\u4f7f\u7528\u6a21\u5f0f"},"\u54ea\u4e9b\u573a\u666f\u4e0d\u9700\u8981\u4f7f\u7528\u6a21\u5f0f"),(0,l.kt)("p",null,"\u5982\u679c\u6e38\u620f\u7684\u4eba\u7269\u79cd\u7c7b\u5f88\u5c11\uff0c\u884c\u4e3a\u7b80\u5355\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u4f7f\u7528\u6700\u5f00\u59cb\u7ed9\u51fa\u7684\u4eba\u7269\u6a21\u5757\u7684\u65b9\u6848\uff0c\u5373\u4f7f\u7528\u4e00\u4e2a\u4eba\u7269\u6a21\u5757\u5bf9\u5e94\u4e00\u79cd\u4eba\u7269\uff0c\u5e76\u901a\u8fc7\u7ee7\u627f\u5b9e\u73b0\u591a\u79cd\u4eba\u7269\uff0c\u8fd9\u6837\u6700\u5bb9\u6613\u5b9e\u73b0"),(0,l.kt)("h2",{id:"\u66f4\u591a\u8d44\u6599\u63a8\u8350"},"\u66f4\u591a\u8d44\u6599\u63a8\u8350"),(0,l.kt)("p",null,"ECS\u7684\u6982\u5ff5\u6700\u5148\u662f\u7531\u201c\u5b88\u671b\u5148\u950b\u201d\u6e38\u620f\u7684\u5f00\u53d1\u8005\u63d0\u51fa\u7684\uff0c\u8be6\u7ec6\u8d44\u6599\u53ef\u4ee5\u5728\u7f51\u4e0a\u641c\u7d22\u201c\u300a\u5b88\u671b\u5148\u950b\u300b\u67b6\u6784\u8bbe\u8ba1\u548c\u7f51\u7edc\u540c\u6b65\u201d"),(0,l.kt)("p",null,"ECS\u6a21\u5f0f\u662f\u5728\u201c\u7ec4\u4ef6\u5316\u201d\u3001\u201cData Oriented\u201d\u57fa\u7840\u4e0a\u53d1\u5c55\u800c\u6765\uff0c\u53ef\u4ee5\u5728\u7f51\u4e0a\u641c\u7d22\u66f4\u591a\u5173\u4e8e\u201c\u7ec4\u4ef6\u5316\u201d\u3001\u201cData Oriented\u201d\u3001\u201cECS\u201d\u7684\u8d44\u6599"))}s.isMDXComponent=!0},3072:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/UML-299c27408b6971beb2802244ae9c645c.png"},674:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/UML-8b12c06b2aac8e029277d45875163cf1.png"},4081:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/UML-7c2327a067e85b5ec7e61c78967bcd15.png"},3019:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/UML-5a6ee8e6945a319638e7b48948c3fe62.png"}}]);